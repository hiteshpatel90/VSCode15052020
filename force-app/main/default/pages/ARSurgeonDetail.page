<apex:page id="surgeonPage" applyBodyTag="false" applyHtmlTag="false" showChat="false" showHeader="false" sidebar="false" showQuickActionVfHeader="false" standardStylesheets="false" controller="CS_ARContactsCC"  extensions="CS_ARCCExtension" docType="html-5.0">

    <apex:composition template="ARtemplate">
        <apex:define name="bodyContent">
        
        <style>
            html, body{
                    height: 100% !important;
                }
                .axis-grid-header{
                    text-align:left;
                }
                .displayDetailBlock{ 
                    padding: 7px;
                    min-height: 35px;
                }
                .displayBlock{
                    display: block;
                    border: thin solid lightgray;
                    padding: 7px;
                    min-height: 35px;
                }
                
                .font-large {
                    font-size: large;
                }
                
                .header-left{
                    text-align: left;
                    background-color: lightgray;
                }
                
                /*.section-header-lead-details{
                
                    color: #3A9DDB !important;
                }*/
                
                .muted_label{
                    padding-top: 0px;
                    color: #9c9a9a; /*lightgrey;*/
                    min-height: 25px !important;
                }
                
                .ag-header-cell-menu-button{
                    opacity:1 !important;
                }
                 .rag-red {
            
                    background-color: lightcoral;
            
                }
            
            .border_top_2{
               border-top-width: 2px; 
            }
            .ibox{
                margin-bottom: 0px !important;   
            }
            
           
            .border_top_none{
                border-top-width: 0px; 
            }
            
            .light_border_top_bottom{
                border-top: thin solid lightgrey;
                border-bottom: thin solid lightgrey;
            }
            
            .grey_border_right{
                border-right: thin solid grey;
            }
            
            .menu_btn{
                width: 140px;
            }
            
            .font-large {
                font-size: large;
            }
             
            .ibox_border{
                border: 1px solid lightgrey;
            }
             
            .fa-2x {
            
                width: 50px;
                text-align: center;
            }
            
            .muted_label{
                padding-top: 0px;
                color: #9c9a9a; /*lightgrey;*/
                min-height: 25px !important;
            }
            
            .detail_div{
                margin-bottom: 25px !important;
            }
            
            .text-blue{
                color: #325996;
             }
            
            .GGrid-content {
                //border-top-color: #151516 !important;
                //height: inherit !important;
                border-top: solid 1px #D3D3D3 !important;    
            }
            
            .subsection_header{
                font-size: 18px;
                margin-left: 15px;
            }
            
            .section-header-surgeon-details{
                
                color: #3A9DDB !important;
             }
             
             .related-table{
                border: thin solid lightgrey;
             }
                
             .related-table td, .related-table th {
                border:none
             }
                
             .related-table caption{
                padding-bottom: 0px;
                padding-top: 20px;
             }
             
             .ibox-table td, .ibox-table tr, .ibox-table th{
                 border: none !important;
                 //padding: 0px !important;            
             }
             
             .readonly-control{
                border: lightgray thin solid;
                padding-left: 10px;
                background-color: #eee;
             }
             
             .expired-prod{
                 display : inline;
                 font-weight: bolder;
                 font-size: large;
                 font-stretch: expanded;
                 color: red;
             }
                
             .expiredprod{
                 background-color: #eee;
                 position:relative;
                 padding: 10px;                 
                 display: none;
             }
             
             .disclaimerFooter {
                  text-align: center;
                  margin: 0 auto;                 
             }
            
            .fa-border{
                background-color: #545454;
            }
            .fa-meeting-background{
                background-color: #a94442 !important;
            }
            .fa-meeting-task{
                background-color: #3c763d !important;
                font-size: 1.5em;
            }

            /*  Vishnu Release 4.4  */
            .fa-meeting-lead{
                background-color: #f78a04 !important;
                font-size: 1.5em;
            }
            /*  Vishnu Release 4.4  */            
            .fa-meeting-surgicalcase{
                background-color: #3A9DDB !important;
                font-size: 1.5em;
            }    
            .fa-meeting-note{
                background-color: #ed5565 !important;
                font-size: 1.5em;
            }
            .fa-meeting-log{
                background-color: #f8ac59 !important;
                font-size: 1.5em;
            }
            .fa-line-chart {
                font-size: 1.4em;
              }

             .fa-marketing-visit{
                background-color:#3A9DDB !important;// #427cbb !important;
                font-size: 1.5em; 
             }
             
             .fa-marketing-email{
                background-color: #3A9DDB !important; //#427cbb !important;
                font-size: 1.5em;
             }              
              
            .nav-tabs { border-bottom: 2px solid #DDD; }
            .nav-tabs > li.active > a, .nav-tabs > li.active > a:focus, .nav-tabs > li.active > a:hover { border-width: 0; }
            .nav-tabs > li > a { border: none; color: #666; }
                .nav-tabs > li.active > a, .nav-tabs > li > a:hover { border: none; color: #4285F4 !important; background: transparent; }
                .nav-tabs > li > a::after { content: ""; background: #4285F4; height: 2px; position: absolute; width: 100%; left: 0px; bottom: -1px; transition: all 250ms ease 0s; transform: scale(0); }
            .nav-tabs > li.active > a::after, .nav-tabs > li:hover > a::after { transform: scale(1); }
            .tab-nav > li > a::after { background: #21527d none repeat scroll 0% 0%; color: #fff; }
            .tab-pane { padding: 15px 0; }
            .tab-content{padding:20px}
            /*
            .col-xs-9 {
                width: 100%;
            }
            
            .ibox-content{
                padding: 15px 0px 20px 20px;
            }*/ 
            
             .default-color {
                color: #333;
                background-color: #fff;
                border-color: #ccc;
            }
            .datetimepicker{
                 width: 100% !important;
                 top:35px !important;
                 bottom:35px !important;
                 
            }
            .dropdown-menu{
                position: absolute;
                z-index:2;
            }
            /*
            Commented by srinivas sattoor for 3.2
            */
            /*.fa-envelope-o{
                padding-top:4px;
                font-size: 1.25em;
               
            }
            .fa-clock-o{   
                         
                font-size: 1.15em;
                
            }*/
            
        </style>
        <script>
            var suregeonId = getURLParameter('id');
            
            if(suregeonId.startsWith('003')){
            
                Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePersonAccountIdForContactId}",   
                     suregeonId, 
                    function(result, event) {
                    
                      suregeonId = result;
                  });
            
            }
            
            function getURLParameter(name) {
              return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [null, ''])[1].replace(/\+/g, '%20')) || null;
            }
            
            function switchSurgeonView(eleType){
                if(eleType == "ListView"){
                     window.location = "/ARsurgeons";
                }
            }
            
            // Function for Phone number validation - do not allow to enter characters in phone number field
            function isNumberCommaDot(evt) {
                  
                var theEvent = evt || window.event;
                var key = theEvent.keyCode || theEvent.which;
                    
                if (key === 9 ) { //TAB was pressed
                    phoneFormate($('#pPersonMobilePhone').val(),theEvent );
                    init();
                    return;
                }
                    
                key = String.fromCharCode(key);
                if (key.length == 0) return;
                var regex = /^[0-9,\9\b]*\.?[0-9]*$/;
                if (!regex.test(key)) {
                    theEvent.returnValue = false;
                    if (theEvent.preventDefault) theEvent.preventDefault();
                }                      
            }
                
            //Date Format Modified to MM-DD-YYYY format in Release 4.4(CID:-000045) by Mimansha Samal
            function dateFormatterYearOnly(val){
                    return moment(val).format("YYYY");
            }
                
            var accountGridOptions = {
                rowHeight: '100px',
                rowSelection: 'single',
                suppressRowClickSelection: false,
                enableFilter: true,
                enableColResize : true,                
                enableSorting: true,
                sizeColumnsToFit: true,
                pagination: true,
                suppressPaginationPanel: true,
                paginationPageSize: 10,
                debug: true,
                icons: { 
                                    menu: '<i class="fa fa-sort-desc" ></i>' 
                            }
            };
            
            
            var contactGridOptions = {
                rowHeight: '100px',
                rowSelection: 'single',
                suppressRowClickSelection: false,
                enableFilter: true,
                enableColResize : true,
                enableSorting: true,
                sizeColumnsToFit: true,
                pagination: true,
                suppressPaginationPanel: true,
                paginationPageSize: 10,
                debug: true,
                icons: { 
                                    menu: '<i class="fa fa-sort-desc" ></i>' 
                            }
           };
           
           
           /* Author:Ansu Routray
              Release:4.3
              Date Modified 22/08/2017
              Component Id:CID-000463
              Purpose:grid for orthoilustrtated course for surgeon
           */
           var orthoGridOptions = {
                rowHeight: '100px',
                rowSelection: 'single',
                suppressRowClickSelection: true,
                enableFilter: true,
                enableColResize : true,
                enableSorting: true,
                sizeColumnsToFit: true,
                //pagination: true,
                //suppressPaginationPanel: true,
                //paginationPageSize: 10,
                //debug: true,
                icons: { 
                           menu: '<i class="fa fa-sort-desc" ></i>' 
                       }
           };
           
           //Addition by Ansu ends
           
           //Code Changes by Mimansha Samal on 16th March 2017 in Release 3.2 for Preference Cards
            //Function to call for textbox that ONLY NUMERIC will accept
            function OnlyNum(evt) {
                evt = (evt) ? evt : window.event;
                var charCode = (evt.which) ? evt.which : evt.keyCode;
                if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                    return false;
                }
                return true;
            }
            
            function isNumberWithDecimalKey(evt) {
                   
                evt = (evt) ? evt : window.event;
                var charCode = (evt.which) ? evt.which : event.keyCode;
                if (charCode > 31 && (charCode < 48 || charCode > 57) && charCode != 46  && charCode != 36)
                    return false;
                else {
                    var len = document.getElementById("number-decimal").value.length;
                    var index = document.getElementById("number-decimal").value.indexOf('.');
                    var dollarindex = document.getElementById("number-decimal").value.indexOf('$');
                    
                    console.log('Index of dollar-----------:'+dollarindex);
                    
                    if (index > -1 && charCode == 46) {
                        return false;
                    }
                    
                    if (dollarindex > -1 && charCode == 36) {
                         console.log('Inside dollar-----------'+dollarindex);
                        return false;
                    }
                    
                    /*if (index > 0) {
                        var CharAfterdot = (len + 1) - index;
                        if (CharAfterdot > 3) {
                            return false;
                        }
                    }*/

                }
                return true;
            }
            
            function isDecimalNumber(evt) {
                   
                evt = (evt) ? evt : window.event;
                var charCode = (evt.which) ? evt.which : event.keyCode;
                if (charCode > 31 && (charCode < 48 || charCode > 57) && charCode != 46  && charCode != 36)
                    return false;
                else {
                    var len = document.getElementById("number-edit-decimal").value.length;
                    var index = document.getElementById("number-edit-decimal").value.indexOf('.');
                    var dollarindex = document.getElementById("number-edit-decimal").value.indexOf('$');
                    
                    console.log('Index of dollar-----------:'+dollarindex);
                    
                    if (index > -1 && charCode == 46) {
                        return false;
                    }
                    
                    if (dollarindex > -1 && charCode == 36) {
                         console.log('Inside dollar-----------'+dollarindex);
                        return false;
                    }
                    
                    /*if (index > 0) {
                        var CharAfterdot = (len + 1) - index;
                        if (CharAfterdot > 3) {
                            return false;
                        }
                    }*/

                }
                return true;
            }
            
            
            
            function assignProductPartsTypeahead(){
                $("#new-prefcard-modal input.opportunity-part-number-typeahead").typeahead({
                // typeahead setup for case products
                minLength: 3,
                items: 50,
                source: function(query, onSuccess) {
                    search(query, "CS_ARCCExtension.searchPriceBookEntriesForIES", onSuccess);                                    
                },
                displayText: function(item) {
                    return globalDecodeEntities( item.Product2.Material_Number__c + " ; " + item.Product2.Name);
                },
                afterSelect: function(item) {
                            
                    if((item.Product2.Material_Group_Type__c == "Implants") || (item.Product2.Material_Group_Type__c == "Disposable"))
                     {   
                          console.log('Inside I or S');
                         $("#new-prefcard-modal .opportunity-part-unit-price").removeAttr('disabled');
                         $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                         
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").val(item.Product2.Material_Number__c);
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id", item.Product2Id);
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type", item.Product2.Material_Group_Type__c);
                                
                         $("#new-prefcard-modal .opportunity-part-description").val(item.Product2.Name);
                         $("#new-prefcard-modal .opportunity-part-quantity").val("1");
                         $("#new-prefcard-modal .opportunity-part-unit-price").val("$" + item.UnitPrice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
                         $("#new-prefcard-modal .opportunity-part-unit-price").attr("data-unit-price", item.UnitPrice);
                                
                         $("#new-prefcard-modal .opportunity-part-total-price").text("$" + item.UnitPrice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
                         $("#new-prefcard-modal .opportunity-part-total-price").attr("data-total-price", item.UnitPrice);
                       
                         //$("#new-prefcard-modal .opportunity-part-unit-price").val("$" + "0.00");         
                         //$("#new-prefcard-modal .opportunity-part-total-price").text("$" + "0.00");
                     
                         $("#new-prefcard-modal button.add-opp-part").removeAttr('disabled');
                         //alert(item + " selected and need to add a row in table");
                     }
                     
                     if(item.Product2.Material_Group_Type__c == "Equipment")
                     {
                         console.log('Inside Equip');
                         
                         $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                         $("#new-prefcard-modal .opportunity-part-total-price").text("");
                         
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").val(item.Product2.Material_Number__c);
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id", item.Product2Id);
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type", item.Product2.Material_Group_Type__c);
                                
                         $("#new-prefcard-modal .opportunity-part-description").val(item.Product2.Name);
                         $("#new-prefcard-modal .opportunity-part-quantity").val("1");
                         $("#new-prefcard-modal .opportunity-part-unit-price").attr("disabled", true);
                         
                     
                         $("#new-prefcard-modal button.add-opp-part").removeAttr('disabled');
                         //alert(item + " selected and need to add a row in table");
                     }
                
                }
                });
            }   //  end of assignProductPartsTypeahead
            
            function assignProductPartDescriptionTypeahead(){
                 $("#new-prefcard-modal input.opportunity-part-description-typeahead").typeahead({
                 // typeahead setup for case products
                 minLength: 3,
                 items: 50,
                 source: function(query, onSuccess) {
                     search(query, "CS_ARCCExtension.searchPriceBookEntriesForIES", onSuccess);                                    
                 },
                 displayText: function(item) {
                     return globalDecodeEntities( item.Product2.Material_Number__c + " ; " + item.Product2.Name);
                 },
                 afterSelect: function(item) {
                    
                     if((item.Product2.Material_Group_Type__c == "Implants") || (item.Product2.Material_Group_Type__c == "Disposable"))
                     {   
                          console.log('Inside I or S');
                         $("#new-prefcard-modal .opportunity-part-unit-price").removeAttr('disabled');
                         $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                         
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").val(item.Product2.Material_Number__c);
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id", item.Product2Id);
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type", item.Product2.Material_Group_Type__c);
                                
                         $("#new-prefcard-modal .opportunity-part-description").val(item.Product2.Name);
                         $("#new-prefcard-modal .opportunity-part-quantity").val("1");
                         $("#new-prefcard-modal .opportunity-part-unit-price").val("$" + item.UnitPrice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
                         $("#new-prefcard-modal .opportunity-part-unit-price").attr("data-unit-price", item.UnitPrice);
                                
                         $("#new-prefcard-modal .opportunity-part-total-price").text("$" + item.UnitPrice.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
                         $("#new-prefcard-modal .opportunity-part-total-price").attr("data-total-price", item.UnitPrice);
                       
                         //$("#new-prefcard-modal .opportunity-part-unit-price").val("$" + "0.00");         
                         //$("#new-prefcard-modal .opportunity-part-total-price").text("$" + "0.00");
                     
                         $("#new-prefcard-modal button.add-opp-part").removeAttr('disabled');
                         //alert(item + " selected and need to add a row in table");
                     }
                     
                     if(item.Product2.Material_Group_Type__c == "Equipment")
                     {
                         console.log('Inside Equip');
                         $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                         $("#new-prefcard-modal .opportunity-part-total-price").text("");
                         
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").val(item.Product2.Material_Number__c);
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id", item.Product2Id);
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type", item.Product2.Material_Group_Type__c);
                                
                         $("#new-prefcard-modal .opportunity-part-description").val(item.Product2.Name);
                         $("#new-prefcard-modal .opportunity-part-quantity").val("1");
                         $("#new-prefcard-modal .opportunity-part-unit-price").attr("disabled", true);
                         
                     
                         $("#new-prefcard-modal button.add-opp-part").removeAttr('disabled');
                         //alert(item + " selected and need to add a row in table");
                     }
                  }
                 });
            }   //  end of assignProductPartDescriptionTypeahead
            
            function calculatePrefProdPartsPrice(e){
                        
                console.log('##--e: '+ e);
                if(isNumber(e)){
                    var qty = parseInt($("#new-prefcard-modal .opportunity-part-quantity").val());
                    //var price = parseFloat($("#new-prefcard-modal .opportunity-part-unit-price").attr("data-unit-price"));
                    //console.log('##--price2: '+ $("#new-prefcard-modal .opportunity-part-unit-price").val());
                    var price =parseFloat($("#new-prefcard-modal .opportunity-part-unit-price").val().replace('$', "").replace(',', ""));
                    console.log('##--price: '+ price);
                    console.log('##--quantity: '+ qty );
                    
                    if(!isNaN(qty) && !isNaN(price)){
                        var total = qty * price;
                            
                        $("#new-prefcard-modal .opportunity-part-total-price").text("$" + total.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
                        $("#new-prefcard-modal .opportunity-part-total-price").attr("data-total-price", total);
                       
                    }
                    else
                    {
                        $("#new-prefcard-modal .opportunity-part-total-price").text("");
                        $("#new-prefcard-modal .opportunity-part-total-price").removeAttr("data-total-price");
                    }
                    return true;
                }
                return false;
            }   //  end of calculatePrefProdPartsPrice
            
            function calculateEditPartsPrice(e){
                        
                console.log('##--e: '+ e);
                if(isNumber(e)){
                    var qty = parseInt($("#edit-quantity").val());
                   
                    var price =parseFloat($(".product-parts .edit-pt-unitprice").val().replace('$', "").replace(',', ""));
                    console.log('##--price edit: '+ price);
                    console.log('##--quantity edit: '+ qty );
                    
                    if(!isNaN(qty) && !isNaN(price)){
                        var total = qty * price;
                            
                        $(".product-parts .edit-total-price").text("$" + total.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
                        $(".product-parts .edit-total-price").attr("data-total-price", total);
                        $('.product-parts td[total-price="edit-total"]').attr("data-total", total);
                       
                        
                        var totalAmount = 0;
                        $("#new-prefcard-modal .product-parts tbody tr").each(function(){
                            row = $(this);
                            console.log('Inside Total add part---'+$(this).find("td#total").attr("data-total"));
                            if(($(this).find("td#total").attr("data-total") != undefined)){
                              console.log('Inside if of Total add part---');
                              totalAmount += parseFloat($(this).find("td#total").attr("data-total"));
                            }
                        });
                        console.log('Total add part---'+totalAmount );
                        if(!isNaN(totalAmount)){
                            $("#new-prefcard-modal .product-parts tfoot #totalProductAmount").attr("data-total", totalAmount);
                            $("#new-prefcard-modal .product-parts tfoot #totalProductAmount").html("$" + totalAmount.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
                        }
                       
                    }
                    else
                    {
                        $(".product-parts .edit-total-price").text("");
                        $(".product-parts .edit-total-price").removeAttr("data-total-price");
                        $('.product-parts td[total-price="edit-total"]').removeAttr("data-total");
                        
                        var totalAmount = 0;
                        $("#new-prefcard-modal .product-parts tbody tr").each(function(){
                            row = $(this);
                            console.log('Inside Total add part---'+$(this).find("td#total").attr("data-total"));
                            if($(this).find("td#total").attr("data-total") != undefined){
                              console.log('Inside if of Total add part---');
                              totalAmount += parseFloat($(this).find("td#total").attr("data-total"));
                            }
                        });
                        console.log('Total add part---'+totalAmount );
                        if(!isNaN(totalAmount)){
                            $("#new-prefcard-modal .product-parts tfoot #totalProductAmount").attr("data-total", totalAmount);
                            $("#new-prefcard-modal .product-parts tfoot #totalProductAmount").html("$" + totalAmount.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
                        }
                    }
                    return true;
                }
                return false;
            }   //  end of calculateEditPartsPrice
            
            
            
            function isNumber(evt) {
                evt = (evt) ? evt : window.event;
                var charCode = (evt.which) ? evt.which : evt.keyCode;
                if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                    return false;
                }
                return true;
             }   //  end of isNumber
             
             
             function addPrefProductPart(){
                        
                 if($("#new-prefcard-modal button.add-opp-part").is(":disabled")){
                     return false;
                 }
                        
                 var eleFound=false;
                 $.each($("#new-prefcard-modal .product-parts tbody tr"), function(i, v){
                     if($(v).attr("data-part-id") == $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id")){
                         eleFound=true;
                     }
                 });
                        
                 if(eleFound){                     
                      $("#new-prefcard-modal .save-error").text("Part already selected. Delete and add the part");
                 } else {
                     $("#new-prefcard-modal .save-error").text("");
                     var price =parseFloat($("#new-prefcard-modal .opportunity-part-unit-price").val().replace('$', "").replace(',', ""));                     
                     var qty = parseInt($("#new-prefcard-modal .opportunity-part-quantity").val());
                     var row_id = $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id");
                      
                     if(!isNaN(price)){
                          console.log('Inside if of nan price add part---');
                          if(!isNaN(qty)){
                             $("#new-prefcard-modal .product-parts tbody").append('<tr data-part-id="'+$("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id")+'" product-group-type="'+$("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type")+'"><td class="product-marker"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-number-typeahead").val()+'</p></td><td class="description-marker"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-description").val()+'</p></td><td class="quantity-marker"><p class="form-control-static part-quantity">'+$("#new-prefcard-modal .opportunity-part-quantity").val()+'</p></td><td class="unitprice-marker"><p class="form-control-static part-unitprice">'+"$" +price.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</p></td><td class="totalprice-marker" id="total" data-total="'+$("#new-prefcard-modal .opportunity-part-total-price").attr("data-total-price")+'"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-total-price").text()+'</p></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary pt-edit-btn" onclick="editPart(\''+row_id+'\')">Edit</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                          }
                          else
                          {
                              console.log('Inside else of nan price add part---');
                             $("#new-prefcard-modal .product-parts tbody").append('<tr data-part-id="'+$("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id")+'" product-group-type="'+$("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type")+'"><td class="product-marker"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-number-typeahead").val()+'</p></td><td class="description-marker"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-description").val()+'</p></td><td class="quantity-marker"></td><td class="unitprice-marker"><p class="form-control-static part-unitprice">'+"$" +price.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</p></td><td class="totalprice-marker" id="total"></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary pt-edit-btn" onclick="editPart(\''+row_id+'\')">Edit</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                          }
                     
                     }
                     else
                     {
                         if(!isNaN(qty)){
                             console.log('Inside if of nan quantity add part---');
                             $("#new-prefcard-modal .product-parts tbody").append('<tr data-part-id="'+$("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id")+'" product-group-type="'+$("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type")+'"><td class="product-marker"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-number-typeahead").val()+'</p></td><td class="description-marker"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-description").val()+'</p></td><td class="quantity-marker"><p class="form-control-static part-quantity">'+$("#new-prefcard-modal .opportunity-part-quantity").val()+'</p></td><td class="unitprice-marker"></td><td class="totalprice-marker" id="total"></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary pt-edit-btn" onclick="editPart(\''+row_id+'\')">Edit</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                         }
                         else
                         {
                             console.log('Inside else of nan quantity add part---');
                             $("#new-prefcard-modal .product-parts tbody").append('<tr data-part-id="'+$("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id")+'" product-group-type="'+$("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type")+'"><td class="product-marker"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-number-typeahead").val()+'</p></td><td class="description-marker"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-description").val()+'</p></td><td class="quantity-marker"></td><td class="unitprice-marker"></td><td class="totalprice-marker" id="total"></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary pt-edit-btn" onclick="editPart(\''+row_id+'\')">Edit</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                         }
                     }
                 }
                        
                 var totalAmount = 0;
                 $("#new-prefcard-modal .product-parts tbody tr").each(function(){
                     row = $(this);
                     console.log('Inside Total add part---'+$(this).find("td#total").attr("data-total"));
                     if($(this).find("td#total").attr("data-total") != undefined){
                          console.log('Inside if of Total add part---');
                         totalAmount += parseFloat($(this).find("td#total").attr("data-total"));
                     }
                 });
                 console.log('Total add part---'+totalAmount );
                 if(!isNaN(totalAmount)){
                     $("#new-prefcard-modal .product-parts tfoot #totalProductAmount").attr("data-total", totalAmount);
                     $("#new-prefcard-modal .product-parts tfoot #totalProductAmount").html("$" + totalAmount.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
                 }      
                  
                 $("#new-prefcard-modal .opportunity-part-number-typeahead").val("");
                 $("#new-prefcard-modal .opportunity-part-number-typeahead").removeAttr("data-part-id");
                        
                 $("#new-prefcard-modal .opportunity-part-description").val("");
                 $("#new-prefcard-modal .opportunity-part-quantity").val("");
                 $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                 $("#new-prefcard-modal .opportunity-part-unit-price").removeAttr('disabled');
                 $("#new-prefcard-modal .opportunity-part-description").removeAttr('disabled');
                 $("#new-prefcard-modal .opportunity-part-number-typeahead").removeAttr('disabled');
                 //$("#new-prefcard-modal .opportunity-part-unit-price").removeAttr("data-unit-price");
                        
                 $("#new-prefcard-modal .opportunity-part-total-price").text("");
                 $("#new-prefcard-modal .opportunity-part-total-price").removeAttr("data-total-price");
                        
                 $("#new-prefcard-modal button.add-opp-part").attr('disabled', 'disabled');
                        
                                
            }   //  end of addPrefProductPart
            
            
            
            function editPart(row_id){
            
                console.log('##--row_id for part edit: ' + row_id);
                $.each($("#new-prefcard-modal .product-parts tbody tr"), function(i, v) {
                     console.log('##--Inside tr loop product part id ' + $(v).attr("data-part-id"));
                    if ($(v).attr("data-part-id") == row_id) {
                         
                         var product_type = $(v).attr("product-group-type");
                         console.log('##--product Group Type: '+ product_type );
                         
                         
                         $("td.pull-right", v).remove();
                         $(this).append('<td class="pull-right"><button type="button" class="btn btn-xs btn-primary pt-save-btn" onclick="savePart(\''+row_id+'\')">Save</button>&nbsp;&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                         
                         /*
                         var part_number = $("td.product-marker", v).text();
                         console.log('##--product number: '+ part_number );
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").val(part_number);
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id", row_id);
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type", product_type);
                          
                         var description = $("td.description-marker", v).text();
                         console.log('##--product description: '+ description );
                         $("#new-prefcard-modal .opportunity-part-description").val(description);
                        
                         var quantity = $("td.quantity-marker", v).text();
                         console.log('##--product quantity: '+ quantity );
                         $("#new-prefcard-modal .opportunity-part-quantity").val(quantity );
                         */
                         
                         var quantity = $("td.quantity-marker", v).text();
                         console.log('##--product quantity: '+ quantity );
                         $("td.quantity-marker p", v).remove();
                         $("td.quantity-marker", v).append('<input type="text" id="edit-quantity" class="form-control edit-pt-quantity" onkeypress="return OnlyNum(event)" oninput="calculateEditPartsPrice()"/>');
                         $("td.quantity-marker input", v).val(quantity);
                         
                         if (product_type == "Implants" || product_type == "Disposable" )
                         {    
                             var unit_price = $("td.unitprice-marker", v).text().replace('$', "").replace(',', "");
                             $("td.unitprice-marker p", v).remove();
                             $("td.unitprice-marker", v).append('<input type="text" id="number-edit-decimal" class="form-control edit-pt-unitprice" onkeypress="return isDecimalNumber(this)" oninput="calculateEditPartsPrice()"/>');
                             $("td.unitprice-marker input", v).val("$" + unit_price);
                             
                             var total_price = $("td.totalprice-marker", v).text().replace('$', "").replace(',', "");
                             $("td.totalprice-marker p", v).remove();
                             $("td.totalprice-marker", v).append('<p class="form-control-static edit-total-price readonly-control"></p>');
                             $("td.totalprice-marker", v).attr("total-price", "edit-total");
                             $("td.totalprice-marker p", v).text("$" + total_price);
                             /*
                             var unit_price = $("td.unitprice-marker", v).text().replace('$', "").replace(',', "");
                             console.log('##--product unit price: '+ unit_price );
                             $("#new-prefcard-modal .opportunity-part-unit-price").val("$" + unit_price );
                             $("#new-prefcard-modal .opportunity-part-unit-price").attr("data-unit-price", unit_price);
                         
                             var total_price = $("td.totalprice-marker", v).text().replace('$', "").replace(',', "");
                             console.log('##--product total price: '+ total_price );
                             $("#new-prefcard-modal .opportunity-part-total-price").text("$" + total_price );
                             $("#new-prefcard-modal .opportunity-part-total-price").attr("data-total-price", total_price );
                             */
                         }
                         
                         /*
                         else {
                         
                             $("#new-prefcard-modal .opportunity-part-unit-price").attr("disabled", true);    
                         }
                         
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("disabled", true);
                         $("#new-prefcard-modal .opportunity-part-description").attr("disabled", true);
                         $("#new-prefcard-modal button.add-opp-part").removeAttr('disabled');
                         */
                         
                         //Disable all Edit buttons for rest of the added products and modal save button 
                         $(".product-parts .pt-edit-btn").attr("disabled", true);
                         $(".product-parts .delete-product-part").attr("disabled", true);                         
                         $("#new-prefcard-modal .btn-delete-prefcard").attr("disabled", true);
                         $("#new-prefcard-modal .btn-save-prefcard").attr("disabled", true);
                         $("#new-prefcard-modal #tablePrefCardTaxonomy button").attr("disabled", true);
                         $("#new-prefcard-modal .position").attr("disabled", true);
                         $("#new-prefcard-modal .prefCardName").attr("disabled", true);
                         $("#new-prefcard-modal .opportunity-part-unit-price").attr("disabled", true);
                         $("#new-prefcard-modal .opportunity-part-description").attr("disabled", true);
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("disabled", true);
                         $("#new-prefcard-modal .opportunity-part-quantity").attr("disabled", true);
                         $("#new-prefcard-modal button.add-opp-part").attr('disabled', 'disabled');
                         
                         $("#new-prefcard-modal div.disposables.rte").summernote('disable');
                         $("#new-prefcard-modal div.sutures.rte").summernote('disable');
                         $("#new-prefcard-modal div.medications.rte").summernote('disable');
                         $("#new-prefcard-modal div.equipment.rte").summernote('disable');
                         $("#new-prefcard-modal div.equipment-notes.rte").summernote('disable');
                                                 
                         //$(this).remove();
                         // $(this).append('<td class="product-marker"><p class="form-control-static">'+ description +'</p></td><td></td><td></td><td></td><td></td>');
                          
                          
                         
                    }   //  end of outer IF
                }); //  end of for-each tr
            }
            
            
            function savePart(row_id){
            
                console.log('##--row_id for part save: ' + row_id);
                $.each($("#new-prefcard-modal .product-parts tbody tr"), function(i, v) {
                     console.log('##--Inside tr loop product save part id ' + $(v).attr("data-part-id"));
                    if ($(v).attr("data-part-id") == row_id) {
                         
                         var product_type = $(v).attr("product-group-type");
                         console.log('##--product Group Type: '+ product_type );
                         
                         $("td.pull-right", v).remove();
                         $(this).append('<td class="pull-right"><button type="button" class="btn btn-xs btn-primary pt-edit-btn" onclick="editPart(\''+row_id+'\')">Edit</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                         
                         $(".product-parts .pt-edit-btn").removeAttr('disabled');
                         $("#new-prefcard-modal .btn-save-prefcard").removeAttr('disabled');
                         $(".product-parts .delete-product-part").removeAttr('disabled');
                         $("#new-prefcard-modal .btn-delete-prefcard").removeAttr('disabled');
                         $("#new-prefcard-modal #tablePrefCardTaxonomy button").removeAttr('disabled');
                         $("#new-prefcard-modal .position").removeAttr('disabled');
                         $("#new-prefcard-modal .prefCardName").removeAttr('disabled');
                         $("#new-prefcard-modal .opportunity-part-unit-price").removeAttr('disabled');
                         $("#new-prefcard-modal .opportunity-part-description").removeAttr('disabled');
                         $("#new-prefcard-modal .opportunity-part-number-typeahead").removeAttr('disabled');
                         $("#new-prefcard-modal .opportunity-part-quantity").removeAttr('disabled');
                         
                         $("#new-prefcard-modal div.disposables.rte").summernote('enable');
                         $("#new-prefcard-modal div.sutures.rte").summernote('enable');
                         $("#new-prefcard-modal div.medications.rte").summernote('enable');
                         $("#new-prefcard-modal div.equipment.rte").summernote('enable');
                         $("#new-prefcard-modal div.equipment-notes.rte").summernote('enable');
                                               
                         
                         var qty = parseInt($(".product-parts #edit-quantity").val());
                         console.log('##--product save quantity: '+ qty);
                         $("td.quantity-marker input", v).remove();
                         
                         if(!isNaN(qty))
                         {
                             $("td.quantity-marker", v).append('<p class="form-control-static part-quantity">'+ qty +'</p>');
                         }
                         
                         if (product_type == "Implants" || product_type == "Disposable" )
                         {    
                             var price =parseFloat($(".product-parts .edit-pt-unitprice").val().replace('$', "").replace(',', ""));
                             $("td.unitprice-marker input", v).remove();
                             
                             var total_price = $("td.totalprice-marker p", v).text().replace('$', "").replace(',', "");
                             $("td.totalprice-marker p", v).remove();                            
                             $("td.totalprice-marker", v).removeAttr("total-price");
                             
                             
                             if(!isNaN(price))
                             {
                                 $("td.unitprice-marker", v).append('<p class="form-control-static part-unitprice">$' + price.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</p>');
                                 if(!isNaN(qty))
                                 {
                                     $("td.totalprice-marker", v).append('<p class="form-control-static">$'+ total_price +'</p>');
                                 }
                         
                             }
                         }
                    }
                });
            }
                        
            function obj2ctag(obj) {
                        var label = globalDecodeEntities(obj.Name);
                        var id = obj.Id;
            
                        var ctag = '<span class="ctag alert alert-info" data-record-id="'+id+'">';
                        ctag += label
                        ctag += '&nbsp;<span data-role="remove-tag"></span></span>';
                        
                        return ctag;
            }
            
            //Release 4.4
            //Component ID:- CID-000341
            //Developer:- Mimansha Samal
            //Modified Date:- 11/6/2017
            //Purpose:- Load Program Type picklist and Program Name typeahead once Training Type is selected for Post Graduation in Surgeon Bio Modal
            
            // -----------------------Release 4.4 Changes starts for Mimansha----------------------------------------
            function trainingTypeSelected(val) {
                
                console.log('##--trainingTypeSelected.val: '+ val);
                if (!val) {
                    alert('Please select Training Type.');
                    return false;
                }
                $("#surgeon-bio-modal input.programname-typeahead").val('');
                $("#surgeon-bio-modal .programname-typeahead").attr("data-record-id" , "");
                $("#surgeon-bio-modal .programname-typeahead").attr("record-name" , "");
                    
                if(val.includes('Select')){
                    // When Program Type dropdpwn selection changes                
                    document.getElementById("select-ProgramType").selectedIndex = 0;
                    $("#surgeon-bio-modal #select-ProgramType").change();                
                    $("#surgeon-bio-modal select.program-type").attr("disabled", true);
                    
                    $("#surgeon-bio-modal input.surgeon-program-name").attr("training-type", '');                    
                    $("#surgeon-bio-modal input.surgeon-program-name").attr("disabled", true);
                    
                    return false;
                }
                else if(val == 'Resident')
                {
                    // Empty the dropdown
                    $("#surgeon-bio-modal select.program-type").empty();
                    $("#surgeon-bio-modal input.surgeon-program-name").attr("training-type", 'Resident');
                    $("#surgeon-bio-modal select.program-type").
                                    append("<option value=''>-Select-</option>"); 
                    console.log('##--programTypeValues2: '+ programTypeValues);
                    // Updated on 9th November by mimansha for CID - 342                   
                    for ( var i=0; i < programTypeValues.length; i++) {
                            if(programTypeValues[i]=='Orthopedic Surgery' || programTypeValues[i] == 'Podiatric')
                            {           
                                $("#surgeon-bio-modal select.program-type").
                                    append("<option value='"+programTypeValues[i]+"'>"+programTypeValues[i]+"</option>");
                            }
                    }
                    
                    // When Program Type dropdpwn selection changes
                    $("#surgeon-bio-modal #select-ProgramType").change(); 
                    $("#surgeon-bio-modal input.surgeon-program-name").attr("disabled", true);
                    //$("#surgeon-bio-modal input.surgeon-program-name").removeAttr('disabled');
                    $("#surgeon-bio-modal select.program-type").removeAttr('disabled');
                }                
                
                else
                {
                    // Empty the dropdown
                    $("#surgeon-bio-modal select.program-type").empty();
                    $("#surgeon-bio-modal input.surgeon-program-name").attr("training-type", 'Fellowship');
                    $("#surgeon-bio-modal select.program-type").
                                    append("<option value=''>-Select-</option>");
                    
                    // Updated on 9th November by mimansha for CID - 342 
                    for ( var i=0; i < programTypeValues.length; i++) {
                            if(!(programTypeValues[i] == 'Orthopedic Surgery'))
                            {           
                                $("#surgeon-bio-modal select.program-type").
                                    append("<option value='"+programTypeValues[i]+"'>"+programTypeValues[i]+"</option>");
                            }
                    }
                    
                    
                    // When Program Type dropdpwn selection changes
                    $("#surgeon-bio-modal #select-ProgramType").change(); 
                    $("#surgeon-bio-modal input.surgeon-program-name").attr("disabled", true);
                    //$("#surgeon-bio-modal input.surgeon-program-name").removeAttr('disabled');
                    $("#surgeon-bio-modal select.program-type").removeAttr('disabled');
                }
            }
            
            //Release 4.4
            //Component ID:- CID-000341
            //Developer:- Mimansha Samal
            //Date:- 9/21/2017
            //Purpose:- Add Graduate/UG/Doctorate record to the table for Education in Surgeon Bio Modal
            function addEducationDetail(){
                        
                 if($("#surgeon-bio-modal button.add-education-part").is(":disabled")){
                     return false;
                 }
                 
                                  
                 var eleFound=false;
                 var addFlag=false;
                 var startyearddlb = $("#surgeon-bio-modal #select-startYear").val();
                 var endyearddlb = $("#surgeon-bio-modal #select-EndYear").val();
                 var degreetypeddlb = $("#surgeon-bio-modal #select-DegreeType").val();
                 var field_of_study = $("#surgeon-bio-modal #fieldOfStudy").val();
                 var institution_name = $("#surgeon-bio-modal .institution-typeahead").attr("record-name");
                 var institution_id = $("#surgeon-bio-modal .institution-typeahead").attr("data-record-id");
                 
                 if(startyearddlb == '-Select-')
                    startyearddlb = '';
                 if(endyearddlb == '-Select-')
                    endyearddlb = '';
                        
                 var syear = parseInt(startyearddlb);
                 var eyear = parseInt(endyearddlb);                 
                 
                 if(syear>=eyear)
                 {
                    addFlag=true;
                 } 
                 console.log('Degree Selected---'+ degreetypeddlb);
                 if(degreetypeddlb == '-Select-')
                 {
                     $("#surgeon-bio-modal .save-error").text("Missing required Education fields.");
                     return false;
                 }
                 
                 if(institution_id == '' || institution_id == 'undefined' || institution_id == undefined || institution_name == undefined){
                     $("#surgeon-bio-modal .save-error").text("Please select a valid institution.");
                     return false;
                 }
                       
                 if(addFlag){                     
                      $("#surgeon-bio-modal .save-error").text("Start Year should not exceed End Year.");
                      return false;
                 } 
                                  
                 var rowcount = 1;
                 $.each($("#surgeon-bio-modal .surgeon-education tbody tr"), function(i, v) {
                    $(v).attr("data-part-id",rowcount);
                    $("td.pull-right", v).remove();
                    $(this).append('<td class="pull-right"><button type="button" class="btn btn-xs btn-primary edu-edit-btn" onclick="editEducationDetail(\''+rowcount+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-edu-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                    rowcount++;
                 });
                 
                 $.each($("#surgeon-bio-modal .surgeon-education tbody tr"), function(i, v){
                     
                     var startyear = $("td.startyear-marker", v).text();
                     var endyear = $("td.endyear-marker", v).text();
                     var degreetype = $("td.degreetype-marker", v).text();
                     var fieldofstudy = $("td.fieldofstudy-marker", v).text();
                     var institutionname = $("td.institution-marker", v).text();
                     
                     console.log('Values are: startyearddlb ' + startyearddlb + ' startyear '+startyear);
                     if((startyear == startyearddlb) && (endyear == endyearddlb) && (degreetype == degreetypeddlb) 
                     && (fieldofstudy == field_of_study) && (institutionname == institution_name)){
                        console.log('Inside duplicate check of Education----------');
                         eleFound=true;
                     }
                 });                        
                 if(eleFound){                     
                      $("#surgeon-bio-modal .save-error").text("Education already exists.");
                      
                      document.getElementById("select-startYear").selectedIndex = 0;
                      document.getElementById("select-EndYear").selectedIndex = 0;
                      document.getElementById("select-DegreeType").selectedIndex = 0;
                      $("#surgeon-bio-modal #fieldOfStudy").val("");
                      $("#surgeon-bio-modal .institution-typeahead").val("");
                      $("#surgeon-bio-modal .institution-typeahead").attr("data-record-id", "" );
                      $("#surgeon-bio-modal .institution-typeahead").attr("record-name", "" );
                      return false;
                 
                 } else {
                     $("#surgeon-bio-modal .save-error").text("");
                     
                     var row_id = $("#surgeon-bio-modal .surgeon-education tbody tr").length + 1;
                     
                     $("#surgeon-bio-modal .surgeon-education tbody").append('<tr data-part-id="'+row_id+'"><td class="startyear-marker"><p class="form-control-static start-year">'+ startyearddlb +'</p></td><td class="endyear-marker"><p class="form-control-static end-year">'+endyearddlb+'</p></td><td class="degreetype-marker"><p class="form-control-static degree-type">'+ degreetypeddlb +'</p></td><td class="fieldofstudy-marker"><p class="form-control-static field-of-study">'+ field_of_study +'</p></td><td class="institution-marker" institution-id="' + institution_id + '" institution-name="' + institution_name + '"><p class="form-control-static institution-name">'+ institution_name +'</p></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary edu-edit-btn" onclick="editEducationDetail(\''+row_id+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-edu-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                     //$("#new-prefcard-modal .product-parts tbody").append('<tr data-part-id="'+$("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id")+'" product-group-type="'+$("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type")+'"><td class="product-marker"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-number-typeahead").val()+'</p></td><td class="description-marker"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-description").val()+'</p></td><td class="quantity-marker"><p class="form-control-static part-quantity">'+$("#new-prefcard-modal .opportunity-part-quantity").val()+'</p></td><td class="unitprice-marker"><p class="form-control-static part-unitprice">'+"$" +price.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,')+'</p></td><td class="totalprice-marker" id="total" data-total="'+$("#new-prefcard-modal .opportunity-part-total-price").attr("data-total-price")+'"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-total-price").text()+'</p></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary pt-edit-btn" onclick="editPart(\''+row_id+'\')">Edit</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                     
                     document.getElementById("select-startYear").selectedIndex = 0;
                     document.getElementById("select-EndYear").selectedIndex = 0;
                     document.getElementById("select-DegreeType").selectedIndex = 0;
                     $("#surgeon-bio-modal #fieldOfStudy").val("");
                     $("#surgeon-bio-modal .institution-typeahead").val("");
                     $("#surgeon-bio-modal .institution-typeahead").attr("data-record-id", "" );
                     $("#surgeon-bio-modal .institution-typeahead").attr("record-name", "" );                        
                     return true;
                 }  
                 
            }   //  end of addEducationDetail 
            
            //Release 4.4
            //Component ID:- CID-000342
            //Developer:- Mimansha Samal
            //Modified Date:- 10/13/2017
            //Purpose:- Edit Graduate/UG/Doctorate record to the table for Education in Surgeon Bio Modal
            function editEducationDetail(row_id){
                console.log('##--row_id for Education edit: ' + row_id);
                $.each($("#surgeon-bio-modal .surgeon-education tbody tr"), function(i, v) {
                     console.log('##--Inside tr loop Education part Row ' + $(v).attr("data-part-id"));
                    if ($(v).attr("data-part-id") == row_id) {
                        
                        // ------Check for Start Year and End Year blank values STARTS------------
                        var start_year = $("td.startyear-marker", v).text();
                        if(start_year != '')
                            $("#surgeon-bio-modal #select-startYear").val(start_year);
                        else
                            document.getElementById("select-startYear").selectedIndex = 0;
                            
                        var end_year = $("td.endyear-marker", v).text();
                        if(end_year != '')
                            $("#surgeon-bio-modal #select-EndYear").val(end_year);
                        else
                            document.getElementById("select-EndYear").selectedIndex = 0;
                        
                        // ------Check for Start Year and End Year blank values ENDS------------
                            
                        var degree_type = $("td.degreetype-marker", v).text();
                        $("#surgeon-bio-modal #select-DegreeType").val(degree_type);
                        
                        var field_of_study = $("td.fieldofstudy-marker", v).text();
                        $("#surgeon-bio-modal #fieldOfStudy").val(field_of_study);
                        
                        var institution = $("td.institution-marker", v).text();
                        var institution_id = $("td.institution-marker", v).attr("institution-id");
                        var institution_name = $("td.institution-marker", v).attr("institution-name");
                        $("#surgeon-bio-modal .institution-typeahead").val(institution_name);
                        $("#surgeon-bio-modal .institution-typeahead").attr("data-record-id", institution_id);
                        $("#surgeon-bio-modal .institution-typeahead").attr("record-name", institution_name);
                        $(this).remove(); 
                    }
                    
                });
                
                var rowcount = 1;
                $.each($("#surgeon-bio-modal .surgeon-education tbody tr"), function(i, v) {
                    $(v).attr("data-part-id",rowcount);
                    $("td.pull-right", v).remove();
                    $(this).append('<td class="pull-right"><button type="button" class="btn btn-xs btn-primary edu-edit-btn" onclick="editEducationDetail(\''+rowcount+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-edu-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                    rowcount++;
                });
            }
            
            //Release 4.4
            //Component ID:- CID-000342
            //Developer:- Mimansha Samal
            //Date:- 9/22/2017
            //Purpose:- Add Fellowship/Resident record to the table for Post Graduate in Surgeon Bio Modal
            function addPostGraduateDetail(){
                        
                 if($("#surgeon-bio-modal button.add-post-graduate-part").is(":disabled")){
                     return false;
                 }
                        
                 var eleFound=false;
                 var addFlag=false;
                 var startyearddlb = $("#surgeon-bio-modal #select-startPGYear").val();
                 var endyearddlb = $("#surgeon-bio-modal #select-EndPGYear").val();
                 var trainingtypeddlb = $("#surgeon-bio-modal #select-TrainingType").val();
                 var programtypeddlb = $("#surgeon-bio-modal #select-ProgramType").val();
                 var program_name = $("#surgeon-bio-modal .programname-typeahead").attr("record-name");
                 var program_id = $("#surgeon-bio-modal .programname-typeahead").attr("data-record-id");
                 
                 var syear = parseInt(startyearddlb);
                 var eyear = parseInt(endyearddlb);                 
                 
                 if(syear>=eyear)
                 {
                    addFlag=true;
                 } 
                 console.log('Program type Selected---'+ programtypeddlb);
                 if(programtypeddlb == '-Select-' || (programtypeddlb == '') || (startyearddlb == '-Select-')
                 || (endyearddlb == '-Select-') || (trainingtypeddlb == '-Select-'))
                 {
                     $("#surgeon-bio-modal .save-error").text("Missing required Post Graduate fields.");
                     return false;
                 }
                 
                 if(program_id == '' || program_id == 'undefined' || program_id == undefined || program_name == undefined){
                     $("#surgeon-bio-modal .save-error").text("Please select a valid program.");
                     return false;
                 }
                       
                 if(addFlag){                     
                      $("#surgeon-bio-modal .save-error").text("Start Year should not exceed End Year.");
                      return false;
                 }
                 
                 var rowcount = 1;
                 $.each($("#surgeon-bio-modal .surgeon-postgraduate tbody tr"), function(i, v) {
                    $(v).attr("data-part-id",rowcount);
                    $("td.pull-right", v).remove();
                    $(this).append('<td class="pull-right"><button type="button" class="btn btn-xs btn-primary pg-edit-btn" onclick="editPostGraduateDetail(\''+rowcount+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-pg-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                    rowcount++;
                 });
                 
                 $.each($("#surgeon-bio-modal .surgeon-postgraduate tbody tr"), function(i, v){
                     
                     var startyear = $("td.startyear-marker", v).text();
                     var endyear = $("td.endyear-marker", v).text();
                     var trainingtype = $("td.trainingtype-marker", v).text();
                     var programtype = $("td.programtype-marker", v).text();
                     var programname = $("td.program-marker", v).text();
                     
                     console.log('Values are: startyearddlb ' + startyearddlb + ' startyear '+startyear);
                     if((startyear == startyearddlb) && (endyear == endyearddlb) && (trainingtype == trainingtypeddlb) 
                     && (programtype == programtypeddlb) && (programname == program_name)){
                        console.log('Inside duplicate check of Post Graduate----------');
                         eleFound=true;
                     }
                 });                        
                 if(eleFound){                     
                      $("#surgeon-bio-modal .save-error").text("Post Graduate record already exists.");
                      document.getElementById("select-startPGYear").selectedIndex = 0;
                      document.getElementById("select-EndPGYear").selectedIndex = 0;
                      document.getElementById("select-TrainingType").selectedIndex = 0;
                      $("#surgeon-bio-modal #select-TrainingType").change();
                      $("#surgeon-bio-modal .programname-typeahead").attr("data-record-id" , "");
                      $("#surgeon-bio-modal .programname-typeahead").attr("record-name" , "");
                      return false;
                 } else {
                     $("#surgeon-bio-modal .save-error").text("");
                     
                     var row_id = $("#surgeon-bio-modal .surgeon-postgraduate tbody tr").length + 1;
                     
                     $("#surgeon-bio-modal .surgeon-postgraduate tbody").append('<tr data-part-id="'+row_id+'"><td class="startyear-marker"><p class="form-control-static start-year">'+ startyearddlb +'</p></td><td class="endyear-marker"><p class="form-control-static end-year">'+endyearddlb+'</p></td><td class="trainingtype-marker"><p class="form-control-static training-type">'+ trainingtypeddlb +'</p></td><td class="programtype-marker"><p class="form-control-static program-type">'+ programtypeddlb +'</p></td><td class="program-marker" program-id = "' + program_id +'" program-name = "' + program_name +'"><p class="form-control-static program-name">'+ program_name +'</p></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary pg-edit-btn" onclick="editPostGraduateDetail(\''+row_id+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-pg-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                     document.getElementById("select-startPGYear").selectedIndex = 0;
                     document.getElementById("select-EndPGYear").selectedIndex = 0;
                     document.getElementById("select-TrainingType").selectedIndex = 0;
                     $("#surgeon-bio-modal #select-TrainingType").change();                    
                     $("#surgeon-bio-modal .programname-typeahead").attr("data-record-id" , "");
                     $("#surgeon-bio-modal .programname-typeahead").attr("record-name" , "");   
                     return true;                  
                 }    
                 /*
                 document.getElementById("select-startPGYear").selectedIndex = 0;
                 document.getElementById("select-EndPGYear").selectedIndex = 0;
                 document.getElementById("select-TrainingType").selectedIndex = 0;
                 $("#surgeon-bio-modal #select-TrainingType").change();
                 $("#surgeon-bio-modal .programname-typeahead").attr("data-record-id" , "");
                 $("#surgeon-bio-modal .programname-typeahead").attr("record-name" , "");
                 */                             
            }   //  end of addPostGraduateDetail
            
            //Release 4.4
            //Component ID:- CID-000342
            //Developer:- Mimansha Samal
            //Date:- 9/22/2017
            //Purpose:- Edit Fellowship/Resident record to the table for Post Graduate in Surgeon Bio Modal
            function editPostGraduateDetail(row_id){   
                console.log('##--row_id for Post Graduate edit: ' + row_id);
                $.each($("#surgeon-bio-modal .surgeon-postgraduate tbody tr"), function(i, v) {
                     console.log('##--Inside tr loop Post graduate part Row ' + $(v).attr("data-part-id"));
                    if ($(v).attr("data-part-id") == row_id) {
                    
                        var start_year = $("td.startyear-marker", v).text();
                        $("#surgeon-bio-modal #select-startPGYear").val(start_year);
                        
                        var end_year = $("td.endyear-marker", v).text();
                        $("#surgeon-bio-modal #select-EndPGYear").val(end_year);
                        
                        var training_type = $("td.trainingtype-marker", v).text();
                        $("#surgeon-bio-modal #select-TrainingType").val(training_type).change();
                        
                        var program_type = $("td.programtype-marker", v).text();
                        $("#surgeon-bio-modal select.program-type").val(program_type).change(); 
                                                
                        var program = $("td.program-marker", v).text();
                        var program_name = $("td.program-marker", v).attr("program-name");
                        $("#surgeon-bio-modal .programname-typeahead").val(program_name);
                        var program_id = $("td.program-marker", v).attr("program-id");
                        $("#surgeon-bio-modal .programname-typeahead").attr("data-record-id", program_id );
                        $("#surgeon-bio-modal .programname-typeahead").attr("record-name", program_name );
                                                
                        $(this).remove();
                    }
                    
                });
                
                var rowcount = 1;
                $.each($("#surgeon-bio-modal .surgeon-postgraduate tbody tr"), function(i, v) {
                    $(v).attr("data-part-id",rowcount);
                    $("td.pull-right", v).remove();
                    $(this).append('<td class="pull-right"><button type="button" class="btn btn-xs btn-primary pg-edit-btn" onclick="editPostGraduateDetail(\''+rowcount+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-pg-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                    rowcount++;
                });
            }
            
            //Release 4.4
            //Component ID:- CID-000341
            //Developer:- Mimansha Samal
            //Date:- 11/06/2017
            //Purpose:- Load Program Name typeahead once Program Type is selected for Post Graduation in Surgeon Bio Modal
            function programTypeSelected(val) {
                
                console.log('##--programTypeSelected.val: '+ val);
                if (!val) {                    
                    $("#surgeon-bio-modal input.programname-typeahead").val('');
                    $("#surgeon-bio-modal .programname-typeahead").attr("data-record-id" , "");
                    $("#surgeon-bio-modal .programname-typeahead").attr("record-name" , "");
                    
                    $("#surgeon-bio-modal input.surgeon-program-name").attr("program-type", '');                    
                    $("#surgeon-bio-modal input.surgeon-program-name").attr("disabled", true);
                    return false;
                }
                $("#surgeon-bio-modal input.programname-typeahead").val('');
                $("#surgeon-bio-modal .programname-typeahead").attr("data-record-id" , "");
                $("#surgeon-bio-modal .programname-typeahead").attr("record-name" , "");
                    
                if(val.includes('Select')){
                                    
                    //document.getElementById("select-ProgramType").selectedIndex = 0;                                    
                    //$("#surgeon-bio-modal select.program-type").attr("disabled", true);
                    
                    $("#surgeon-bio-modal input.surgeon-program-name").attr("program-type", '');                    
                    $("#surgeon-bio-modal input.surgeon-program-name").attr("disabled", true);
                    
                    return false;
                } 
                else
                {                                                        
                    var programtype = $("#surgeon-bio-modal #select-ProgramType").val();
                    $("#surgeon-bio-modal input.surgeon-program-name").attr("program-type", programtype);
                    $("#surgeon-bio-modal input.surgeon-program-name").removeAttr('disabled');
                    //$("#surgeon-bio-modal select.program-type").removeAttr('disabled');
                }
            }
            
            // -----------------------Release 4.4 Changes ENDS for Mimansha----------------------------------------
            
            $(document).ready(function() {
                $('#disposablesSummernote, #suturesSummernote, #medicationsSummernote, #equipmentSummernote, #equipment-notesSummernote, #publicationsSummernote').summernote( {
                  height: 150,                 // set editor height
                  minHeight: null,             // set minimum height of editor
                  maxHeight: null,             // set maximum height of editor
                  //focus: true                  // set focus to editable area after initializing summernote
                });
                
                $("h2.title-icon-container i").removeClass().addClass("fa fa-user-md");
                populateOpportunityDetailsView(suregeonId);
                displayPractitionerDetail(suregeonId);
                
                //Release 4.4
                //Component ID:- CID-000342
                //Developer:- Mimansha Samal
                //Modified Date:- 11/6/2017
                //Purpose:- Initialize the Program Name typeahead in Surgeon Bio Modal
                $("#surgeon-bio-modal  input.programname-typeahead").typeahead({
                    // typeahead setup for case products
                       minLength: 3,
                       items: 50,
                       source: function(query, onSuccess) {
                          var trainingtype = $("#surgeon-bio-modal input.surgeon-program-name").attr("training-type");
                          // Capture Program Type selected and pass it to the query
                          var programtype = $("#surgeon-bio-modal input.surgeon-program-name").attr("program-type");
                          query = trainingtype + "::" + query + "::" + programtype;
    
                          search(query, '{!$RemoteAction.CS_ARContactsCC.searchPrograms}', onSuccess);                                    
                       },
                       displayText: function(item) {
                          return globalDecodeEntities(item.Name);
                       },
                       afterSelect: function(item) {
                          
                          $("#surgeon-bio-modal input.programname-typeahead").val(item.Name);
                          $("#surgeon-bio-modal input.programname-typeahead").attr("data-record-id", item.Id );
                          $("#surgeon-bio-modal input.programname-typeahead").attr("record-name", item.Name );
                       }
                }); 
                                
                $("#marketingTab").on("click", function(e){

                    if($("#PardotActivityDisplay div.detail_div").children().length != 0){
                      
                        $("#PardotActivityDisplay div.detail_div").empty();
                    }
            
                      //email = 'mremley@STEELHEADSURGICAL.COM';
                      var pardotEmail = $("#surgeonDetailView div.surgeonEmail").text();
                       
                      console.log('##--surgeonEmail: '+ pardotEmail);
                      
                      loadPardotActivity(pardotEmail, 'Any Type', 0);
            
                  });
                  
                  // load in the user type list
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveUserTypeValues}",     
                    function(result, event) {
                    
                      for ( var i=0; i < result.length; i++) {                     
                        if ( result[i].startsWith("Surgeon") ) {
                          var txt = globalDecodeEntities(result[i]);
                          $("#edit-surgeon-modal select.user-type").append("<option value='"+txt+"'>"+txt.split(" - ")[1]+"</option>");
                        }
                      }
                  });
                  
                  // load in the practice focus list
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePracticeFocusValues}",
                    function(result, event) { 
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#edit-surgeon-modal select.practice-focus").append("<option value='"+txt+"'>"+txt+"</option>");
                      }          
                  });
                  
                   // load in the areas of interest list
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveAreaOfInterestValues}",
                    function(result, event) { 
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#edit-surgeon-modal select.specialty").append("<option value='"+txt+"'>"+txt+"</option>");
                      }          
                  });
                                  
                  // load in the designation list
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveDesignationValues}",
                    function(result, event) { 
                      
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#edit-surgeon-modal select.designation").append("<option value='"+txt+"'>"+txt+"</option>");
                      }          
                  });
                  
                  // load in the salutation list
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveSalutationValues}",
                    function(result, event) { 
                        
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#edit-surgeon-modal select.salutation").append("<option value='"+txt+"'>"+txt+"</option>");
                      }          
                  });
                  
                  
                  
                  // load in the gender list
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveGenderValues}",
                    function(result, event) { 
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#edit-surgeon-modal select.gender").append("<option value='"+txt+"'>"+txt+"</option>");
                      }      
                  });
                  
                  /*Author:Ansu Routray
                      Release:4.3
                      Date Modified 30/08/2017
                      Component Id:CID-000463
                      Purpose:picklist for orthoilustrtated details for surgeon
                    */
                  
                   // load in the specialties list
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveOrthoSpecialtiesValues}",
                    function(result, event) { 
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#ortho-add-modal select.specialties").append("<option value='"+txt+"'>"+txt+"</option>");
                      }          
                  });
                  
                   // load in the course type list
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveOrthoCourseTypeValues}",
                    function(result, event) { 
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#ortho-add-modal select.course-type").append("<option value='"+txt+"'>"+txt+"</option>");
                      }          
                  });
                  
                   // load in the program type list
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveOrthoProgramTypeValues}",
                    function(result, event) { 
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#ortho-add-modal select.program-type").append("<option value='"+txt+"'>"+txt+"</option>");
                      }          
                  });
                  
                   /*// load in the email list
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveOrthoEmailValues}",
                    suregeonId,
                    function(result, event) {                    
                      console.log('email values---'+JSON.stringify(result)); 
                      for ( var i=result.length-1; i >=0 ; i--) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#ortho-add-modal select.email").append("<option value='"+txt+"'>"+txt+"</option>");
                      }          
                  });*/
                  
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveOrthoSuffixValues}",
                    suregeonId,
                    function(result, event) {                    
                      console.log('suffixvalues---'+JSON.stringify(result)); 
                      for ( var i=0; i <result.length ; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#ortho-add-modal select.OI-Suffix").append("<option value='"+txt+"'>"+txt+"</option>");
                      }          
                  });
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveOrthoPrefixValues}",
                    suregeonId,
                    function(result, event) {                    
                      console.log('prefix values---'+JSON.stringify(result)); 
                      for ( var i=0; i <result.length ; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#ortho-add-modal select.OI-Prefix").append("<option value='"+txt+"'>"+txt+"</option>");
                      }          
                  });
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveOrthoStateValues}",
                    suregeonId,
                    function(result, event) {                    
                      console.log('staevalues---'+JSON.stringify(result)); 
                      for ( var i=0; i <result.length ; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#ortho-add-modal select.state").append("<option value='"+txt+"'>"+txt+"</option>");
                      }          
                  });
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveOrthoCountryValues}",
                    suregeonId,
                    function(result, event) {                    
                      console.log('country values---'+JSON.stringify(result)); 
                      for ( var i=0; i <result.length ; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#ortho-add-modal select.country").append("<option value='"+txt+"'>"+txt+"</option>");
                      }          
                  });
                  
                  //Addition by Ansu for oi Picklist ends
                  
                  // -------------------------------Mimansha Changes STARTS for Release 4.4 ----------------------------------
                  //Release 4.4
                  //Component ID:- CID-000342
                  //Developer:- Mimansha Samal
                  //Date:- 9/21/2017
                  //Purpose:- Load the Education Type picklist in Surgeon Bio Modal
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveEducationTypeValues}",
                    function(result, event) { 
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        if(txt =='Resident' || txt == 'Fellowship' )
                            $("#surgeon-bio-modal select.training-type").append("<option value='"+txt+"'>"+txt+"</option>");
                        else
                            $("#surgeon-bio-modal select.education-type").append("<option value='"+txt+"'>"+txt+"</option>");
                      }      
                  });
                  
                  //Release 4.4
                  //Component ID:- CID-000342
                  //Developer:- Mimansha Samal
                  //Date:- 9/21/2017
                  //Purpose:- Load the Program Type picklist in Surgeon Bio Modal
                  window.programTypeValues = [];
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveProgramTypeValues}",
                    function(result, event) { 
                        for ( var i=0; i < result.length; i++) {
                            var txt = globalDecodeEntities(result[i]);
                            programTypeValues.push(txt); 
                        }
                        console.log('##--programTypeValues: '+ programTypeValues);
                  });
                  
                  // -------------------------------Mimansha Changes ENDS for Release 4.4 ----------------------------------
                  var acceptEmail = 'Accept Email';
                  $("#edit-surgeon-modal select.arthrexMarkEmail").append("<option value='"+false+"'>"+acceptEmail +"</option>");
                 
                  var dnAcceptEmail = 'Does Not Accept Email';
                  $("#edit-surgeon-modal select.arthrexMarkEmail").append("<option value='"+true+"'>"+dnAcceptEmail+"</option>");
                  
                  
                      
                  // <!-- Toggle Open Opportunities - added by swetha penmethsa 03/11/2017 -- START -->
               
                    //  <!-- Toggle Open Opportunities - added by swetha penmethsa 03/11/2017 -- END -->
               

                    // added by chad for 4.1
                    // setup a delegated click handler for this activity
                    // refactor the call of linkactivity from inline click handler to jquery delegated event so
                    // we can avoid the complex string escape on the notes field and just pass the opp directly
                    $("#tab-accountActivity").on("click", ".activity-link", function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        var thisRecordId = $(this).parent().prop("id");
                        linkActivity(window.surgActivities[thisRecordId]);                    

                    });                    

                          // saving a task
                          $("#task-modal button.save").on("click", function(e) {
                              e.stopPropagation();
                              e.preventDefault();

                              var taskId = $("#task-modal").attr("data-record-id");

                              // always use hte free-form text box - chad 2017-06-22
                              // var subjectStr = $("#task-modal select.subject").val();
                              var subjectStr = 'other';

                              if ( subjectStr == 'other' ) { 
                                  subjectStr = $("#task-modal input.other-subject").val();
                              }

                              var task = {
                                  id: taskId,
                                  priority: $("#task-modal button.priority.btn-primary").attr("data-value"),
                                  status: $("#task-modal button.status.btn-primary").attr("data-value"),
                                  dueDate: $("#task-modal input.dueDate").val(),
                                  subject: subjectStr,
                                  description: $("#task-modal textarea.description").val(),
                                  ownerId: $("#task-modal select.task-owner").val()                            
                              };

                              var whatIds = [];
                              var whatId = $("#task-modal input.associated-object").attr("data-record-id");
                              if ( typeof whatId != "undefined" && whatId.length > 0 ) {
                                  whatIds.push(whatId);
                              }

                              var whoIds = [];
                              $("#task-modal div.ctag-list.surgeon").children().each(function() {
                                  if ( $(this).attr("data-record-id") ) {
                                      whoIds.push($(this).attr("data-record-id"));
                                  }
                                  
                              });

                              $(this).attr("disabled", true);
                              $("#task-modal .save-busy").show();
                              Visualforce.remoting.Manager.invokeAction("CS_ARContactsCC.saveSFTask",whatIds, whoIds, task,
                              function(result, event) {
                                  $("#task-modal .save-busy").hide();
                                  if ( event.status ) {
                                      
                                      $("div.detail_div[data-record-id="+taskId+"]").find("span.notes").text(result.subject);                                                               

                                      $("#task-modal").modal("hide");
                                      $("span.task-modal-error").text("");

                                      
                                  } else {

                                      $("#task-modal span.task-modal-error").text(event.message);

                                  }
                                  $("#task-modal button.save").removeAttr("disabled");
                                  
                              });                   
                              
                          });

                          // deleting a task just set's its status to completed
                          $("#task-modal button.delete").on("click", function(e) {
                              e.stopPropagation();
                              e.preventDefault();
                              $(this).attr("disabled", true);

                              var taskId = $("#task-modal").attr("data-record-id");

                              $("#task-modal .delete-busy").show();
                              Visualforce.remoting.Manager.invokeAction("CS_ARContactsCC.updateTaskStatus", taskId, "Cancelled",
                              function(result, event) {
                                  $("#task-modal .delete-busy").hide();
                                  if ( event.status ) {

                                      $("div.detail_div[data-record-id="+taskId+"]").remove();
                                      
                                      $("#task-modal").modal("hide");
                                      $("span.task-modal-error").text("");

                                      
                                  } else {

                                      $("#task-modal span.task-modal-error").text(event.message);

                                  }

                                  $("#task-modal button.delete").removeAttr("disabled");
                                  
                              });
                          });


                    // end added by chad

              // <!--- View Pardot Email/ VISIT Detail -- START -->
               
               //View Pardot Visit Detail
              $(document).on("click", "#PardotActivityDisplay a.pardot-visit-detail", function(e){
                //Clean pre-existing contents:
                $("#pardot-visit-modal").modal("hide");
                $("#pardot-visit-pageviews").text("");
                $("#pardot-visit-duration").text("");
                $("#pardot-visit-createdat").text("");
            




            var pardotVisitId = $(this).closest('.detail_div').attr("visit-id");
            console.log('Pardot Visit Id: ' + pardotVisitId);

            //Load visit details
            Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitionerPardotVisit}",
              pardotVisitId, function(result, event){

                  if(event.status && result != null){

                    //iterate each visit and construct the UI
                    if(result.visit.visitor_page_views.visitor_page_view != null){

                                //Clear all previous views
                                $("#PardotVisitPageViews").empty();
                                
                                $.each(result.visit.visitor_page_views.visitor_page_view, function(i, v){                      
                                var htmPageView = '<div class="col-sm-12 form-group detail_div" '+ 'page-view-id="' + v.id + '" style="display: inline;">' +
                                                        '     <div class="col-sm-8"> '+ 
                                                        '         '+v.url+' <br/> '+
                                                        '     '+v.title +  
                                                        '     </div> '+
                                                        //'     <div class="col-sm-3"> '+ 
                                                        //'         '+ moment(v.created_at).format("YYYY-MM-DD") +
                                                        //'     </div> '+
                                                        ' </div>';
                                $("#PardotVisitPageViews").append(htmPageView);  
                                console.log('New visit page views: ' + v.title + ' url: ' + v.url);
                                
                                });

                    }

                    //Display add. info
                    $("#pardot-visit-pageviews").text(globalDecodeEntities(result.visit.visitor_page_view_count));
                      
                    var min = Math.floor(result.visit.duration_in_seconds / 60);
                    if(min > 1)
                      $("#pardot-visit-duration").text(globalDecodeEntities(min) + ' Minutes');
                    else
                      $("#pardot-visit-duration").text('Less than 1 Minute');
                      
                    $("#pardot-visit-createdat").text(globalDecodeEntities(moment(result.created_at).format("YYYY-MM-DD")));

                  }// end of event.status && result !=null

              });//end of remote call 

            $("#pardot-visit-modal").modal("show");

          });
          
          
          $(document).on("click", "button.load-more", function(e){

              //retrieve more results from pardot
              var pardotEmail = $("#surgeon-detail p.email").text();
              console.log('##--surgeonEmail: '+ pardotEmail);

              loadPardotActivity(pardotEmail, 'Any Type', 1);

          });
          
         //View Pardot Email Detail
         $(document).on("click", "#PardotActivityDisplay a.pardot-email-detail", function(e) {
               $("#pardot-email-modal").modal("hide");
              var pardotEmailId = $(this).closest('.detail_div').attr("email-id");
              console.log('Pardot Email Id: ' + pardotEmailId);

              //Load email activity
              Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitionerPardotEmail}",
                        pardotEmailId, function(result, event) {

                          if(event.status & result!=null){
                          //populate email info
                            $("#pardot-email-name").text(globalDecodeEntities(result.email.name));
                            $("#pardot-email-subject").text(globalDecodeEntities(result.email.subject));
                            $("#pardot-email-message").text(globalDecodeEntities(result.email.message.text));
                            $("#pardot-email-date").text(moment(result.created_at).format("YYYY-MM-DD HH:mm:ss"));

                          }
                          else{
                            //Display error when retrieving email details

                          }

                        });

              $("#pardot-email-modal").modal("show");
              
          });
          
               // <!--- View Pardot Email/ VISIT Detail -- END -->     
              $("#edit-surgeon-modal button.surgeon-type-cancel-btn").on("click", function() {
            
                $("#cancel-edit-surgeon-modal").modal("show");          
              });
              
              
              // saving surgeon edits
            $("#edit-surgeon-modal button.edit-surgeon-save-btn ").on("click", function() {
                    
                  // parse birthdate to long
                  var birthDateStr = $("#edit-surgeon-modal input.birthdate").val();
                  var birthDate = null;
                  
                  // no, I didn't write this regex :) - Chad 
                  // see http://stackoverflow.com/questions/5465375/javascript-date-regex-dd-mm-yyyy
                  var validDateFormat = /^(((0[1-9]|[12]\d|3[01])\/(0[13578]|1[02])\/((19|[2-9]\d)\d{2}))|((0[1-9]|[12]\d|30)\/(0[13456789]|1[012])\/((19|[2-9]\d)\d{2}))|((0[1-9]|1\d|2[0-8])\/02\/((19|[2-9]\d)\d{2}))|(29\/02\/((1[6-9]|[2-9]\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$/g;
    
                  if ( birthDateStr.match(validDateFormat) ) {
                    birthDate = ""+moment(birthDateStr,"MM/DD/YYYY");
                  }
    
                  var surgeon = {
                    id: $("#edit-surgeon-modal").attr("data-record-id"),
                    npi: $("#edit-surgeon-modal input.npi").val(),
                    birthDate: birthDate,
                    firstName: $("#edit-surgeon-modal input.firstName").val(),
                    lastName: $("#edit-surgeon-modal input.lastName").val(),
                    email: $("#edit-surgeon-modal input.email").val(),
                    //hasOptedOutOfEmail: $("#edit-surgeon-modal input.email-opt-out").is(":checked"),
                    assignedSalesRepEmail: $("#edit-surgeon-modal input.assigned-sales-rep-email").val(),
                    practiceName: $("#edit-surgeon-modal input.practice").val(),
                    lang: $("#edit-surgeon-modal input.lang").val(),
                    title: $("#edit-surgeon-modal input.title").val(),
                    salutation: $("#edit-surgeon-modal select.salutation").val(),
                    gender: $("#edit-surgeon-modal select.gender").val(),
                    userType: $("#edit-surgeon-modal select.user-type").val(),
                    arthrexMarkEmail: $("#edit-surgeon-modal select.arthrexMarkEmail").val(),
                    mState: $("#edit-surgeon-modal select.mState").val(),
                    practiceFocus: getMultiSelectValues($("#edit-surgeon-modal select.practice-focus")),
                    designation: getMultiSelectValues($("#edit-surgeon-modal select.designation")),
                    specialty: getMultiSelectValues($("#edit-surgeon-modal select.specialty")),                                  
                    phone: $("#edit-surgeon-modal input.phone").val(),
                    mobilePhone: $("#edit-surgeon-modal input.mobilePhone").val(),
                    mStreet: $("#edit-surgeon-modal input.mStreet").val(),
                    mCity: $("#edit-surgeon-modal input.mCity").val(),
                    mZip: $("#edit-surgeon-modal input.mZip").val(),
                    consultant: $("#edit-surgeon-modal input.consultant").is(":checked"),
                    surgeryDays: $("#edit-surgeon-modal input.surgeryDays").val(),
                    clinicDays: $("#edit-surgeon-modal input.clinicDays").val(),
                            /**
    * @Last modified by : Swetha Penmethsa TCS, Last Modified:  Aug/15/2017
    * @release: 4.3
    * @component: CID-000447
    * @description: Minor Edits on Surgeon Page 
    */

                    preferredName: $("#edit-surgeon-modal input.preferredName").val(),
                    preferredWebsite: $("#edit-surgeon-modal input.preferredWebsite").val()
                  };
                  var valid = true;
                 
                 //swetha penmethsa----release 3.2---edit suregeon Detail --select option
                  if(surgeon.gender == '- Select -'){
                      surgeon.gender = '';
                  }
                  if(surgeon.practiceFocus == '- Select -'){
                      surgeon.practiceFocus = '';
                  }
                  if(surgeon.specialty == '- Select -'){
                      surgeon.specialty = '';
                  }
                  if(surgeon.userType == '- Select -'){
                      surgeon.userType = '';
                  }
                   //swetha penmethsa----release 3.2---edit suregeon Detail --select option
                   
                  valid = valid && typeof surgeon.firstName != "undefined" && surgeon.firstName.length > 0;
                  valid = valid && typeof surgeon.lastName != "undefined" && surgeon.lastName.length > 0;
                  //valid = valid && typeof surgeon.userType!= "undefined" && surgeon.userType != null && surgeon.userType != '0';
                  
                  //valid = valid && typeof surgeon.mobilePhone!= "undefined" && surgeon.mobilePhone.length > 0;
                  //valid = valid && typeof surgeon.email!= "undefined" && surgeon.email.length > 0;
                  //valid = valid && typeof surgeon.practiceFocus!= "undefined" && surgeon.practiceFocus.length > 0;
                  //valid = valid && typeof surgeon.specialty!= "undefined" && surgeon.specialty.length > 0;
                  //valid = valid && typeof surgeon.designation!= "undefined" && surgeon.designation.length > 0;
                  //valid = valid && typeof surgeon.mStreet != "undefined" && surgeon.mStreet.length > 0;                  
                  //valid = valid && typeof surgeon.mCity != "undefined" && surgeon.mCity.length > 0; 
                  //valid = valid && typeof surgeon.mState!= "undefined" && surgeon.mState.length > 0; 
                  //valid = valid && typeof surgeon.mZip!= "undefined" && surgeon.mZip.length > 0; 

                  $("#edit-surgeon-modal .save-error").text("");
                  if ( !valid ) {
                      //$("#edit-surgeon-modal .save-error").text("Missing required fields");
                      //return false;
                  }
                  $("#edit-surgeon-modal button").attr("disabled",true);
                  var btnText = $("#edit-surgeon-modal button.edit-surgeon-save-btn").text();
                  $("#edit-surgeon-modal button.edit-surgeon-save-btn").text("Saving...");
                  
                  Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.updatePractitionerDemographics}",
                  surgeon,
                  function(result, event) {
         
                        $("#edit-surgeon-modal button.edit-surgeon-save-btn").text(btnText);
                        $("#edit-surgeon-modal button").removeAttr("disabled");
                        displayPractitionerDetail(surgeon.id);
                        $("#edit-surgeon-modal").modal('hide');
    
                    });
                    
                    
                    //$.fn.editable.defaults.mode = 'inline';
                    
                    loadAccountActivities('All Activities');
                });
                
                // Given a select.multi-select retrieve the ctag record ids in a semicolon
                  // delimitted string
                  var getMultiSelectValues = function getMultiSelectValues(el) {
                      var ctags = "";
                      $(el).next("div.ctag-list").children().each(function() {
                          var val = $(this).attr("data-record-id");
                          ctags += val+";";
                      });          
                      return ctags.substring(0, (ctags.length-1)); // trims off the trailing semicolon
                  };
                   
              $("#cancel-edit-surgeon-modal button.btn-cancel-surgeon-card").on("click", function(e) {                     
                    $("#cancel-edit-surgeon-modal").modal('hide');
                    $("#edit-surgeon-modal").modal('hide');
                }); //  end of opp type modal.cancel click
              
                // opens the edit surgeon modal and sets the account id
              $("#tab-surgeonDetail button.edit-surgeon-btn").on("click", function() {
                var practitionerId = $(this).attr("data-record-id");

                $("#surgeon-detail i.edit-busy").show();  
                Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitioner}",
                  suregeonId, function(result, event) {
                        
                        var assignedSalesRepEmail = result.Assigned_Sales_Rep_Email__pc || "None";                
                        var awards = globalDecodeEntities(result.Awards__c) || "None";      
                        var certifications = globalDecodeEntities(result.Certifications__c) || "None";      
                        var competitions = globalDecodeEntities(result.Competitions__c) || "None";      
                        var competitors = globalDecodeEntities(result.Competitors__c) || "None";      
                        var education = result.Education__c ? $("<div/>").html(result.Education__c).text() : "None"; 
                        var fellowships = globalDecodeEntities(result.Fellowships__c) || "None";      
                        var firstName = globalDecodeEntities(result.FirstName);      
                        var focusOfMyPractice = result.Focus_of_my_practice__pc ? $("<div/>").html(result.Focus_of_my_practice__pc).text() : ""; 
                                
                        var designation = result.Designation__pc ? $("<div/>").html(result.Designation__pc).text() : "";  
                        var specialty = result.Arthrex_com_Surgeon_Specialty__pc ? $("<div/>").html(result.Arthrex_com_Surgeon_Specialty__pc).text() : "";  
                        var gender = result.Gender__c;      
                        var id = result.Id
                        var internship = globalDecodeEntities(result.Internship__c) || "";      
                        var lastName = globalDecodeEntities(result.LastName);      
                        var npi = result.NPI__pc;      
                        var lang = globalDecodeEntities(result.Native_Language__c);      
                        var organization = globalDecodeEntities(result.Organization__c) || "None";      
                        var birthdate = result.PersonBirthdate ? moment(result.PersonBirthdate).format("MM/DD/YYYY") : "None";      
                        var email = result.PersonEmail;
                        
                        var hasOptedOutOfEmail = result.PersonHasOptedOutOfEmail;
                        var city = globalDecodeEntities(result.PersonMailingCity);      
                        var countryCode = result.PersonMailingCountryCode;      
                        var zip = result.PersonMailingPostalCode;      
                        var state = globalDecodeEntities(result.PersonMailingState);      
                        var street = globalDecodeEntities(result.PersonMailingStreet);      
                        var city = globalDecodeEntities(result.PersonMailingCity);      
                        var phone = result.Phone;      
                        var mobilePhone = result.PersonMobilePhone;
                        var countryCode = result.PersonOtherCountryCode || "None";      
                        var title = globalDecodeEntities(result.PersonTitle);      
                        var personalInterest = globalDecodeEntities(result.Personal_Intrest__c);      
                        var practiceName = globalDecodeEntities(result.Practice_Name__c);      
                        var proSocieties = globalDecodeEntities(result.Professional_Societies__c) || "None";      
                        var profilePic = result.Profile_Picture__c || "None";      
                        var residencies = globalDecodeEntities(result.Residencies__c) || "None";  
                        var Undergraduate = globalDecodeEntities(result.Undergraduate_Institution__pc) || "None";
                        var Graduate = globalDecodeEntities(result.Graduate_Institution__pc) || "None";
                        var Doctorate = globalDecodeEntities(result.Doctorate_Institution__pc) || "None";    
                        var salutation = globalDecodeEntities(result.Salutation);      
                        var sportInterests = globalDecodeEntities(result.Sport_Interests__c) || "None";  
                        var userType = globalDecodeEntities(result.User_Type__pc);
                        var preferredNameVar = globalDecodeEntities(result.Preferred_Name__c);
                        
                        /**
                        * @author Original: Swetha Penmethsa TCS, Last Modified:  Aug/15/2017
                        * @release: 4.3
                        * @component: CID-000447
                        * @description: Minor Edits on Surgeon Page 
                        */
                        var preferredWebsiteVar = globalDecodeEntities(result.Website);                        
                        
                        var consultantStatus = globalDecodeEntities(result.Consultant__c);
                        var surgeryDays = globalDecodeEntities(result.Surgery_Days__pc); 
                        var clinicDays = globalDecodeEntities(result.Clinic_Days__pc); 
                        
                        // init all fields
                        if( $("#edit-surgeon-modal input.email-opt-out").val() === "on" ) {
                          $("#edit-surgeon-modal input.email-opt-out").prop("checked", false);
                        }
                        $("#edit-surgeon-modal select").val("0");                
                        $("#edit-surgeon-modal div.ctag-list").empty();                

                        $("#edit-surgeon-modal input.consultant").attr('checked', consultantStatus);
                        
                        $("#edit-surgeon-modal").attr("data-record-id",id);
                        $("#edit-surgeon-modal input.npi").val(npi);
                        $("#edit-surgeon-modal input.birthdate").val(birthdate);
                        $("#edit-surgeon-modal input.firstName").val(firstName);
                        $("#edit-surgeon-modal input.lastName").val(lastName);
                        if(salutation == '--None--'){
                            salutation = '';
                        }
                        if(firstName == undefined){
                            firstName = '';
                        }
                                               
                        var name = '';
                        var fName = '';
                        var middleNameVar = '';
                        var lName = '';
                        var sName = '';
                        
                        if(firstName != undefined){
                          fName = firstName;
                        }
                        if(result.MiddleName != undefined){
                          middleNameVar = result.MiddleName;
                        }
                        if(result.Suffix != undefined){
                          sName = result.Suffix;
                        }
                        if(lastName != undefined){
                          lName = lastName;
                        }    
                        name = globalDecodeEntities(fName)+" "+globalDecodeEntities(middleNameVar)+" "+globalDecodeEntities(lName)+" "+globalDecodeEntities(sName);
                        if ( salutation  && salutation != '--None--') {
                          name = globalDecodeEntities(result.Salutation)+" "+name;
                        }
                        
                        
                        $("#edit-surgeon-modal input.fullname").val(name);
                        
                        
                        $("#edit-surgeon-modal input.preferredName").val(preferredNameVar);
                        /**
                        * @author Original: Swetha Penmethsa TCS, Last Modified:  Aug/15/2017
                        * @release: 4.3
                        * @component: CID-000447
                        * @description: Minor Edits on Surgeon Page 
                        */                        
                        $("#edit-surgeon-modal input.preferredWebsite").val(preferredWebsiteVar);
                        
                        $("#edit-surgeon-modal input.email").val(email);
                        
                        if ( hasOptedOutOfEmail ) {
                          $("#edit-surgeon-modal input.email-opt-out").click();
                        }
                        
                        $("#edit-surgeon-modal input.assigned-sales-rep-email").val( assignedSalesRepEmail );
                        $("#edit-surgeon-modal input.practice").val( practiceName );
                        $("#edit-surgeon-modal input.lang").val(lang);
                        $("#edit-surgeon-modal input.title").val(title);
                        $("#edit-surgeon-modal input.surgeryDays").val(surgeryDays);
                        $("#edit-surgeon-modal input.clinicDays").val(clinicDays);
                        
                        $("#edit-surgeon-modal input.assignedTo").val(assignedTo);

                        if(gender != undefined && gender != ''){
                            setSelectedValueByLabel($("#edit-surgeon-modal select.gender"),gender);
                        }else{
                            setSelectedValueByLabel($("#edit-surgeon-modal select.gender"), '- Select -');
                        }
                        // added by Swetha Penmethsa - 04/16/2017 -- START
                        if(userType != undefined && userType != ''){
                            setSelectedValueByLabel($("#edit-surgeon-modal select.user-type"), userType);
                        }else{
                            setSelectedValueByLabel($("#edit-surgeon-modal select.user-type"), '- Select -'); 
                        }
                        if(designation != undefined && designation != ''){
                            setSelectedValueByLabel($("#edit-surgeon-modal select.designation"), designation.split(";") );
                        }else{                            
                            setSelectedValueByLabel($("#edit-surgeon-modal select.designation"), '- Select -');
                        }                        
                        if(focusOfMyPractice != undefined && focusOfMyPractice != ''){
                            setSelectedValueByLabel($("#edit-surgeon-modal select.practice-focus"), focusOfMyPractice.split(";") );
                        }else{
                            setSelectedValueByLabel($("#edit-surgeon-modal select.practice-focus"), '- Select -');
                        }
                        if(specialty != undefined && specialty != ''){
                            setSelectedValueByLabel($("#edit-surgeon-modal select.specialty"), specialty.split(";") );
                        }else{
                            setSelectedValueByLabel($("#edit-surgeon-modal select.specialty"), '- Select -');
                        }
                        // added by Swetha Penmethsa - 04/16/2017 -- END
                        
                        setSelectedValueByLabel($("#edit-surgeon-modal select.salutation"), salutation );
                        
                        setSelectedValueByLabel($("#edit-surgeon-modal select.mState"), state  );
                        
                        $("#edit-surgeon-modal input.phone").val( phone );
                        $("#edit-surgeon-modal input.mobilePhone").val( mobilePhone );
                        $("#edit-surgeon-modal input.mStreet").val( street );
                        $("#edit-surgeon-modal input.mCity").val(city);
                        $("#edit-surgeon-modal input.mZip").val(zip);         
            
                        $("#edit-surgeon-modal").modal("show");
                        
                        $("#surgeon-detail i.edit-busy").hide();
                    });
                                
                  });
                  
                  
                  // cool tab based multi-select support for picklists
                  $("select.multi-select").on("change", function(e) {
                     
                      var val = $(this).val();
                      var isDup = ( $(this).next("div.ctag-list").find("span.ctag[data-record-id='"+val+"']").length > 0 );
                      //swetha penmethsa---release 3.2--- for dropdown select on edit srgeon detail 
                     if ( val != "- Select -" && val != "0" && !isDup ) {
                       //swetha penmethsa---release 3.2--- for dropdown select on edit srgeon detail 
                         var label = $(this).find("option[value='"+val+"']").text();
                         var tag = '<span class="ctag alert alert-info" data-record-id="'+val+'">';
                         tag += label+'&nbsp;<span data-role="remove-tag"></span></span>';
                         $(this).next("div.ctag-list").append(tag);
                      }  
                      // reset back to "- SElect -"
                      $(this).val("0");
                      
                  });  
                  
                  $(".ctag-list").on("click","[data-role=remove-tag]", function() {
                      // removes tags from the tag-list
                      $(this).parent().remove();
                      
                      syncSelectionAfterDelete('#new-prefcard-modal');
                  });
                   
                  
                  // <!--  Related Contacts Tab START -->
                  // delete new contact for a provider
                  $("#provider-contact-modal button.btn-delete").on("click", function(e) {
                      e.preventDefault();
                      e.stopPropagation();
                      $("#delete-contact-modal").modal("show");            
                  });
                      
                  // delete new contact for a provider
                  $("#delete-contact-modal button.btn-delete-contact").on("click", function(e) {
                    e.preventDefault();
                    e.stopPropagation();
        
                    var contactId = $("#provider-contact-modal").attr("data-record-id");
                    var accountId = $("#provider-contact-modal").attr("data-account-id");
                      
                    var btnTxt = $("#provider-contact-modal button.btn-delete").text();
                    $("#provider-contact-modal button.btn-delete").text("Deleting...");
                    $("#provider-contact-modal button").attr("disabled",true);
                    $("#delete-contact-modal button").attr("disabled",true);
                    Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.deleteRelatedContact}", 
                      contactId, function(result, event) {
        
        
                          $("#provider-contact-modal button.btn-delete").text(btnTxt);
                          $("#provider-contact-modal button").removeAttr("disabled");
                          $("#delete-contact-modal button").removeAttr("disabled");
                          
                          $("#provider-contact-modal input").val("");
                          $("#provider-contact-modal textarea").val("");
                          $("#provider-contact-modal select").val("");
                          $("#provider-contact-modal save-error").text("");
        
                          $("#provider-contact-modal").attr("data-record-id", "");
                          $("#provider-contact-modal").attr("data-account-id", "");
                          
                          
                          displayProviderRelatedContacts(suregeonId);
        
                          $("#provider-contact-modal").modal("hide");                  
                          $("#delete-contact-modal").modal("hide"); 
                    });
        
                  });  
           
                   // cancel new contact for a provider 
                  //$("#provider-contact-modal button.btn-cancel").on("click", function(e) {
                  $('#provider-contact-modal').on('hidden.bs.modal', function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    $("#provider-contact-modal input").val("");
                    $("#provider-contact-modal textarea").val("");
                    $("#provider-contact-modal select").val("");
                    $("#provider-contact-modal span.save-error").text("");
                    $("#provider-contact-modal").attr("data-account-id", "");
                    $("#provider-contact-modal").attr("data-record-id", "");
        
                    $("#provider-contact-modal button.btn-delete").hide();
                    
        
                    //$("#provider-contact-modal").modal("hide");
                    displayProviderRelatedContacts(suregeonId);
                  });
                  
                  
                  $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                   
                        //console.log('e.target: ' + e.target); // newly activated tab
                        //console.log('e.relatedTarget: '+ e.relatedTarget); // previous active tab
                        if(e.target.id == 'surgeonActivity'){
                            $("#tab-accountActivity select#activityFilter").val("All Activities")
                            loadAccountActivities('All Activities');
                        }
                        if(e.target.id == 'accountsList'){
                            populateAccountList();
                        }
                        if(e.target.id == 'surgeonRelatedContact'){
                            displayProviderRelatedContacts(suregeonId);
                        } 
                        /*Author:Ansu Routray
                          Release:4.3
                          Date Modified 28/08/2017
                          Component Id:CID-000463
                          Purpose:load orthoilustrtated details for surgeon
                        */
                        if(e.target.id == 'surgeonOrthoillustrated'){
                            console.log('surgeonOrthoillustrated tab=======');
                            displaySurgeonOrthoillustrated(suregeonId);
                        }
                        
                    });
                    
                  
                   // saving a new contact for a provider
          $("#provider-contact-modal button.btn-save").on("click", function(e) {
                var isValidPhone = true;
               
                // Release 2.2 /CID - 000057/Swetha Penmethsa/Dec/9/2016/Phone validation
              
                if(document.getElementById('Phone').value.length > 0 && document.getElementById('Phone').value.length != 10){
                    $("#spnPhone").html("Invalid entry").show().css("color", "red").css("font-size", "12px");
                    isValidPhone = false;           
                }else{
                    $("#spnPhone").html("validated").hide();
                }
                
                // Mobile Phone Validation
                if(document.getElementById('contactMobilePhone').value.length > 0 && document.getElementById('contactMobilePhone').value.length != 10){
                    $("#spnMobilePhone").html("Invalid entry").show().css("color", "red").css("font-size", "12px");
                    isValidPhone = false;
                }else{
                    $("#spnMobilePhone").html("validated").hide();
                }
                               
                   // Release 2.2 /CID - 000057/Swetha Penmethsa/Dec/9/2016/Phone validation
                   
            e.preventDefault();
            e.stopPropagation();
            
            var id = $("#provider-contact-modal").attr("data-record-id");
            var accountId = $("#provider-contact-modal").attr("data-account-id");
            var firstName = $("#provider-contact-modal input.firstName").val();
            var lastName = $("#provider-contact-modal input.lastName").val();
            var title = $("#provider-contact-modal input.title").val();
            var email = $("#provider-contact-modal input.email").val();
            var phone = $("#provider-contact-modal input.phone").val();
            var mobile = $("#provider-contact-modal input.mobile").val();
            var street = $("#provider-contact-modal input.street").val();
            var city = $("#provider-contact-modal input.city").val();
            var state = $("#provider-contact-modal select.state").val();
            var zip = $("#provider-contact-modal input.zip").val();
            var notes = $("#provider-contact-modal textarea.notes").val();          

            var hasMissingField = false;
            if ( firstName.length === 0 ) { hasMissingField = true; }
            if ( lastName.length === 0 ) { hasMissingField = true; }
            //if ( email.length === 0 ) { hasMissingField = true; }
            //if ( phone.length === 0 ) { hasMissingField = true; }
           
            var inValidEmail = false;
            
            if(!validateEmail(email)){
                inValidEmail = true;
            }
            if ( email.length === 0 ){
                inValidEmail = false;
            }
               // Release 2.2 /CID - 000057/Swetha Penmethsa/Dec/9/2016/Phone validation
             
            if ( hasMissingField ) {
              // at least one required field is missing

              $("#provider-contact-modal span.save-error").text("Missing required fields");

            } else if ( !isValidPhone ) {
                    return false;
            } else if(inValidEmail){
            
                $("#provider-contact-modal span.save-error").text("Please provide a valid email");
            }else {
              // validation passed
              
             // Release 2.2 /CID - 000057/Swetha Penmethsa/Dec/9/2016/Phone validation

              var contact = {
                id: id,
                accountId: suregeonId,
                firstName: firstName,
                lastName: lastName,
                email: email,
                title: title,
                phone: phone,
                mobile: mobile,
                city: city,
                state: state,
                street: street,
                zip: zip,
                notes: notes
              };
            
              var btnTxt = $("#provider-contact-modal button.btn-save").text();
              $("#provider-contact-modal button.btn-save").text("Saving...");
              $("#provider-contact-modal span.save-error").text("");
              $("#provider-contact-modal button").attr("disabled",true);
              
              Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.saveRelatedContact}", 
                contact, function(result, event) {


                    $("#provider-contact-modal button.btn-save").text(btnTxt);
                    $("#provider-contact-modal button").removeAttr("disabled");

                    $("#provider-contact-modal input").val("");
                    $("#provider-contact-modal textarea").val("");
                    $("#provider-contact-modal select").val("");
                    $("#provider-contact-modal save-error").text("");
                    $("#provider-contact-modal button.btn-delete").hide();

                    $("#provider-contact-modal").attr("data-record-id", "");
                    $("#provider-contact-modal").attr("data-account-id", "");
                    
                    displayProviderRelatedContacts(suregeonId);

                    $("#provider-contact-modal").modal("hide");
                    

              });

            }

          });
          
          $("#cancel-provider-contact-modal button.btn-close-provider-contact-warning").on("click", function(e) {                     
              $("#cancel-provider-contact-modal").modal('hide');
              $("#provider-contact-modal").modal('hide');
          }); //  end of Cancel Provider Contact modal.cancel click
                    
          $("#provider-contact-modal button.provider-contact-close-btn").on("click", function() {
               
              $("#cancel-provider-contact-modal").modal("show");                   
          }); //  end of Provider Contact modal.cancel click
          
            $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                //console.log('e.target: ' + e.target); // newly activated tab
                //console.log('e.relatedTarget: '+ e.relatedTarget); // previous active tab
                if(e.target.id == 'accountActivity'){
                    loadAccountActivities('All Activities');
                }
                if(e.target.id == 'surgeons'){
                    displayProviderRelatedSurgeons(accountId);
                }
                if(e.target.id == 'contacts'){
                    displayProviderRelatedContacts(accountId);
                }
                if(e.target.id == 'accountInventory'){
                    displayProviderInventory(accountId);
                }
                /*Author:Ansu Routray
                      Release:4.3
                      Date Modified 28/08/2017
                      Component Id:CID-000463
                      Purpose:loads orthoilustrtated details for surgeon
                */
                if(e.target.id == 'ortho'){
                    displaySurgeonOrthoillustrated(suregeonId);
                }
            });
            
                  
            $('#add-account-affiliation-modal').on('hidden.bs.modal', function (e) {
                        $('#add-account-affiliation-modal input.clear-on-close').val('');
                        $('#add-account-affiliation-modal select.clear-on-close').val('');
                        $("#add-account-affiliation-modal div.ctag-list.account").empty();
                        $("#add-account-affiliation-modal input").removeAttr("disabled");
                        $("#add-account-affiliation-modal button.btn-save").show();
                        $("#add-account-affiliation-modal button.btn-delete").hide();
                        $("#add-account-affiliation-modal #affiliationErrors").html('');
                        
                        $("#add-account-affiliation-modal input").val("");
                       //$("#add-account-affiliation-modal").attr("data-account-id", "");
                       $("#add-account-affiliation-modal").attr("data-record-id", "");
                       $("#add-surgeon-affiliation-modal #affiliationErrors").html('');
                       $("#add-account-affiliation-modal button.btn-delete").hide();
                      $("#add-account-affiliation-modal div.ctag-list.account").empty();           
                      var practitionerId = $("#add-account-affiliation-modal").attr("data-account-id");
                      populateAccountList();
          });
          
          $("#cancel-add-account-affiliation-modal button.btn-cancel-account-affiliation-warning").on("click", function(e) {                     
              $("#cancel-add-account-affiliation-modal").modal('hide');
              $("#add-account-affiliation-modal").modal('hide');
          }); //  end of Cancel Account Affiliation modal.cancel click
                    
          $("#add-account-affiliation-modal button.account-affiliation-cancel-btn").on("click", function() {
              if(!($('#add-account-affiliation-modal #delete-btn-account').is(':visible')))                          
              { 
                  $("#cancel-add-account-affiliation-modal").modal("show");
              }
              else{
                   $("#add-account-affiliation-modal").modal("hide");
              }                  
          }); //  end of Account Affiliation modal.cancel click
          
          $("#add-account-affiliation-modal button.btn-delete").on("click", function(e) {
              e.preventDefault();
              e.stopPropagation();
              console.log('delete clicked');
              $("#delete-account-modal").modal('show');
          });
          
          // Delete account affiliation for practitioner
          $("#delete-account-modal button.btn-delete-surgeon").on("click", function(e) {
            e.preventDefault();
            e.stopPropagation();

            var affiliationId = $("#add-account-affiliation-modal").attr("data-record-id");
            var practitionerId = $("#add-account-affiliation-modal").attr("data-account-id");
            
            console.log('Affiliation ID to be deleted----'+affiliationId+ 'practitioner delete--' + practitionerId  );
            
            var btnTxt = $("#add-account-affiliation-modal button.btn-delete").text();
            $("#add-account-affiliation-modal #affiliationErrors").text("");
            $("#add-account-affiliation-modal button.btn-delete").text("Deleting...");
            $("#add-account-affiliation-modal button").attr("disabled",true);
            $("#delete-account-modal button").attr("disabled",true);
            Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.deleteAccountAffiliation}", 
              affiliationId, function(result, event) {

              if(event.statusCode == 200){   
                  $("#add-account-affiliation-modal button.btn-delete").text(btnTxt);
                  $("#add-account-affiliation-modal button").removeAttr("disabled");
                  $("#delete-account-modal button").removeAttr("disabled");
                  
                  $("#add-account-affiliation-modal input").val("");                  
                  $("#add-account-affiliation-modal save-error").text("");

                  $("#add-account-affiliation-modal").attr("data-record-id", "");
                  $("#add-account-affiliation-modal").attr("data-account-id", "");
                  
                  populateAccountList();

                  $("#add-account-affiliation-modal").modal("hide");
                  $("#delete-account-modal").modal("hide");
              }
              else{
                  $("#add-account-affiliation-modal #affiliationErrors").html('Unexpected error. Please try again.');
                  $("#add-account-affiliation-modal button.btn-delete").text(btnTxt);
                  $("#add-account-affiliation-modal button").removeAttr("disabled");
              }                  

            });

          });
             
           $("#add-account-affiliation-modal button.btn-save").on("click", function() {
               console.log('enter');
               $('#add-account-affiliation-modal #affiliationErrors').html('');
               $("#add-account-affiliation-modal input.account-typeahead").val("");
               var accounts = [];
               var accountAlreadyExistsError = false;
               var practitionerId = $("#add-account-affiliation-modal").attr("data-account-id");
               
               $("#add-account-affiliation-modal div.account").children().each(function() {
                            
                   var accountId =$(this).attr("data-record-id");
                   
                   console.log('Practitioner in save =='+practitionerId  +'HCP=='+accountId );
                   if($('#accountsTag').children('div[data-account-id='+accountId+']' ).length != 0){
                       accountAlreadyExistsError = true;
                   }else{
                       if($(this).attr("data-record-id")!=" " && $(this).attr("data-record-id")!=null ){                           
                           accounts.push($(this).attr("data-record-id"));
                       }
                   }
                   
               }); 
               document.querySelector('#accountGrid').innerHTML = '';   
               if(accountAlreadyExistsError){
                   $("#add-account-affiliation-modal #affiliationErrors").html('Account Affiliation already exists.');
                   populateAccountList();
               }
               else if (! accounts.length == 0 ){
                   Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.saveAccountAffiliations}",
                       practitionerId,accounts,function(result, event) {  
                                  
                           if(event.statusCode == 200){                                
                               $('#add-account-affiliation-modal').modal('hide'); 
                               populateAccountList(); 
                               //displayAccountAffiliations(practitionerId);
                                   
                           }else{
                               $("#add-account-affiliation-modal #affiliationErrors").html('Unexpected error. Please try again.');
                           }
                   });   //  end of remote call
                            
               } else{
                   $("#add-account-affiliation-modal #affiliationErrors").html('Please select atleast one Health Care Organization.');
                   populateAccountList();          
               } 
                     
          }); //  end of account add type modal.save click   
                  // <!-- START SAVE SURGEON PROFILE PIC --> 
                  var attachment;
                  var fileSize;
                  var maxStringSize = 6000000;
                  var maxFileSize = 500000; 
                  var chunkSize = 950000;
                  $("#upload-surgeon-profile-pic-modal button.btn-save-surgeon-profile-pic").on("click", function(e) {
                      
                      var fileInput = document.getElementById('fileInput');    
                      var file = fileInput.files[0];
                      if(file != undefined) {
                          
                          if(file.size <= maxFileSize) {
                              var fileReader = new FileReader();
                              
                              var FileUploadPath = fileInput.value;
                              var Extension = FileUploadPath.substring(FileUploadPath.lastIndexOf('.') + 1).toLowerCase();
                              //Swetha Penmethsa --- 3.2 Release --Apr21---for Picture Validation 
                              if (Extension == "gif" || Extension == "png" || Extension == "bmp" || Extension == "jpeg" || Extension == "jpg") {
                               
                                  fileReader.onloadend = function(e) {
                              
                                    attachment = window.btoa(this.result);  //Base 64 encode the file before sending it
                                    
                                    positionIndex=0;
                                    fileSize = attachment.length;
                                    console.log("Total Attachment Length: " + fileSize);
                                    doneUploading = false;
                                    
                                     
                                    if(fileSize < maxStringSize) {
                                               
                                        var attachmentBody = "";
                                        if(fileSize <= positionIndex + chunkSize) {
                                            attachmentBody = attachment.substring(positionIndex);
                                            doneUploading = true;
                                        } else {
                                            attachmentBody = attachment.substring(positionIndex, positionIndex + chunkSize);
                                        }
                                        Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.saveSurgeonProfilePic}",
                                          suregeonId, attachmentBody,
                                          function(result, event) {
                                               if(event.statusCode == 200){
                                                   
                                                   $("#surgeonDetailView img.profile-pic").attr("src", result).show();
                                                   $("#surgeonDetailView a.add-update-photo").html("Update ");
                                                   $("#surgeonDetailView a.delete-photo").html("| Delete");
                                                   
                                                   $("#surgeonDetailView a.add-photo").html("");
                                                   window.location.reload();
                                               }
                                          
                                          }); //  end of remote call to delete note 
                                          $("#upload-surgeon-profile-pic-modal").modal("hide");
                                          
                                    } else {
                                        alert("Base 64 Encoded file is too large.  Maximum size is " + maxStringSize + " your file is " + fileSize + ".");
                                    }
                                    
                              }
                              }else{
                                  alert('Please upload images only.');
                              } 
                              fileReader.onerror = function(e) {
                                alert("There was an error reading the file.  Please try again.");
                              }
                              fileReader.onabort = function(e) {
                                alert("There was an error reading the file.  Please try again.");
                              }
                             
                              fileReader.readAsBinaryString(file);  //Read the body of the file
                              
                           }
                              
                           else {
                              alert("File must be under 500 KB in size.  Your file is too large.  Please try again.");
                            }
                      }
                  });
                  
                  $("#cancel-upload-surgeon-profile-pic-modal button.btn-cancel-profile-pic-warning").on("click", function(e) {                     
                      $("#cancel-upload-surgeon-profile-pic-modal").modal('hide');
                      $("#upload-surgeon-profile-pic-modal").modal('hide');
                  }); //  end of Cancel Profile Pic modal.cancel click
                    
                  $("#upload-surgeon-profile-pic-modal button.btn-cancel-profile-pic").on("click", function() {
               
                      $("#cancel-upload-surgeon-profile-pic-modal").modal("show");                   
                  }); //  end of Profile Pic modal.cancel click
                  
                  // <!-- END SAVE SURGEON PROFILE PIC --> 
                  
                  // <!--  START DELETE NOTE -->
                  $("#delete-Note-modal button.btn-delete-Note").on("click", function(e) {
                        var btntxt=$("#account-notes-modal button.btn-delete").text();
                        $("#account-notes-modal button.btn-delete").text('Deleting...');
                        $("#account-notes-modal button").attr("disabled",true);
                        $("#delete-Note-modal button").attr("disabled",true);
                        
                           Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.deleteNote}",
                                   noteId,
                                   function(result, event) {
                                       if(event.statusCode == 200){
                                          console.log('deleted~~~~');
                                          //var filterVal=$("#activityFilter").val();
                                          var filterVal = $("#tab-accountActivity select#activityFilter").val();
                                          //alert(filterVal);
                                          loadAccountActivities(filterVal);
                                          NoteId="";
                                       }                                       
                                       $("#account-notes-modal button.btn-delete").text(btntxt);
                                       $("#delete-Note-modal button").removeAttr("disabled");
                                       $("#account-notes-modal button").removeAttr("disabled");
                                       
                               }); //  end of remote call to delete note 
                           $("#delete-Note-modal").modal("hide");    
                           $("#account-notes-modal").modal("hide");
                           
                      });
                      
                 // <!-- END DELETE NOTE -->
                  // <!--  START DELETE PHOTO -->
                  $("#delete-photo-modal button.btn-delete-photo").on("click", function(e) {
                      $("#delete-photo-modal button.btn-delete-photo").text('Deleting...');
                      Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.deleteSurgeonProfilePic}",
                        suregeonId, 
                        function(result, event) {
                            if(event.statusCode == 200){
                                window.location.reload();
                            }
                        
                         }); //  end of remote call to delete note 
                  });
                      
                  // <!-- END DELETE PHOTO -->
                  
                   var dataSource = {
                        //rowCount: ???, - not setting the row count, infinite paging will be used
                        getRows: function (params) {
                            // this code should contact the server for rows. however for the purposes of the demo,
                            // the data is generated locally, a timer is used to give the experience of
                            // an asynchronous call
                            console.log('asking for ' + params.startRow + ' to ' + params.endRow);
                            setTimeout( function() {
                                // take a chunk of the array, matching the start and finish times
                                var rowsThisPage = allOfTheData.slice(params.startRow, params.endRow);
                                // see if we have come to the last page. if we have, set lastRow to
                                // the very last row of the last page. if you are getting data from
                                // a server, lastRow could be returned separately if the lastRow
                                // is not in the current page.
                                var lastRow = -1;
                                if (allOfTheData.length <= params.endRow) {
                                    lastRow = allOfTheData.length;
                                }
                                params.successCallback(rowsThisPage, lastRow);
                            }, 50);
                        }
                    };
                    
                    //contactGridOptions.api.setDatasource(dataSource);                    
                    function displayProviderRelatedContacts(accountId) {
                        $("#provider-contact-modal").attr("data-account-id", accountId);
            
                        $("i.contact-busy").show();  
                         
                          Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveSurgeonRelatedContacts}",
                          accountId,
                          function(results, event) {
                             
                              var rows = [];
                              for ( var i=0; i < results.length; i++) {
                                //alert(JSON.stringify(results[i].Id));
                                rows.push({
                                  name: globalDecodeEntities(results[i].LastName)+", "+globalDecodeEntities(results[i].FirstName),
                                  title: globalDecodeEntities(results[i].PersonTitle),
                                  email: results[i].PersonEmail,
                                  phone: results[i].Phone,
                                  contact: results[i]
                                });                                  
                              }
                             
                                                          
                                var contactGridColDef = [
                                    {headerName: "Name", field: "name",  headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell'],},
                                    {headerName: "Title", field: "title",  headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell'] },
                                    {headerName: "Email", field: "email", colId: "email",  headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell-href'],
                                        cellStyle: {color: '#3A9DDB', cursor: 'pointer'}}, 
                                    {headerName: "Phone", field: "phone",  colId: "phone",  headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell-href'],
                                        cellStyle: {color: '#3A9DDB', cursor: 'pointer'}}
                                   
                                ];
                                document.querySelector('#contactGrid').innerHTML = '';
                                //ag-grid table
                                //contactGridOptions.api.destroy();
                                new agGrid.Grid(document.querySelector('#contactGrid'), contactGridOptions);
                                contactGridOptions.rowHeight = 40;
                                contactGridOptions.api.setColumnDefs(contactGridColDef);
                                
                                contactGridOptions.api.setRowData(rows, 'contact');
                                contactGridOptions.api.addEventListener("rowSelected", displayRelatedContactModal);
                                contactGridOptions.api.sizeColumnsToFit();
                          
                            $("i.contact-busy").hide();
                        });
                        
                        
                      }// End of displayProviderRelatedContacts
                      
                      /*Author:Ansu Routray
                   Release:4.3
                   Date Modified 21/08/2017
                   Component Id:CID-000463
                   Purpose:Method loads orthoilustrtated details for surgeon*/
                   
                   function displaySurgeonOrthoillustrated(surgeonId) {
                        //$("#provider-contact-modal").attr("data-account-id", accountId);
                        var OIAccessforUser='{!currentUserOIAccess}';//Modified on 3/10/2017
                        console.log('OIAccessforUser b4 if======'+OIAccessforUser);
                        
                         
                          Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveSurgeonOrthoillustrated}",
                          surgeonId,
                          function(results, event) {
                          
                              console.log('ortho details======='+JSON.stringify(results)); 
                              
                              if(OIAccessforUser == 'true')
                              {
                                 $("#tab-Orthoillustrated button.btn-ortho").show();
                              }
                              else
                              {
                                  $("#tab-Orthoillustrated button.btn-ortho").hide();
                              }                         
                              <!-- Modified if on 13/10/2017 for OI Save button issue by Santosh Release:4.4-->
                              //if(results.OIEnabled!=true || results.OIActive!=true)
                              if(results.OIActive!=true)
                              {
                                  console.log('No ortho');
                                  $("#tab-Orthoillustrated div.OI-Website").empty();
                                  $("#tab-Orthoillustrated div.OI-Email").empty();
                                  $("#tab-Orthoillustrated div.OI-Address").empty();
                                  $("#tab-Orthoillustrated div.OI-Specialties").empty();
                                  $("#tab-Orthoillustrated div.OI-PracticeName").empty();
                                  $("#tab-Orthoillustrated div.OI-Enabled").empty();
                                  $("#tab-Orthoillustrated div.OI-StateLicense").empty();
                                  $("#tab-Orthoillustrated div.OI-Phone").empty();
                                  orthoGridOptions.api.destroy();
                                  $("#tab-Orthoillustrated button.btn-ortho").text('New OI Request');
                                  
                              }
                              else
                              {
                                  $("#tab-Orthoillustrated button.btn-ortho").text("Edit");
                                  console.log('Ortho available');                                  
                                  //console.log('orthoAdd ============'+orthoAdd +'mailing==='+orthoAdd[0]);
                                  $("#tab-Orthoillustrated div.OI-Website").text(results.Website );
                                  $("#tab-Orthoillustrated div.OI-Email").text(results.Email );
                                  $("#tab-Orthoillustrated div.OI-Address").text(results.Address);
                                  $("#tab-Orthoillustrated div.OI-Specialties").text(results.Specialties );
                                  $("#tab-Orthoillustrated div.OI-PracticeName").text(results.Practicename );
                                  $("#tab-Orthoillustrated div.OI-Enabled").text(results.Fullname);
                                  $("#tab-Orthoillustrated div.OI-StateLicense").text(results.StateLicence );
                                  $("#tab-Orthoillustrated div.OI-Phone").text(results.Phone);
                                  var orthoGridColDef = [
                                    {headerName: "Name", field: "Name",  headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell']},
                                    {headerName: "Course Date", field: "Course_Date__c", suppressFilter: true , headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell'],
                                     cellRenderer: function(params){
                                        //return '<span style="line-height: 25px">'+ globalDecodeEntities(params.value).replace(/,/g, "<br/>") +'</span>'; 
                                            if(params.value != undefined){
                                                return '<span style="line-height: 25px">'+ dateOnlyFormatter(params.value) +'</span>';
                                            }else{
                                                return '';
                                            }
                                        }  
                                    },
                                    {headerName: "Course Type", field: "Course_Type__c", colId: "email",  headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell']}, 
                                    {headerName: "Product Teams", field: "Product_Teams__c",  colId: "phone", filter: 'text', headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell']},
                                    {headerName: "Location", field: "Location__c",  colId: "location",  headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell']}                                    
                                   
                                 ];
                                console.log('ortho course==='+JSON.stringify(results.orthoCourse));
                                document.querySelector('#orthoGrid').innerHTML = '';
                                //ag-grid table
                                //contactGridOptions.api.destroy();
                                new agGrid.Grid(document.querySelector('#orthoGrid'), orthoGridOptions);
                                //orthoGridOptions.rowHeight = 40;
                                orthoGridOptions.api.setColumnDefs(orthoGridColDef);
                                orthoGridOptions.api.setRowData(results.orthoCourse , 'ortho');
                                orthoGridOptions.api.sizeColumnsToFit();
                                
                              }
                              
                        });
                        
                        
                      }// End of displaySurgeonOrthoillustrated
                
                 /*Author:Ansu Routray
                 Release:4.3
                 Date Modified 28/08/2017
                 Component Id:CID-000463
                 Purpose:delete orthoilustrtated details for surgeon
                 */
                  $("#delete-ortho-modal button.btn-delete-ortho").on("click", function(e) {
                      Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.deactivateOrthoSurgeon}",
                          suregeonId , function(result, event) {
                          console.log('suregeonId in delete ortho===='+suregeonId);
                          $('#ortho-add-modal').modal('hide');
                          $('#delete-ortho-modal').modal('hide');
                          displaySurgeonOrthoillustrated(suregeonId);
                          
                      });               
                  });
                      
                  // <!--  Related Contacts Tab END -->
                   
                  // <!--  Preference Tab START -->  
                   //Code Changes by Mimansha Samal on 20th March 2017 in Release 3.2 for Preference Card 
                   // use the summernote RTE instead of the default Salesforce editor, this prevents us from having to have a 
                   // dummy object in the controller to render CKEditor 
                   /*$("#disposablesSummernote").summernote({
                           height: 300,
                           minHeight: null,
                           maxHeight: null,
                           //shortcuts: false,
                           //focus: true
                           /*toolbar: [
                               ['style', ['bold', 'italic', 'underline']],
                                  ['font', ['strikethrough', 'superscript', 'subscript']],
                                      ['para', ['ul', 'ol']],
                           ]* /
                           //g summernote
                           
                    });   */                 
                    
                    // Click on Add Pref Card button action
                    $("#tab-surgeonPrefCard button.btn-add-pref-card").on("click", function(e) {
                        console.log('onclick of attachment link');
                         e.preventDefault();
                        var surgId = $(this).closest("div#tab-surgeonPrefCard").find("select.pref-cards").attr("data-record-id");
                        console.log('Inside on click event');
                        // hide the delete button just in case it's visible
                        $("#new-prefcard-modal button.btn-delete-prefcard").hide();
                        $("#new-prefcard-modal input.prefCardName").removeAttr("readonly");
    
                        $("#new-prefcard-modal").attr("data-current-practioner-id",surgId);
                        $("#new-prefcard-modal table#tableTaxonomy tbody").empty();
                        $("#new-prefcard-modal").on("shown.bs.modal", function() {
                            console.log('Inside on click event of show');
                    
                            $("#new-prefcard-modal div.disposables.rte").summernote('reset');
                            $("#new-prefcard-modal div.sutures.rte").summernote('reset');
                            $("#new-prefcard-modal div.medications.rte").summernote('reset');
                            $("#new-prefcard-modal div.equipment.rte").summernote('reset');
                            $("#new-prefcard-modal div.equipment-notes.rte").summernote('reset');
                    
                            // for some reason, summernote makes the first RTE button active
                            $(".note-btn").removeClass("active");

                        });    

                        $("#new-prefcard-modal span.save-error").text("");
                        $("#new-prefcard-modal span.save-add-error").text("");
                        $("#new-prefcard-modal").modal("show"); 

                    });
                    
                    // delete pref card button clicked
                    $("#new-prefcard-modal button.btn-delete-prefcard").on("click", function(e) {
                       // <!-- Mimansha code for Delete Warning/Confirmation on Pref Card  -->
                      
                        
                        $("#delete-preference-modal").modal("show");
                    });
                    
                    $("#delete-preference-modal button.btn-delete-preference-card").on("click", function(e) {
            
                       // <!-- SP end of code -->  
                        
                        var prefCardId = $("#new-prefcard-modal").attr("data-record-id");
                        var btnTxt = $("#new-prefcard-modal button.btn-delete-prefcard").text();
                        $("#new-prefcard-modal button.btn-delete-prefcard").text("Deleting...");
                        $("#new-prefcard-modal button").attr("disabled",true);
                        Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.deletePractitionerProcedure}",
                            prefCardId, function(result, event) {
              
                            // clear the product table, if we're deleting the last pref card we want there's not going to be 
                            // a pref card to select that will repopulate it
                            //$("#tab-surgeonPrefCard table.pref-card-products tbody").empty();
                            $("#tab-surgeonPrefCard table.product-parts tbody").empty();
                            $("#tab-surgeonPrefCard .IEproduct-parts tbody").empty();
                             
                            // select the next 
                            $("#tab-surgeonPrefCard select.pref-cards option[value="+prefCardId+"]").removeAttr("selected");
                            $("#tab-surgeonPrefCard select.pref-cards option[value="+prefCardId+"]").next().attr("selected",true);
                            $("#tab-surgeonPrefCard select.pref-cards option[value="+prefCardId+"]").remove();
                  
                            $("#tab-surgeonPrefCard select.pref-cards").change();
                  

                            $("#new-prefcard-modal div.disposables.rte").summernote('reset');
                            $("#new-prefcard-modal div.sutures.rte").summernote('reset');
                            $("#new-prefcard-modal div.medications.rte").summernote('reset');
                            $("#new-prefcard-modal div.equipment.rte").summernote('reset');
                            $("#new-prefcard-modal div.equipment-notes.rte").summernote('reset');                  
                  
                            $("#new-prefcard-modal button.btn-delete-prefcard").text(btnTxt);
                            $("#new-prefcard-modal button").removeAttr("disabled");

                            // hide the delete button
                            $("#new-prefcard-modal button.btn-delete-prefcard").hide();
                            $("#new-prefcard-modal").modal("hide");
                            // <!-- SP code for Delete Warning/Confirmation on Pref Card  --> 
                            $("#delete-preference-modal").modal("hide"); 
                            // <!-- SP end of code --> 

                        });              

                    });  
                    
                    $("#new-prefcard-modal").on('hidden.bs.modal', function (e) { 
                            $("div.note-popover").css('display', 'none');  
                    });
                        
                    // edit pref card button clicked
                    $("#tab-surgeonPrefCard button.btn-edit-pref-card").on("click", function(e) {

                      console.log('Inside Edit modal------');
                      $("#new-prefcard-modal span.modal-title-txt").text('Edit Surgeon Preference Card');
                      var surgId = $(this).closest("div#tab-surgeonPrefCard").find("select.pref-cards").attr("data-record-id");
                      var prefCardId = $(this).attr("data-record-id");
                      console.log('Inside Edit modal------Surgeon ID-----'+ surgId);
                      console.log('Inside Edit modal------PrefCardId-----'+ prefCardId);
                      
                      if(!prefCardId){
                        //alert('prefCardId: '+prefCardId);
                        return false;
                      }
                  
                  
                      $("i.edit-pref-card-busy").show();
                      Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitionerPrefCard}",
                      prefCardId, function(prefCard, event) {
                
                        Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitionerPrefCardProducts}",
                        prefCardId, function(prefCardProducts, event) {

                          $("i.edit-pref-card-busy").hide();

                          $("#new-prefcard-modal").attr("data-record-id", prefCardId);
                          $("#new-prefcard-modal").attr("data-current-practioner-id", surgId);
                          /*$("#new-prefcard-modal input.procedure").attr("data-record-id", prefCard.Procedure__r.Id);
                          $("#new-prefcard-modal input.procedure").val(globalDecodeEntities(prefCard.Procedure__r.Name));
                          if(prefCard.Surgical_Technique__c){
                              $("#new-prefcard-modal input.surgical-technique").val(globalDecodeEntities(prefCard.Surgical_Technique__r.Name));
                              $("#new-prefcard-modal input.surgical-technique").attr("data-record-id", prefCard.Surgical_Technique__c);
                          }
                          */
                  
                          displayPrefCardProdDetails("#new-prefcard-modal", "#tablePrefCardTaxonomy", prefCard.lstPrefCardProcs, true);
                  
                          $("#new-prefcard-modal textarea.position").val(globalDecodeEntities(prefCard.objPrefCard.Position__c));
                          $("#new-prefcard-modal input.prefCardName").val(globalDecodeEntities(prefCard.objPrefCard.Pref_Card_Name__c));
                          /*
                          for ( var i=0; i < prefCardProducts.length; i++ ) {
                    
                              $("#new-prefcard-modal div.ctag-list.products").append(obj2ctag({
                              Name: globalDecodeEntities(prefCardProducts[i].Product__r.Name),
                              Id: prefCardProducts[i].Product__r.Id
                              }));

                          }*/
                          
                          $("#new-prefcard-modal .product-parts tbody").empty();
                          var totalAmount=0;
                          $.each(prefCardProducts, function(i,v){
                              
                              var row_id = v.Product__r.Id;
                              if(v.UnitPrice__c == "undefined" || v.UnitPrice__c == null)
                              {
                                  $("#new-prefcard-modal .product-parts tbody").append('<tr data-part-id="'+v.Product__r.Id+'" product-group-type="'+ v.Product__r.Material_Group_Type__c +'"><td class="product-marker"><p class="form-control-static">'+v.Product__r.Material_Number__c+'</p></td><td class="description-marker"><p class="form-control-static">'+v.Product__r.Name+'</p></td><td class="quantity-marker"><p class="form-control-static part-quantity">'+ (globalDecodeEntities(v.Quantity__c) || "") +'</p></td><td class="unitprice-marker"><p class="form-control-static part-unitprice">'+ (globalDecodeEntities(v.UnitPrice__c) || "") +'</p></td><td id="total" class="totalprice-marker"></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary pt-edit-btn" onclick="editPart(\''+row_id+'\')">Edit</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                              }
                              else{
                              
                                  if(v.Quantity__c == "undefined" || v.Quantity__c == null)
                                  {
                                      $("#new-prefcard-modal .product-parts tbody").append('<tr data-part-id="'+v.Product__r.Id+'" product-group-type="'+ v.Product__r.Material_Group_Type__c +'"><td class="product-marker"><p class="form-control-static">'+v.Product__r.Material_Number__c+'</p></td><td class="description-marker"><p class="form-control-static">'+v.Product__r.Name+'</p></td><td class="quantity-marker"><p class="form-control-static part-quantity">'+ (globalDecodeEntities(v.Quantity__c) || "") +'</p></td><td class="unitprice-marker"><p class="form-control-static part-unitprice">$'+ parseFloat(v.UnitPrice__c).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') +'</p></td><td id="total" class="totalprice-marker"></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary pt-edit-btn" onclick="editPart(\''+row_id+'\')">Edit</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                                  }else{
                                      $("#new-prefcard-modal .product-parts tbody").append('<tr data-part-id="'+v.Product__r.Id+'" product-group-type="'+ v.Product__r.Material_Group_Type__c +'"><td class="product-marker"><p class="form-control-static">'+v.Product__r.Material_Number__c+'</p></td><td class="description-marker"><p class="form-control-static">'+v.Product__r.Name+'</p></td><td class="quantity-marker"><p class="form-control-static part-quantity">'+v.Quantity__c+'</p></td><td class="unitprice-marker"><p class="form-control-static part-unitprice">$'+ parseFloat(v.UnitPrice__c).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') +'</p></td><td id="total" class="totalprice-marker" data-total="'+v.TotalPrice__c+'"><p class="form-control-static">$'+ parseFloat(v.TotalPrice__c).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') +'</p></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary pt-edit-btn" onclick="editPart(\''+row_id+'\')">Edit</button>&nbsp;&nbsp;&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                                      totalAmount += v.TotalPrice__c;
                                  }
                              }
                          }); //  end of for-each product
                          
                          if(totalAmount != '0')
                          {
                              $("#new-prefcard-modal .product-parts tfoot td#totalProductAmount").attr("data-total", totalAmount);
                              $("#new-prefcard-modal .product-parts tfoot td#totalProductAmount").html("$" + parseFloat(totalAmount).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
                          }
                          

                          $("#new-prefcard-modal").attr("data-current-practioner-id",surgId);

                  
                          $("#new-prefcard-modal").on("shown.bs.modal", function() {
                                console.log('Calling shown.bs.modal');
                              var disposables = $('<div/>').html(prefCard.objPrefCard.Disposables__c).text();
                              var sutures = $('<div/>').html(prefCard.objPrefCard.Sutures__c).text();
                              var medications = $('<div/>').html(prefCard.objPrefCard.Medications__c).text();
                              var equipment = $('<div/>').html(prefCard.objPrefCard.Equipment__c).text();
                              var equipmentNotes = $('<div/>').html(prefCard.objPrefCard.Equipment_Notes__c).text();

                              $("#new-prefcard-modal #disposablesSummernote").summernote('code',disposables);
                              $("#new-prefcard-modal #suturesSummernote").summernote('code',sutures);
                              $("#new-prefcard-modal #medicationsSummernote").summernote('code',medications);
                              $("#new-prefcard-modal #equipmentSummernote").summernote('code',equipment);
                              $("#new-prefcard-modal #equipment-notesSummernote").summernote('code',equipmentNotes);

                         });
                         
                         
                         $("#new-prefcard-modal button.btn-delete-prefcard").show();

                         $("#new-prefcard-modal span.save-error").text("");
                         $("#new-prefcard-modal span.save-add-error").text("");
                         $("#new-prefcard-modal").modal("show");
                  

                        });

                      }); 
            
                    });
                    
                    // on the surgeon detail when a preference card is clicked, load in the detailList
                    $("#tab-surgeonPrefCard select.pref-cards").on("change", function(e) {
            
                        console.log('##--pref card changed');
                        $("#prefcard-refresh").show();
                        $("#tab-surgeonPrefCard button.btn-edit-pref-card").attr("disabled",true);
                        $("#tab-surgeonPrefCard button.btn-pdf-pref-card").attr("disabled",true);
                        $("#tab-surgeonPrefCard button.btn-add-pref-card").attr("disabled",true);
                        
                        var prefCardId = $(this).val();
                        var practitionerId = $(this).attr("data-record-id");
    
                        $("#tab-surgeonPrefCard div.position").empty();
                        $("#tab-surgeonPrefCard div.prefCardName").empty();
                        $("#tab-surgeonPrefCard div.createdBy").empty();
                        $("#tab-surgeonPrefCard div.lastModified").empty();
                        $("#tab-surgeonPrefCard span.procedure").empty();
                        $("#tab-surgeonPrefCard span.surgicalTechnique").empty();
                        $("#tab-surgeonPrefCard table#tableDetailTaxonomy tbody").empty();
                        $("#tab-surgeonPrefCard table.product-parts tbody").empty();
                        $("#tab-surgeonPrefCard div.disposables").empty();
                        $("#tab-surgeonPrefCard div.medications").empty();
                        $("#tab-surgeonPrefCard div.equipment").empty();
                        $("#tab-surgeonPrefCard div.equipment-notes").empty();
                        $("#tab-surgeonPrefCard div.sutures").empty();
                        $("#tab-surgeonPrefCard .product-parts tfoot #totalProductAmount").text("-");
                        $("#tab-surgeonPrefCard .IEproduct-parts tbody").empty();
                        
                        if(prefCardId == null)
                        {
                            console.log('##--pref card changed---null select');
                            $("#surgeonDetailView select.pref-cards").empty().append("<option value=''>--None--</option>");
                            $("#prefcard-refresh").hide();
                            $("#surgeonDetailView button.btn-add-pref-card").removeAttr("disabled");
                            $("#surgeonDetailView span.pref-card-data").hide();
                            
                            //  Resetting the pref card Id on the edit button to avoid pulling a wrong Id when there's no pref card
                            $("#surgeonDetailView button.btn-edit-pref-card").removeAttr("data-record-id");
                            $("#surgeonDetailView button.btn-pdf-pref-card").removeAttr("data-record-id");
                        }
                        
                        else
                        {
                        Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitionerPrefCard}",
                        prefCardId, function(result, event) {
                
                            $("#tab-surgeonPrefCard span.pref-card-data").show();
                
                            $("#tab-surgeonPrefCard button.btn-edit-pref-card").attr("data-record-id", prefCardId);
                
                           // <!-- sp code for PDF -->                 
                            $("#tab-surgeonPrefCard button.btn-pdf-pref-card").attr("data-record-id", prefCardId);                
                           // <!-- SP end of code -->  
                            $("#tab-surgeonPrefCard div.position").text(globalDecodeEntities(result.objPrefCard.Position__c || '')); 
                            $("#tab-surgeonPrefCard div.prefCardName").text(globalDecodeEntities(result.objPrefCard.Pref_Card_Name__c || ''));
                            $("#tab-surgeonPrefCard div.createdBy").text(globalDecodeEntities((result.objPrefCard.CreatedBy.Name) + ' on '+ (moment(result.objPrefCard.CreatedDate).format("MM-DD-YYYY")) || ''));
                            $("#tab-surgeonPrefCard div.lastModified").text(globalDecodeEntities((result.objPrefCard.LastModifiedBy.Name) + ' on '+ (moment(result.objPrefCard.LastModifiedDate).format("MM-DD-YYYY")) || ''));
                          
                            console.log('##--result: '+ JSON.stringify(result));
                
                            displayPrefCardProdDetails('', "#tableDetailTaxonomy", result.lstPrefCardProcs, false); 
                            $("#tab-surgeonPrefCard div.disposables").html( $('<div/>').html(result.objPrefCard.Disposables__c).text() );
                            $("#tab-surgeonPrefCard div.medications").html( $('<div/>').html(result.objPrefCard.Medications__c).text() );
                            $("#tab-surgeonPrefCard div.equipment").html( $('<div/>').html(result.objPrefCard.Equipment__c).text() );
                            $("#tab-surgeonPrefCard div.equipment-notes").html( $('<div/>').html(result.objPrefCard.Equipment_Notes__c).text() );
                            $("#tab-surgeonPrefCard div.sutures").html( $('<div/>').html(result.objPrefCard.Sutures__c).text() );
                            // now get the products
                            Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitionerPrefCardProducts}",
                              prefCardId, function(result, event) {
                                
                                var totalAmount=0;
                                $.each(result, function(i,v){
                                    
                                    console.log('Product Material Group Desc' + v.Product__r.Material_Group_Type__c);
                                    var productId = v.Product__r.Id;
                                    
                                    Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.checkIfProductActive}",
                                         productId, function(pricebookentry, event) {
                                        if(pricebookentry.length>0){
                                            var activeFlag = pricebookentry[0].IsActive;
                                            var productType = v.Product__r.Material_Group_Type__c;
                                            console.log('Product Type----'+ productType );
                                            console.log('Product Active Flag----'+ activeFlag );
                                            
                                            if(productType == "Implants" || productType == "Disposable")
                                            {
                                                console.log('Unit Price----'+ v.UnitPrice__c);
                                                console.log('Quamtity----'+ v.Quantity__c);
                                                console.log('Total Price----'+ v.TotalPrice__c);
                                                
                                                if(v.UnitPrice__c == "undefined" || v.UnitPrice__c == null)
                                                {
                                                    if(activeFlag)
                                                    {
                                                        $("#tab-surgeonPrefCard .product-parts tbody").append('<tr data-part-id="'+v.Product__r.Id+'"><td><p class="form-control-static">'+v.Product__r.Material_Number__c+'</p></td><td><p class="form-control-static">'+v.Product__r.Name+'</p></td><td><p class="form-control-static part-quantity" style="padding-left:15%">'+ (globalDecodeEntities(v.Quantity__c) || "") +'</p></td><td><p class="form-control-static part-unitprice">'+ (globalDecodeEntities(v.UnitPrice__c) || "") +'</p></td><td id="total" data-total="'+v.TotalPrice__c+'"><p class="form-control-static">'+ (globalDecodeEntities(v.TotalPrice__c) || "") +'</p></td>');
                                                    }
                                                    else
                                                    {
                                                        console.log('Inside if of change'+ v.Product__r.Name);
                                                        $("#tab-surgeonPrefCard .product-parts tbody").append('<tr data-part-id="'+v.Product__r.Id+'"><td><p class="form-control-static"><label class="expired-prod" title="Part Number ' + v.Product__r.Material_Number__c + ' has been discontinued.">!&nbsp;</label>'+v.Product__r.Material_Number__c+'</p></td><td><p class="form-control-static">'+v.Product__r.Name+'</p></td><td><p class="form-control-static part-quantity" style="padding-left:15%">'+ (globalDecodeEntities(v.Quantity__c) || "") +'</p></td><td><p class="form-control-static part-unitprice">'+ (globalDecodeEntities(v.UnitPrice__c) || "") +'</p></td><td id="total" data-total="'+v.TotalPrice__c+'"><p class="form-control-static">'+ (globalDecodeEntities(v.TotalPrice__c) || "") +'</p></td>');
                                                    }
                                                }
                                                else{
                                                    
                                                    if(v.Quantity__c == "undefined" || v.Quantity__c == null)
                                                    {
                                                        if(activeFlag)
                                                        {
                                                            $("#tab-surgeonPrefCard .product-parts tbody").append('<tr data-part-id="'+v.Product__r.Id+'"><td><p class="form-control-static">'+v.Product__r.Material_Number__c+'</p></td><td><p class="form-control-static">'+v.Product__r.Name+'</p></td><td><p class="form-control-static part-quantity" style="padding-left:15%">'+ (globalDecodeEntities(v.Quantity__c) || "") +'</p></td><td><p class="form-control-static part-unitprice">$'+ v.UnitPrice__c +'</p></td><td id="total" data-total="'+v.TotalPrice__c+'"><p class="form-control-static">'+ (globalDecodeEntities(v.TotalPrice__c) || "") +'</p></td>');
                                                        }
                                                        else
                                                        {
                                                            $("#tab-surgeonPrefCard .product-parts tbody").append('<tr data-part-id="'+v.Product__r.Id+'"><td><p class="form-control-static"><label class="expired-prod" title="Part Number ' + v.Product__r.Material_Number__c + ' has been discontinued.">!&nbsp;</label>'+v.Product__r.Material_Number__c+'</p></td><td><p class="form-control-static">'+v.Product__r.Name+'</p></td><td><p class="form-control-static part-quantity" style="padding-left:15%">'+ (globalDecodeEntities(v.Quantity__c) || "") +'</p></td><td><p class="form-control-static part-unitprice">$'+ v.UnitPrice__c +'</p></td><td id="total" data-total="'+v.TotalPrice__c+'"><p class="form-control-static">'+ (globalDecodeEntities(v.TotalPrice__c) || "") +'</p></td>');
                                                        }
                                                    
                                                    }
                                                    else{
                                                    
                                                        if(activeFlag)
                                                        {
                                                            $("#tab-surgeonPrefCard .product-parts tbody").append('<tr data-part-id="'+v.Product__r.Id+'"><td><p class="form-control-static">'+v.Product__r.Material_Number__c+'</p></td><td><p class="form-control-static">'+v.Product__r.Name+'</p></td><td><p class="form-control-static part-quantity" style="padding-left:15%">'+ (globalDecodeEntities(v.Quantity__c) || "") +'</p></td><td><p class="form-control-static part-unitprice">$'+ parseFloat(v.UnitPrice__c).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') +'</p></td><td id="total" data-total="'+v.TotalPrice__c+'"><p class="form-control-static">$'+ parseFloat(v.TotalPrice__c).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') +'</p></td>');
                                                            totalAmount += v.TotalPrice__c;
                                                            console.log('Inside if of active change'+ v.Product__r.Name);
                                                            console.log('Inside if of active change----Total Amount---'+ totalAmount );
                                                        }
                                                        else
                                                        {
                                                            console.log('Inside else of active change'+ v.Product__r.Name);
                                                            $("#tab-surgeonPrefCard .product-parts tbody").append('<tr data-part-id="'+v.Product__r.Id+'"><td><p class="form-control-static"><label class="expired-prod" title="Part Number ' + v.Product__r.Material_Number__c + ' has been discontinued.">!&nbsp;</label>'+v.Product__r.Material_Number__c+'</p></td><td><p class="form-control-static">'+v.Product__r.Name+'</p></td><td><p class="form-control-static part-quantity" style="padding-left:15%">'+ (globalDecodeEntities(v.Quantity__c) || "") +'</p></td><td><p class="form-control-static part-unitprice">$'+ parseFloat(v.UnitPrice__c).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') +'</p></td><td id="total" data-total="'+v.TotalPrice__c+'"><p class="form-control-static">$'+ parseFloat(v.TotalPrice__c).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') +'</p></td>');
                                                            totalAmount += v.TotalPrice__c;
                                                        }
                                                    }
                                                }
                                            }
                                            
                                            if(productType == "Equipment")
                                            {    
                                                if(activeFlag)
                                                {
                                                    $("#tab-surgeonPrefCard .IEproduct-parts tbody").append('<tr data-part-id="'+v.Product__r.Id+'"><td><p class="form-control-static">'+v.Product__r.Material_Number__c+'</p></td><td><p class="form-control-static">'+v.Product__r.Name+'</p></td><td><p class="form-control-static part-quantity" style="padding-left:5%">'+ (globalDecodeEntities(v.Quantity__c) || "") +'</p></td>');
                                                }
                                                else
                                                {
                                                    $("#tab-surgeonPrefCard .IEproduct-parts tbody").append('<tr data-part-id="'+v.Product__r.Id+'"><td><p class="form-control-static"><label class="expired-prod" title="Part Number ' + v.Product__r.Material_Number__c + ' has been discontinued.">!&nbsp;</label>'+v.Product__r.Material_Number__c+'</p></td><td><p class="form-control-static">'+v.Product__r.Name+'</p></td><td><p class="form-control-static part-quantity" style="padding-left:5%">'+ (globalDecodeEntities(v.Quantity__c) || "") +'</p></td>');
                                                }
                                            }
                                        
                                            console.log('Final change----Total Amount---'+ totalAmount );
                                            $("#tab-surgeonPrefCard .product-parts tfoot td#totalProductAmount").attr("data-total", totalAmount);
                                            $("#tab-surgeonPrefCard .product-parts tfoot td#totalProductAmount").html("<b>$" + parseFloat(totalAmount).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,') + "</b>");
                                
                                        }
                                   });
                              }); //  end of for-each product
                              
                                    $("#prefcard-refresh").hide();
                                    $("#tab-surgeonPrefCard button.btn-edit-pref-card").removeAttr("disabled");
                                    $("#tab-surgeonPrefCard button.btn-pdf-pref-card").removeAttr("disabled");
                                    $("#tab-surgeonPrefCard button.btn-add-pref-card").removeAttr("disabled");
                            });
                                
                        });
                        }        
                                    
                    });
                    
                    // Generate pdf button clicked
                    $("#generate-pdf-modal button.generatePdf-save-btn").on("click", function(e) {            
                    
                        var prefCardId = $(this).attr("data-record-id");
                        $("#generate-pdf-modal #generatePdfErrors").html('');
                                            
                        var implants = false;
                        var instrument = false;
                        var notes = false;
                        var pricing = false;
                        
                        if(!($("#generate-pdf-modal #implants-chkbx").is(':checked'))
                            && !($("#generate-pdf-modal #instrument-chkbx").is(':checked'))
                                && !($("#generate-pdf-modal #notes-chkbx").is(':checked')))
                        {
                            $("#generate-pdf-modal #generatePdfErrors").html('Please select PDF sections to continue.');
                            $("#generate-pdf-modal button").removeAttr('disabled');
                            $("#generate-pdf-modal .primary-role").removeAttr('disabled');
                        }
                        
                        else
                        {
                            if($("#generate-pdf-modal #implants-chkbx").is(':checked')){                        
                                implants = true;                               
                            }
                        
                            if($("#generate-pdf-modal #instrument-chkbx").is(':checked')){                        
                                instrument = true;                               
                            }
                        
                            if($("#generate-pdf-modal #notes-chkbx").is(':checked')){                        
                                notes = true;                               
                            }
                            
                            if($("#generate-pdf-modal #pricing-chkbx").is(':checked')){                        
                                pricing = true;                               
                            }
                            window.open('/ARPreferenceCardPDF?pid='+prefCardId+'&imp='+ implants + '&inst='+instrument+'&note='+ notes +'&price='+ pricing, '_blank', 'toolbar=0,location=0,menubar=0');
                            
                            $("#generate-pdf-modal").modal("hide");    
                            
                        }
                    });
                    
                    // open pref card pdf button clicked
                    $("#tab-surgeonPrefCard button.btn-pdf-pref-card").on("click", function(e) {            
                    
                        var prefCardId = $(this).attr("data-record-id");
                        $("#generate-pdf-modal button.generatePdf-save-btn").attr("data-record-id", prefCardId);                
                        
                        Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitionerPrefCard}",
                          prefCardId, function(prefCard, event) {
                          
                          $("#generate-pdf-modal #card-name").text(globalDecodeEntities(prefCard.objPrefCard.Pref_Card_Name__c));
                          
                          
                        });
                        
                        $("#generate-pdf-modal").on("shown.bs.modal", function() {
                            console.log('Inside on click event of show separate');
                    
                            $('#generate-pdf-modal #generatePdfErrors').html('');                        
                            $("#generate-pdf-modal #implants-chkbx").prop("checked", true);
                            $("#generate-pdf-modal #instrument-chkbx").prop("checked", true);
                            $("#generate-pdf-modal #notes-chkbx").prop("checked", true);
                            $('#generate-pdf-modal #pricing-chkbx').prop("checked", false);
                           
                        });
                        
                        $("#generate-pdf-modal").modal("show");    
                    });
                    
                    
                    $("#divImplantsAndDisposables i[id$='toggle']").on('click', function(event){
                            targetDiv = $(this).attr('data-target');
                            $("#"+targetDiv).collapse('toggle');
                            
                            if($(this).hasClass('fa-chevron-up')){
                                $(this).removeClass('fa-chevron-up');
                                $(this).addClass('fa-chevron-down');
                            } else {
                                $(this).removeClass('fa-chevron-down');
                                $(this).addClass('fa-chevron-up');
                            }
                    });
                    
                    $("#divInstrumentsAndEquipment i[id$='toggle']").on('click', function(event){
                            targetDiv = $(this).attr('data-target');
                            $("#"+targetDiv).collapse('toggle');
                            
                            if($(this).hasClass('fa-chevron-up')){
                                $(this).removeClass('fa-chevron-up');
                                $(this).addClass('fa-chevron-down');
                            } else {
                                $(this).removeClass('fa-chevron-down');
                                $(this).addClass('fa-chevron-up');
                            }
                    });
                    
                    $("#divNotes i[id$='toggle']").on('click', function(event){
                            targetDiv = $(this).attr('data-target');
                            $("#"+targetDiv).collapse('toggle');
                            
                            if($(this).hasClass('fa-chevron-up')){
                                $(this).removeClass('fa-chevron-up');
                                $(this).addClass('fa-chevron-down');
                            } else {
                                $(this).removeClass('fa-chevron-down');
                                $(this).addClass('fa-chevron-up');
                            }
                    });
                    
                    $("#divactivity i[id$='toggle']").on('click', function(event){
                       
                        targetDiv = $(this).attr('data-target');
                        $("#"+targetDiv).collapse('toggle');
                        
                        if($(this).hasClass('fa-chevron-up')){
                            $(this).removeClass('fa-chevron-up');
                            $(this).addClass('fa-chevron-down');
                        } else {
                            $(this).removeClass('fa-chevron-down');
                            $(this).addClass('fa-chevron-up');
                        }
                   });
                   
                   
                    $("#new-prefcard-modal  input.card-products-typeahead").typeahead({
                    // typeahead setup for case products
                       minLength: 3,
                       items: 50,
                       source: function(query, onSuccess) {
                          var procedure = $("#new-prefcard-modal input.procedure").attr("data-record-id");
                          query = procedure+"::"+query;
    
                          search(query, '{!$RemoteAction.CS_ARContactsCC.searchProducts}', onSuccess);                                    
                       },
                       displayText: function(item) {
                          return globalDecodeEntities(item.Name+" "+item.Material_Number__c);
                       },
                       afterSelect: function(item) {
    
                           if ( $("#new-prefcard-modal  span[data-record-id="+item.Id+"].ctag").length === 0 ) {
                               // no duplicates
                               item.Name += " "+item.Material_Number__c;
    
                               $("#new-prefcard-modal div.ctag-list.products").append(obj2ctag(item));
                           }
                           $("#new-prefcard-modal input.card-products-typeahead").val("");
    
                       }
                    });  
                    
                    $("#new-prefcard-modal input.card-procedure-typeahead").typeahead({
                        // typeahead setup for case products
                        minLength: 3,
                        source: function(query, onSuccess) {
                           search(query, '{!$RemoteAction.CS_ARContactsCC.searchProcedures}', onSuccess);                                    
                        },
                        displayText: function(item) {
                           return globalDecodeEntities(item.Name);
                        },
                        afterSelect: function(item) {
                          $("#new-prefcard-modal input.procedure").attr("data-record-id", item.Id);
                          $("#new-prefcard-modal input.procedure").attr("data-record-name", item.Name);
                          
                          setProductsFor(item.Id, true, 'new-prefcard-modal');
                          setSurgicalTechniques('new-prefcard-modal', false);
                        }
                    });
                    
                    // whenever the procedure field blurs replace the text value with the procedure name stored in
                    // data-record-name this keeps the input val in sync with what was selected
                    $("#new-prefcard-modal input.card-procedure-typeahead").on("blur", function() {
                          $(this).val( $(this).attr("data-record-name") );
                    });
                    
                    // saves a new preference card
                    $("#new-prefcard-modal button.btn-save-prefcard").on("click", function(e) {
                    

                         e.preventDefault();
                         e.stopPropagation();
              
                         var addedProcedures = $('#new-prefcard-modal #tablePrefCardTaxonomy > tbody  > tr').length;
        
                         //  Prompt if there are any un-added product teams.
                      
                         if(addedProcedures > 0 &&
                            $("#new-prefcard-modal div.ctag-list.procedures").children().length > 0 ){
                            //if(confirm("Procedure selection is incomplete. Do you wish you go back and add them?")){
                            $("#new-prefcard-modal span.save-error").text("Procedure selection is incomplete. Do you wish to go back and add them?");
                            return false;
                            //}
                         }
                      
                      
                         if($("#new-prefcard-modal div.ctag-list.procedures").children().length > 0 ){
                            addTaxonomy('#new-prefcard-modal');
                         }
                      
                        
                         var prefCardId = $("#new-prefcard-modal").attr("data-record-id");
                         if ( typeof prefCardId === "undefined" || prefCardId.length === 0 ) {
                             prefCardId = null;
                             //$("#new-prefcard-modal input.prefCardName").removeAttr("readonly");
                         } else {
                            //$("#new-prefcard-modal input.prefCardName").attr("readonly",true);
                         }
        
                      // selecting - new - from the pull down on the tab sets the current practioners id 
                      var practitionerId = $("#new-prefcard-modal").attr("data-current-practioner-id") || '';
                      
                      var procedureId = $("#new-prefcard-modal input.procedure").attr("data-record-id");
                      
                      var lstProcedureIds = [];
                      var lstSurgicalTechniqueIds = [];
                      
                      
                      $('#new-prefcard-modal #tablePrefCardTaxonomy > tbody  > tr').each(function() {
                        
                        console.log('##--productTeam Ids: ' + $(this).attr("data-productteam-id"));
                        var productTeamId = $(this).attr("data-productteam-id");
                        var productTeamName = $(this).find('td.product-marker').val();
                        
                        console.log('##--productTeamName: '+ productTeamName);
                        $(this).find('td.procedures-marker >span').each (function() {
                            console.log('##--procedure Ids: ' + $(this).attr("data-record-id"));
                            lstProcedureIds.push(productTeamId+'::'+ $(this).attr("data-record-id") +'::' + $(this).attr("data-label") + '::' + productTeamName);
                        }); 
                        
                        $(this).find('td.surgical-marker >span').each (function() {
                            
                            console.log('##--surgical technique Ids: ' + $(this).attr("data-record-id")); 
                            lstSurgicalTechniqueIds.push(productTeamId+'::'+ $(this).attr("data-record-id") +'::' + $(this).attr("data-label"));
                        }); 
                            
                      });// for-each row 
                      
                      //var surgicalTechniqueId = $("#new-prefcard-modal input.surgical-technique").attr("data-record-id");
                      var position = $("#new-prefcard-modal textarea.position").val();
                      var productIds = [];
                      var products = [];
                      $("#new-prefcard-modal div.products").children().each(function() {
                        productIds.push($(this).attr("data-record-id"));
                      });
                      
                      $("#new-prefcard-modal .product-parts tbody tr").each(function(){
                          console.log('Product ID---'+ $(this).attr("data-part-id"));
                          console.log('Quantity---'+ $(this).find("p.part-quantity").text());  
                          console.log('Unit Price---'+ parseFloat($(this).find("p.part-unitprice").text().replace('$', "").replace(',', "")));  
                          console.log('Total Price---'+ parseFloat($(this).find("td#total").attr("data-total")));             
                          
                          var price =  parseFloat($(this).find("p.part-unitprice").text().replace('$', "").replace(',', "")); 
                          var totalAmount = parseFloat($(this).find("td#total").attr("data-total"));
                          
                          if(!isNaN(price))
                          {
                              if(!isNaN(totalAmount) )
                              {
                                  console.log('Inside Save if not undefined');
                                  products.push({'Product__c': $(this).attr("data-part-id"),
                                  'Quantity__c' : $(this).find("p.part-quantity").text(),
                                  'UnitPrice__c' : parseFloat($(this).find("p.part-unitprice").text().replace('$', "").replace(',', "")),                                    
                                  'TotalPrice__c' : $(this).find("td#total").attr("data-total")});
                              }
                              else
                              {
                                  console.log('Inside Save if total undefined');
                                  products.push({'Product__c': $(this).attr("data-part-id"),
                                  'Quantity__c' : $(this).find("p.part-quantity").text(),
                                  'UnitPrice__c' : parseFloat($(this).find("p.part-unitprice").text().replace('$', "").replace(',', "")),                                    
                                  'TotalPrice__c' : null });
                              }
                          }
                          else{ 
                                  console.log('Inside Save else price nan');
                                  products.push({'Product__c': $(this).attr("data-part-id"),
                                  'Quantity__c' : $(this).find("p.part-quantity").text(),
                                  'UnitPrice__c' : null,                                    
                                  'TotalPrice__c' : null});
                          }
                      });
        
                      var disposablesData = $("#new-prefcard-modal #disposablesSummernote").summernote('code');
                      var suturesData = $("#new-prefcard-modal #suturesSummernote").summernote('code');
                      var medicationsData = $("#new-prefcard-modal #medicationsSummernote").summernote('code');
                      var equipmentData = $("#new-prefcard-modal #equipmentSummernote").summernote('code');
                      var equipmentNotesData = $("#new-prefcard-modal #equipment-notesSummernote").summernote('code');            
        
                      var name = $("#new-prefcard-modal input.prefCardName").val() || '';
                       
                      console.log('##--lstProcedureIds: ' + lstProcedureIds);
                      // validate what the user has entered
                        var valid = true;
                        valid = valid && typeof lstProcedureIds != "undefined" && lstProcedureIds.length > 0;
                        valid = valid && typeof name != "undefined" && name.length > 0;
                        if ( !valid ) {
                            $("#new-prefcard-modal .save-error").text("Missing required fields");
            
                            return false;
                        } else {
                            // no errors, clear the error text in case there was one previously
                            $("#new-prefcard-modal .save-error").text("");
                        }
                      
                      // Save the preference card
        
                      var btnTxt = $("#new-prefcard-modal button.btn-save-prefcard").text();
                      $("#new-prefcard-modal button.btn-save-prefcard").text("Saving...");
                      $("#new-prefcard-modal button").attr("disabled",true);
                      console.log('##--practitionerId: '+ practitionerId);
                      console.log('##--name: '+ name);
                      // first, make sure the name is unique
                      Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.isUniquePractitionerProcedureName}",
                        practitionerId, name, function(result, event) { 
                          //console.log('##--procedureId: '+ procedureId);
                          //console.log('##--surgicalTechniqueId: '+ surgicalTechniqueId);
                          console.log('##--Returned Value for Unique test: '+ result);
                          console.log('##--Pref Card ID for Unique test: '+ prefCardId);
                          if ( result == false && prefCardId === null) {
                            // if prefCardId != null then this is an update and the procedure name is readonly anyway so we don't care
                            
                              $("#new-prefcard-modal span.save-error").text("Name must be unique");
                              $("#new-prefcard-modal button.btn-save-prefcard").text(btnTxt);
                              $("#new-prefcard-modal button").removeAttr("disabled");
                            
        
                          } else {
                            // name is unique (or this is an update), proceed
                            
                            Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.csavePractitionerPreferenceCards}",
                              prefCardId, 
                              name,
                              practitionerId, 
                              lstProcedureIds,
                              //procedureId,
                              lstSurgicalTechniqueIds || "", 
                              //surgicalTechniqueId || "", 
                              disposablesData, 
                              equipmentData, 
                              equipmentNotesData,
                              medicationsData, 
                              suturesData, 
                              position, 
                              products, 
                               function(result, event) {
                                
                                if(event.status) {
                                    console.log('##--practitioner proc save result: '+ JSON.stringify(result));
                                    $("#new-prefcard-modal button.btn-save-prefcard").text(btnTxt);
                                    $("#new-prefcard-modal button").removeAttr("disabled");
            
                                    if ( typeof prefCardId === "undefined" || prefCardId === null || prefCardId.length === 0 ) {
                                      // new prefcard, add it ot the pull down
                                      $("#tab-surgeonPrefCard select.pref-cards").prepend("<option value='"+result.objPrefCard.Id+"' selected='true'>"+result.objPrefCard.Pref_Card_Name__c+"</option>");
                                      
                                      // remove the none prefcard if it exists
                                      $("#tab-surgeonPrefCard select.pref-cards option[value='']").remove();
            
                                    } else {
                                      // prefcard update, just update the name in case it changed
                                      $("#tab-surgeonPrefCard select.pref-cards option[value="+result.objPrefCard.Id+"]").text(result.objPrefCard.Pref_Card_Name__c);
                                    }
                                    
                                    $("#tab-surgeonPrefCard select.pref-cards").change();
                                    
                                   /* $("#new-prefcard-modal div.disposables.rte").summernote('reset');
                                    $("#new-prefcard-modal div.sutures.rte").summernote('reset');
                                    $("#new-prefcard-modal div.medications.rte").summernote('reset');
                                    $("#new-prefcard-modal div.equipment.rte").summernote('reset');
                                    $("#new-prefcard-modal div.equipment-notes.rte").summernote('reset');
                                    
                                    $("#new-prefcard-modal disposablesSummernote").summernote('destroy'); 
                                    $("#new-prefcard-modal #suturesSummernote").summernote('destroy'); 
                                    $("#new-prefcard-modal #medicationsSummernote").summernote('destroy'); 
                                    $("#new-prefcard-modal #equipmentSummernote").summernote('destroy'); 
                                    $("#new-prefcard-modal #equipment-notesSummernote").summernote('destroy');*/

                                    
                                    // hide the delete button in case this was an edit
                                    $("#new-prefcard-modal button.btn-delete-prefcard").hide();
                                    
                                    //enable the edit button
                                    $("#surgeon-detail button.btn-edit-pref-card").removeAttr("disabled");
                                    $("#surgeon-detail button.btn-pdf-pref-card").removeAttr("disabled");
                                    
                                    $("#new-prefcard-modal").modal("hide");
                                }
                                else if (event.type === 'exception')
                                {
                                    if((event.message).includes('STRING_TOO_LONG, Disposables')){
                                        console.log('The exception message is----'+event.message);
                                        console.log('The exception message ends----');
                                        $("#new-prefcard-modal span.save-error").text("Disposables exceeds the maximum character limit.");
                                    }
                                    else if((event.message).includes('STRING_TOO_LONG, Sutures'))
                                    {
                                        console.log('The exception message is----'+event.message);
                                        console.log('The exception message ends----');
                                        $("#new-prefcard-modal span.save-error").text("Sutures exceeds the maximum character limit.");
                                    }
                                    else if((event.message).includes('STRING_TOO_LONG, Biologics'))
                                    {
                                        console.log('The exception message is----'+event.message);
                                        console.log('The exception message ends----');
                                        $("#new-prefcard-modal span.save-error").text("Biologics exceeds the maximum character limit.");
                                    }
                                    else if((event.message).includes('STRING_TOO_LONG, Equipment: data value too large'))
                                    {
                                        console.log('The exception message is----'+event.message);
                                        console.log('The exception message ends----');
                                        $("#new-prefcard-modal span.save-error").text("Equipment exceeds the maximum character limit.");
                                    }
                                    else if((event.message).includes('STRING_TOO_LONG, Equipment Notes'))
                                    {
                                        console.log('The exception message is----'+event.message);
                                        console.log('The exception message ends----');
                                        $("#new-prefcard-modal span.save-error").text("Procedural Steps exceeds the maximum character limit.");
                                    }
                                                                        
                                    $("#new-prefcard-modal button.btn-save-prefcard").text(btnTxt);
                                    $("#new-prefcard-modal button").removeAttr("disabled");
                                }
                            });                     
        
                          }
        
                        });

                    });
                    
                    $("#new-prefcard-modal").on("hidden.bs.modal"  , function (e) {  
                          $("#new-prefcard-modal").removeAttr("data-current-practioner-id");
                          $("#new-prefcard-modal").removeAttr("data-record-id");
                          $("#new-prefcard-modal .btn-save-prefcard").removeAttr('disabled');
                          $("#new-prefcard-modal input.procedure").removeAttr("data-record-id");
                          $("#new-prefcard-modal #select-procedure").selectpicker('show');
                          $("#new-prefcard-modal input.procedure").removeAttr("data-record-name");
                          $("#new-prefcard-modal #procedures").val(''); 
                          $("#new-prefcard-modal input.procedure").val('');
                          $("#new-prefcard-modal input.card-products-typeahead").val('');
                          $("#new-prefcard-modal input.prefCardName").val('');
                          $("#new-prefcard-modal input.surgical-technique").val('');
                          $("#new-prefcard-modal input.surgical-technique").removeAttr("data-record-id");
                          $("#new-prefcard-modal input.surgical-technique").removeAttr("data-record-name"); 
                          $("#new-prefcard-modal textarea.position").val('');
                          $("#new-prefcard-modal div.products").empty();
                          $("#new-prefcard-modal .productteam tbody").empty();
                          $("#new-prefcard-modal .product-parts tbody").empty(); 
                          $("#new-prefcard-modal input.opportunity-part-number").val('');
                          $("#new-prefcard-modal input.opportunity-part-description").val('');
                          $("#new-prefcard-modal input.opportunity-part-quantity").val('');
                          $("#new-prefcard-modal input.opportunity-part-unit-price").val('');
                          $("#new-prefcard-modal button.add-opp-part").attr('disabled', 'disabled');
                          $("#new-prefcard-modal .opportunity-part-unit-price").removeAttr('disabled');
                          $("#new-prefcard-modal .opportunity-part-description").removeAttr('disabled');
                          $("#new-prefcard-modal .opportunity-part-number-typeahead").removeAttr('disabled');
                          $("#new-prefcard-modal .opportunity-part-quantity").removeAttr('disabled');
                          $("#new-prefcard-modal p.opportunity-part-total-price").text('');
                          $("#new-prefcard-modal .product-parts tfoot #totalProductAmount").removeAttr("data-total");
                          $("#new-prefcard-modal .product-parts tfoot #totalProductAmount").text('-');
                           
                          $("#new-prefcard-modal div.procedures.ctag-list").empty();
                          $("#new-prefcard-modal div.surgical-technique.ctag-list").empty();
                          $("#new-prefcard-modal table#tablePrefCardTaxonomy tbody").empty();
                          $("#new-prefcard-modal .btn-delete-prefcard").removeAttr('disabled');
                          $("#new-prefcard-modal #tablePrefCardTaxonomy button").removeAttr('disabled');
                          $("#new-prefcard-modal .position").removeAttr('disabled');
                          $("#new-prefcard-modal .prefCardName").removeAttr('disabled');
                          
                         /*$("#new-prefcard-modal div.disposables.rte").summernote('enable');
                          $("#new-prefcard-modal div.sutures.rte").summernote('enable');
                          $("#new-prefcard-modal div.medications.rte").summernote('enable');
                          $("#new-prefcard-modal div.equipment.rte").summernote('enable');
                          $("#new-prefcard-modal div.equipment-notes.rte").summernote('enable');*/
                          
                          $("#new-prefcard-modal #disposablesSummernote").summernote('code', '');
                          $("#new-prefcard-modal #suturesSummernote").summernote('code', '');
                          $("#new-prefcard-modal #medicationsSummernote").summernote('code', '');
                          $("#new-prefcard-modal #equipmentSummernote").summernote('code', '');
                          $("#new-prefcard-modal #equipment-notesSummernote").summernote('code', '');
                          
                          $("#new-prefcard-modal span.modal-title-txt").text('Preference Card');        
                    });
                    
                    $("#new-prefcard-modal").on("shown.bs.modal", function () {
                        
                        console.log('##--calling show modal');
                        $("#new-prefcard-modal div#divProcedures").hide();
                        $("#new-prefcard-modal #select-procedure").empty();
                        $("#new-prefcard-modal #select-surgical-technique").empty();
                        $("#new-prefcard-modal #select-procedure").selectpicker('refresh');
                        $("#new-prefcard-modal #select-surgical-technique").selectpicker('refresh');
                
                        //  TODO: Need to prepopulate Product Teams as drop down
                        var selectList = $("#new-prefcard-modal select#select-productteam");
                        selectList.find("option:gt(0)").remove();
                        
                        Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.getAllProductTeams}",
                            function(result, event) {
                                $.each(result, function(i, v){
                                    console.log('##--Product_Category__c:' + v.Product_Category__c);
                                    $('#new-prefcard-modal #select-productteam')
                                     .append($("<option></option>")
                                        .attr("data-record-id", v.Id)
                                        .attr("value",globalDecodeEntities(v.Product_Category__c))
                                        .text(globalDecodeEntities(v.Name))); 
                            });
                        }); //  end of get all Product Teams
            
                    });   //  end of new-prefcard-modal before show 
                    
                    
                    $('#new-prefcard-modal input.opportunity-part-quantity').on('input',function(e){
                        calculatePrefProdPartsPrice(e);
                    });
                    
                    $('#new-prefcard-modal input.opportunity-part-unit-price').on('input',function(e){
                        calculatePrefProdPartsPrice(e);
                    });
                
                    $('input#edit-quantity').on('input',function(e){
                        calculateEditPartsPrice(e);
                    });
                    
                    $('.product-parts input.edit-pt-unitprice').on('input',function(e){
                        calculateEditPartsPrice(e);
                    });
                    
                    $("#new-prefcard-modal .product-parts").on("click", function(e) {
                    
                        console.log('inside part delete change'); 
                        var totalAmount = 0;
                        $("#new-prefcard-modal .product-parts tbody tr").each(function(){
                            row = $(this);
                            console.log('Total amount undefined---'+ parseFloat($(this).find("td#total").attr("data-total")));
                            var totalPrice= parseFloat($(this).find("td#total").attr("data-total"));
                            //if($(this).find("td#total").attr("data-total") != undefined){
                              if(!isNaN(totalPrice)){
                                console.log('Inside if');
                                totalAmount += parseFloat($(this).find("td#total").attr("data-total"));
                            }
                        });
                        console.log('Total amount after delete change-------mim'+totalAmount );
                        if(!isNaN(totalAmount)){
                            console.log('Inside Total if');
                            $("#new-prefcard-modal .product-parts tfoot #totalProductAmount").attr("data-total", totalAmount);
                            $("#new-prefcard-modal .product-parts tfoot #totalProductAmount").html("$" + totalAmount.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g, '$1,'));
                        }
                    });
                    
                    $('#generate-pdf-modal').on('hidden.bs.modal', function (e) {
                        console.log('Inside hidden pdf modal');
                        $('#generate-pdf-modal p.card-name').text('');
                        $('#generate-pdf-modal #generatePdfErrors').html('');
                        $("#generate-pdf-modal #pricing-chkbx").removeAttr('disabled');
                        
                    });
                    
                    $('#implants-chkbx').change(function() {
                        if($(this).is(":checked")) {
                            $("#generate-pdf-modal #pricing-chkbx").removeAttr('disabled');
                            
                        }else{
                            $("#generate-pdf-modal #pricing-chkbx").attr("disabled","true");
                            $('#generate-pdf-modal #pricing-chkbx').prop("checked", false);
                        }       
                    });
                    
                    $("#cancel-new-prefcard-modal button.btn-cancel-pref-card").on("click", function(e) {                     
                        $("#cancel-new-prefcard-modal").modal('hide');
                        $("#new-prefcard-modal").modal('hide');
                    }); //  end of cancel new pref card modal.cancel click
                
                    $("#new-prefcard-modal button.btn-cancel-new-prefcard").on("click", function() {
               
                        $("#cancel-new-prefcard-modal").modal("show");                   
                    }); //  end of new pref card modal.cancel click       
                     
                   // <!--  -----------------------------Preference Tab ENDS-------------------------------      -->    
                   
                   //Code added by Mimansha(4/17/2017) for Component CID 000177(Save Warning Modal) in Account Notes   
                   $("#cancel-account-notes-modal button.btn-cancel-account-notes-warning").on("click", function(e) {                     
                       $("#cancel-account-notes-modal").modal('hide');
                       $("#account-notes-modal").modal('hide');
                   }); //  end of cancel account notes modal.cancel click
                
                   $("#account-notes-modal button.account-notes-cancel-btn").on("click", function() {
               
                       $("#cancel-account-notes-modal").modal("show");                   
                   }); //  end of Account Notes modal.cancel click
                   
                   
                   // <!-- BIOGRAPHY TAB START -->
                   
                   // institution typeaheads
                  $("#surgeon-bio-modal input.institution-typeahead").typeahead({
                      minLength: 2,
                      source: function(query, onSuccess) {
                          
                          Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.searchInstitutions}",
                          query, function(result, event) {
                              
                              if (event.status) {
                                  
                                  onSuccess(result);
                              } else {
                                  console.log("Errors returned but no error handler found");
                              }
                          });
                      },
                      displayText: function(item) {
                          return globalDecodeEntities(item.Name);
                      },
                      afterSelect: function(item) {
                          
                          // set the record id on the bound input element
                          var input = $(this)[0].$element;
                          $(input).attr("data-record-id", item.Id);
                          $(input).attr("record-name", item.Name);
                      }
                  });
                  
                   // <!-- BIOGRAPHY TAB END --> 
                    /*Author:Ansu Routray
                      Release:4.3
                      Date Modified 28/08/2017
                      Component Id:CID-000463
                      Purpose:cancel for orthoilustrtated details for surgeon
                    */
                   $("#ortho-add-modal button.ortho-cancel-btn").on("click", function() {               
                        $("#cancel-ortho-modal").modal("show");                   
                       }); //  end of ortho modal.cancel click
                       
                   $("#cancel-ortho-modal button.btn-cancel-ortho").on("click", function(e) {                     
                           $("#cancel-ortho-modal").modal('hide');
                           $("#ortho-add-modal").modal('hide');
                      }); //  end of opp type modal.cancel click
                      
                   $('#ortho-add-modal').on('show.bs.modal', function (e) {
                        
                        //setupCreateOppModal();
                        $("#newOrthoErrors").html('');
                        $("#ortho-add-modal .course-parts tbody").empty();
                        $("#ortho-add-modal select.email").empty();
                        $("#ortho-add-modal input.course-name").val('');
                        $("#ortho-add-modal input.course-location").val('');
                        $("#ortho-add-modal .course-type").val('');
                        $("#ortho-add-modal .courseDate").val('');
                        $("#ortho-add-modal select.program-type").val('');
                        $("#multi-program div.ctag-list").empty();
                        if($("#tab-Orthoillustrated button.btn-ortho").text()=='New OI Request'){
                            console.log('button text');
                            $("#ortho-add-modal button.ortho-delete-btn").hide();
                        }
                        <!--Added else condition on 31/10/2017 by Santosh Talasu:For Delete button hide issue Release:4.4-->
                        else{
                            $("#ortho-add-modal button.ortho-delete-btn").show();
                            }
                        $("#ortho-add-modal div.course-Date-container").datetimepicker({ 
                                format: 'MM/DD/YYYY',
                                useCurrent: true,
                                showClose: true,
                                ignoreReadonly: true,
                                allowInputToggle: true
                        });
                        console.log('##--Ortho show modal:==== ' );
                        autoPopulateoOrthoModal();
                        
                        
                    }); //  end of ortho-modal.show 
                    <!-- Modified on 13/10/2017 by Santosh :For required field validation Release:4.4-->
                    $("#ortho-add-modal button.ortho-save-btn").on("click", function(e) {
                         name = $("#ortho-add-modal input.full-name").val() || "";
                         email = $("#ortho-add-modal input.email").val() || "";
                         phone = $("#ortho-add-modal input.phone").val() || "";
                         address = $("#ortho-add-modal input.address").val() || "";
                         statelicense = $("#ortho-add-modal input.statelicense").val() || "";
                         //specialties = $("#ortho-add-modal select.specialties").val() || "";
                         practicename = $("#ortho-add-modal input.practicename").val() || "";
                         website = $("#ortho-add-modal input.website").val() || "";
                         description = $("#ortho-add-modal textarea.description").val() || "";
                         firstname= $("#ortho-add-modal input.OI-FirstName").val() || "";
                         lastname= $("#ortho-add-modal input.OI-LastName").val() || "";
                         middlename= $("#ortho-add-modal input.OI-MiddleName").val() || "";
                         street= $("#ortho-add-modal input.street").val() || "";
                         city= $("#ortho-add-modal input.city").val() || "";
                         zipcode= $("#ortho-add-modal input.zipcode").val() || "";
                         country= $("#ortho-add-modal select.country").val() || "";
                         state= $("#ortho-add-modal select.state").val() || "";
                         prefix= $("#ortho-add-modal select.OI-Prefix").val() || "";
                         var hasEmptyFields = false;
                         var invalidEmail = false;
                         console.log("------Inside SAVE--");
                         //if ( name.length === 0 ) { hasEmptyFields = true;}
                         if ( firstname.length === 0 ) { hasEmptyFields = true;}
                         if ( lastname.length === 0 ) { hasEmptyFields = true;}
                         //if ( middlename.length === 0 ) { hasEmptyFields = true;}
                         //if ( email.length === 0 ) { hasEmptyFields = true;}  
                         if ( phone.length === 0 ) { hasEmptyFields = true;}
                         //if ( address.length === 0 ) { hasEmptyFields = true; }
                         if ( statelicense.length === 0 ) { hasEmptyFields = true; }
                         //if ( specialties.length === 0 ) { hasEmptyFields = true; }
                         if ( practicename.length === 0 ) { hasEmptyFields = true; }
                         if ( website.length === 0 ) { hasEmptyFields = true; }
                         if ( street.length === 0 ) { hasEmptyFields = true; }
                         if( city.length === 0 ) { hasEmptyFields = true; }
                         if( zipcode.length === 0 ) { hasEmptyFields = true; }
                         if( country === '- Select -' || country.length === 0 ) { hasEmptyFields = true; }
                         if( state === '- Select -' || state.length === 0) { hasEmptyFields = true; }
                         if( prefix === '- Select -' || prefix.length === 0) { hasEmptyFields = true; }
                         if( $("#ortho-add-modal #multi-specialty").children().length === 0 ) { hasEmptyFields = true; }
                         <!-- Modified on 13/10/2017 by Santosh : Removed email validation , as field is not free text Release:4.4-->
                         //if ( email.length > 0 ) {
                            // var validEmailRegex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                            //invalidEmail = !validEmailRegex.test(email);
                         //}
                         console.log("--------Email matrix"+$("#ortho-add-modal #email").children().length)
                         if( $("#ortho-add-modal #email").children().length === 0 ) {  
                                $("#newOrthoErrors").text("OI Email is a mandatory field, please update surgeon record with email to reflect in here.");
                                }
    
                         else if( hasEmptyFields ) {
                             
                             $("#newOrthoErrors").text("Missing required fileds");   
    
                        // } else if ( invalidEmail ) {
                         
                           //  $("#newOrthoErrors").text("Your email is not valid");   
                         
                         } else {
                            //e.preventDefault();
                            //e.stopPropagation();
                            var btnTxt = $("#ortho-add-modal button.ortho-save-btn").text();
                            $("#ortho-add-modal button.ortho-save-btn").text("Saving...");
                            $("#ortho-add-modal button").attr("disabled",true);
                             
                            var OIFirstname= $("#ortho-add-modal input.OI-FirstName").val() || "";
                            var OILastname= $("#ortho-add-modal input.OI-LastName").val() || "";                 
                            var OIMiddlename= $("#ortho-add-modal input.OI-MiddleName").val() || "";
                            var OIPhone= $("#ortho-add-modal input.phone").val() || "";
                            var OIPrefix= $("#ortho-add-modal select.OI-Prefix").val() || "";
                            var OISuffix= $("#ortho-add-modal select.OI-Suffix").val() || "";
                            var OIDesignation= $("#ortho-add-modal input.designation").val() || "";
                            var OIWebsite= $("#ortho-add-modal input.website").val() || "";
                            var OIState= $("#ortho-add-modal select.state").val() || "";
                            var OICity= $("#ortho-add-modal input.city").val() || "";
                            var OICountry= $("#ortho-add-modal select.country").val() || "";
                            var OIStreet= $("#ortho-add-modal input.street").val() || "";
                            var OIPostalcode= $("#ortho-add-modal input.zipcode").val() || "";
                            var OIEmail= $("#ortho-add-modal select.email").val() || "";
                            var OISpecialties= getMultiSelectValues($("#ortho-add-modal select.specialties")) || "";
                            var OIStatelicense= $("#ortho-add-modal input.statelicense").val() || "";
                            var OIPraciticename= $("#ortho-add-modal input.practicename").val() || "";
                            
                            var courses= [];
                            var courseIds=[];
                            var coursedts=[];
                              $("#ortho-add-modal .course-parts tbody tr").each(function(){
                                    courses.push({  'Surgeon__c' :suregeonId,
                                                    'Name' : $(this).find("p.part-name").text() || null,
                                                    'Course_Type__c' :$(this).find("p.part-type").text() ||  null,//
                                                    'Location__c' : $(this).find("p.part-location").text() || null,
                                                    'Active__c': true,
                                                    'Product_Teams__c' : $(this).find("p.part-product-type").text() || null
                                                    });
                                                    
                                    courseIds.push($(this).attr("data-part-id"));
                              }); 
                               
                            Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.saveOIData}",
                                  suregeonId,OIWebsite,OIState,OICity,OICountry,OIStreet,OIPostalcode,
                                  OIFirstname,OILastname,OIMiddlename,OISuffix,OIDesignation,
                                  OIEmail,OIPhone,OIPrefix,OISpecialties,OIStatelicense,OIPraciticename,courseIds,courses,
                                  function(result, event) {
                                    $("#ortho-add-modal button.ortho-save-btn").text(btnTxt);
                                    $("#ortho-add-modal button").removeAttr("disabled");
                                    displaySurgeonOrthoillustrated(suregeonId);
                        
                                    $("#ortho-add-modal").modal("hide"); 
                                  
                                  
                            });
                           
                            
                           
                            
                         }  //  end of if-else
                    });
                    <!-- Modified on 13/10/2017 by Santosh Release:4.4-->
                    function autoPopulateoOrthoModal()
                    {
                        // load in the email list
                       
                      Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveOrthoEmailValues}",
                        suregeonId,
                        function(result, event) {                    
                          console.log('email values---'+JSON.stringify(result)); 
                          for ( var i=result.length-1; i >=0 ; i--) {
                            var txt = globalDecodeEntities(result[i]);
                            $("#ortho-add-modal select.email").append("<option value='"+txt+"'>"+txt+"</option>");
                          }          
                      });
                        Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveSurgeonOrthoillustrated}",
                         suregeonId,
                         function(results, event) {
                             console.log('results ortho modal======'+JSON.stringify(results));
                             var isOIActive = results.OIActive;
                             console.log('----Values Avtive---'+isOIActive);
                             
                             if(isOIActive)
                             {
                             console.log('--------Inside if---------');
                             $("#ortho-add-modal input.OI-FirstName").val(results.orthoSurgeon.OI_First_Name__c);
                             $("#ortho-add-modal input.OI-LastName").val(results.orthoSurgeon.OI_Last_Name__c);
                             $("#ortho-add-modal input.OI-MiddleName").val(results.orthoSurgeon.OI_Middle_Name__c);
                             $("#ortho-add-modal select.OI-Suffix").val(results.orthoSurgeon.OI_Suffix__c);
                             $("#ortho-add-modal select.OI-Prefix").val(results.orthoSurgeon.OI_Prefix__c);
                             $("#ortho-add-modal input.phone").val(results.orthoSurgeon.PersonOtherPhone);
                             $("#ortho-add-modal input.website").val(results.orthoSurgeon.OI_Website__c);
                             $("#ortho-add-modal input.practicename").val(results.orthoSurgeon.OI_Practice_Name__c);
                             $("#ortho-add-modal input.city").val(results.orthoSurgeon.PersonOtherCity);
                             $("#ortho-add-modal input.street").val(results.orthoSurgeon.PersonOtherStreet);
                             $("#ortho-add-modal select.state").val(results.orthoSurgeon.PersonOtherState);
                             $("#ortho-add-modal input.zipcode").val(results.orthoSurgeon.PersonOtherPostalCode);
                             $("#ortho-add-modal select.country").val(results.orthoSurgeon.PersonOtherCountry);
                             $("#ortho-add-modal input.statelicense").val(results.orthoSurgeon.State_License__c);
                             $("#ortho-add-modal input.specialties").val(results.Specialties);
                             $("#ortho-add-modal select.email").val(results.orthoSurgeon.OI_Email__c);
                             <!-- Modified on 13/10/2017 by Santosh :Added additional validation for Spliting Specialties values Release:4.4-->
                             if(results.Specialties != undefined)
                             {
                                 var  specialties=(results.Specialties).split(";");
                                 
                                 console.log('specialties-=-'+specialties    );
                                 $.each(specialties, function(i,v){
                                     $("#ortho-add-modal div.ctag-list").append(obj2ctag({
                                      Name: globalDecodeEntities(v),
                                      Id: v
                                      }));
                                  });            
                              }
                             $.each(results.orthoCourse, function(i,v){
                                      console.log('v.Active__c======'+v.Active__c);
                                      if(v.Active__c==true)
                                       {
                                          var row_id = v.Id;
                                          $("#ortho-add-modal .course-parts tbody").append('<tr data-part-id="'+v.Id+'" ><td class="name-marker"><p class="form-control-static part-name">'+v.Name+'</p></td><td class="type-marker"><p class="form-control-static part-type">'+v.Course_Type__c+'</p></td><td class="date-marker"><p class="form-control-static part-date">'+dateOnlyFormatter(v.Course_Date__c)+'</p></td><td class="location-marker"><p class="form-control-static part-location">'+v.Location__c+'</p></td><td class="team-marker" ><p class="form-control-static part-product-type">'+v.Product_Teams__c+'</p></td><td class="pull-right" style="padding-left:15px"><button type="button"  class="btn btn-xs btn-primary pt-edit-btn" onclick="editCoursePart(\''+row_id+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger pt-del-btn" onclick="courseDeleteConfirm(\''+row_id+'\')">Delete</button></td>');
                                       }
                                      }); //  end of for-each product
                             $("#multi-program div.ctag-list").empty();
                         }
                         //else start
                         else
                         {
                         console.log('--------Inside else---------'+results.orthoSurgeon.Phone);
                            $("#ortho-add-modal input.OI-FirstName").val(results.orthoSurgeon.FirstName);
                            $("#ortho-add-modal input.OI-LastName").val(results.orthoSurgeon.LastName);
                            $("#ortho-add-modal input.OI-MiddleName").val(results.orthoSurgeon.MiddleName);
                            $("#ortho-add-modal input.website").val(results.orthoSurgeon.Website);
                            $("#ortho-add-modal input.practicename").val(results.orthoSurgeon.Practice_Name__c);
                            $("#ortho-add-modal select.country").val(results.orthoSurgeon.PersonMailingCountry);
                            $("#ortho-add-modal input.street").val(results.orthoSurgeon.PersonMailingStreet);
                            $("#ortho-add-modal input.city").val(results.orthoSurgeon.PersonMailingCity);
                            $("#ortho-add-modal select.state").val(results.orthoSurgeon.PersonMailingState);
                            $("#ortho-add-modal input.zipcode").val(results.orthoSurgeon.PersonMailingPostalCode);
                            $("#ortho-add-modal select.OI-Suffix").val(results.orthoSurgeon.Suffix);
                            $("#ortho-add-modal select.OI-Prefix").val(results.orthoSurgeon.Salutation);
                            $("#ortho-add-modal input.phone").val(results.orthoSurgeon.Phone);
                            $("#ortho-add-modal select.email").val(results.orthoSurgeon.PersonEmail);
                         }
                         });
                         
                    }
                   //Addition by Ansu for OI requirement ends
                   
                   // <!--  Accounts Tab START -->  
                    //Swetha P - changed nickName to nickname to populate nick name in affiliations in surgeon tab  
                   var accountGridColDef = [
                            {headerName: "SAP Name", field: "name", colId: "name",  headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell-href'],
                                cellStyle: {color: '#3A9DDB'},cellRenderer: cellHeight},                           
                            {headerName: "Nick Name", field: "nickname",  colId: "nickname", headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell-href'],cellRenderer: cellHeight},
                            {headerName: "Account Number", field: "accNumber",  colId: "accNumber", headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell-href'],cellRenderer: cellHeight}, 
                            {headerName: "Work Phone", field: "phone", colId: "phone", headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell-href'],
                            cellStyle: {color: '#3A9DDB', cursor: 'pointer'}, cellRenderer: cellHeight}                        
                        ];  
                   function populateAccountList(){
                        var pageNum = 1;
                        var rowsPerPage =  20;
                         $("#add-account-affiliation-modal").attr("data-account-id", suregeonId);
                         
                         Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveAccountAffiliationsByPractitioner}",
                         suregeonId,
                         function(results, event) {
                            var htm="";           
                              var rows = [];
                              for ( var i=0; i < results.length; i++) {
                                //alert(JSON.stringify(results[i].Id));
                                rows.push({
                                  name: globalDecodeEntities(results[i].LastName)+", "+globalDecodeEntities(results[i].FirstName),
                                  title: globalDecodeEntities(results[i].PersonTitle),
                                  email: results[i].PersonEmail,
                                  phone: results[i].objAff.Account_hcp__r.Phone,
                                  editable: results[i].editable,
                                  nickname: results[i].strNickName,
                                  name: results[i].objAff.Account_hcp__r.Name,
                                  accNumber: results[i].objAff.Account_hcp__r.Customer_Number__c,
                                  accId: results[i].objAff.Account_hcp__c,
                                  affId: results[i].objAff.Id,
                                  accName: results[i].objAff.Account_hcp__r.Name,
                                  contact: results[i]
                                });
                                
                                htm += "<div id='"+results[i].objAff.Id+"' data-account-id='"+results[i].objAff.Account_hcp__c+"'></div>";
                               
                              }
                              
                              $("#accountsTag").html(htm);
                              document.querySelector('#accountGrid').innerHTML = '';
                              
                               
                                new agGrid.Grid(document.querySelector('#accountGrid'), accountGridOptions);
                                accountGridOptions.rowHeight = 40;
                                accountGridOptions.api.setColumnDefs(accountGridColDef);
                                for (var i=0; i<results.length; i++) {
                                    
                                    if(results[i].objAff.Account_hcp__r.Preferred_Name__c == undefined){
                                        results[i].objAff.Account_hcp__r.Preferred_Name__c = results[i].objAff.Account_hcp__r.Name;
                                    }
                                }
                                accountGridOptions.api.setRowData(rows,'account');
                                accountGridOptions.api.addEventListener("rowSelected", displayAddSurgeonModal);
                                accountGridOptions.api.sizeColumnsToFit();                                
                        });
                        
                        //Display typeahead for surgeon affliations                
                        populateSurgeons();
                    }   //  end of populateAccountList  
                 
      
      
      
                   
                    function showDetails(event){ 
                
                        var accDetails = accountGridOptions.api.getSelectedRows();
                        console.log('inside show details======');
                        if((accountGridOptions.api.getFocusedCell()).toString().split("column =")[1].trim() == "accName"){
                            window.location = "/apex/ARAccountDetail?id=" + accDetails[0].Account_hcp__c;
                        }
                        
                        if((accountGridOptions.api.getFocusedCell()).toString().split("column =")[1].trim() == "workPhone"){
                            window.location = "tel:"+ accDetails[0].Phone;
                        }
                        
                        //window.location = "/axis/ARAccountDetail";                    
                    }   //  end of showDetails 
                    
                    function displayAddSurgeonModal(){
                                
                            console.log('surgeon row clicked-');
                            
                            var surgDetails = accountGridOptions.api.getSelectedRows();
                            var cellDetails = accountGridOptions.api.getFocusedCell();
                            
                            if(surgDetails.length==1)
                            {
                            
                            if(cellDetails.column.colId=="name" || cellDetails.column.colId=="email" || cellDetails.column.colId=="phone")
                            {                                
                                if(cellDetails.column.colId=="name" && surgDetails[0].editable==true)                                
                                {                                
                                    window.location = "/ARAccountDetail?id=" + surgDetails[0].accId;
                                }                                
                                else if(cellDetails.column.colId=="phone" && surgDetails[0].phone != undefined && surgDetails[0].editable==true)                                
                                {
                                     window.location = "tel:"+surgDetails[0].phone;
                                }
                            }
                            else
                            {                                
                                if(surgDetails[0]!=undefined && surgDetails[0].editable==true && (cellDetails.column.colId=="nickname" || cellDetails.column.colId=="accNumber")){ 
                                    $("#add-account-affiliation-modal span.save-error").text("");
                                    $("#add-account-affiliation-modal").attr("data-record-id", surgDetails[0].affId);
                                    
                                    var accNameTemp = '';
                                    
                                    var parser = new DOMParser;
                                    
                                    accNameTemp = parser.parseFromString(surgDetails[0].accName, 'text/html').body.textContent;
                                    $("#add-account-affiliation-modal input.account-typeahead").val(accNameTemp);
                                    $("#add-account-affiliation-modal").attr("data-surgeon-id", surgDetails[0].accId);
                                    $(this).attr("data-surgeon-id", surgDetails[0].accId);
                                    $("#add-account-affiliation-modal button.btn-delete").show();
                                    $("#add-account-affiliation-modal button.btn-save").hide();                    
                                    $("#add-account-affiliation-modal").modal("show");
                                    $("#add-account-affiliation-modal input").attr("disabled",true);
                                }
                            }
                            }
                           populateAccountList(); 
                     }
                     
                   // <!--  Accounts Tab END -->  
                   
                   function validateEmail(email) {
                    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                    return re.test(email);
                   }
                   
                  
                   // <!-- Related Contacts Tab  START -->
                                      
                   function displayRelatedContactModal(){
                         console.log('contact row clicked-');
                            //contactGridOptions.api.addEventListener("cellClicked", displayRelatedContactModal);
                            var conDetails = contactGridOptions.api.getSelectedRows();
                            console.log('contact row clicked-'+conDetails[0].contact.FirstName);
                            var cellDetails = contactGridOptions.api.getFocusedCell();
                            
                            if(conDetails.length==1)
                            {
                                if(cellDetails.column.colId=="email" || cellDetails.column.colId=="phone")
                                {
                                    if(cellDetails.column.colId=="email" && conDetails[0].email != undefined)                                
                                    {
                                        window.location = "mailto:"+conDetails[0].email;
                                    }
                                    else if(cellDetails.column.colId=="phone" && conDetails[0].phone != undefined)                                
                                    {
                                         window.location = "tel:"+conDetails[0].phone;
                                    }
                                    
                                }
                                else
                                {
                                    var mobPhone=formatPhone(conDetails[0].contact.MobilePhone);
                                    $("#spnPhone").html("validated").hide();
                                    $("#spnMobilePhone").html("validated").hide();
                                      
                                    $("#provider-contact-modal").attr("data-record-id", conDetails[0].contact.Id);
                                      
                                   
                                    $("#provider-contact-modal input.firstName").val(conDetails[0].contact.FirstName);
                                    $("#provider-contact-modal input.lastName").val(conDetails[0].contact.LastName);
                                    $("#provider-contact-modal input.title").val(conDetails[0].contact.PersonTitle);
                                    $("#provider-contact-modal input.email").val(conDetails[0].contact.PersonEmail);
                                    $("#provider-contact-modal input.phone").val(conDetails[0].phone);
                                    $("#provider-contact-modal input.mobile").val(conDetails[0].contact.PersonMobilePhone);
                                    $("#provider-contact-modal input.street").val(conDetails[0].contact.MailingStreet);
                                    $("#provider-contact-modal input.city").val(conDetails[0].contact.MailingCity);
                                    $("#provider-contact-modal select.state").val(conDetails[0].contact.MailingState);
                                    $("#provider-contact-modal input.zip").val(conDetails[0].contact.MailingPostalCode);
                                    $("#provider-contact-modal textarea.notes").val(conDetails[0].contact.Description); 
            
            
                                    $("#provider-contact-modal button.btn-delete").show();
                                    $("#provider-contact-modal").modal("show");
                                }
                            }
                            displayProviderRelatedContacts(suregeonId);
                     }
                     
                     
                     function cellHeight(params){          
                        console.log('params.data.editable====='+params.data.editable);
                        var valueAttr = "";
                        if(params.value != undefined){
                             valueAttr = params.value;
                        }
                        if(params.data.editable==true)
                        {                            
                            return '<span style="cursor:pointer;line-height: 25px">'+ valueAttr +'</span>';
                        }
                        else
                        {
                            return '<span style="cursor:initial; color:#676a6c;font-size: 13px;font-family: "open sans", "Helvetica Neue", Helvetica, Arial, sans-serif;cursor: default" onclick=\'return false;\' >'+ valueAttr +'</span>';
                        }
                        
                      }
                     function formatPhone(phNumber){
                         var phone=phNumber || "";
                         var numOnlyPhone=phone.replace(/[^0-9]/g, "");
                         var formattedPhone=phone==""?"":"("+ numOnlyPhone.slice(0, 3) + ") " + numOnlyPhone.slice(3,6)+"-"+numOnlyPhone.slice(6);
                         return formattedPhone;                     
                     } 
                   
                   // <!-- Related Contacts Tab  END -->
                          
                  // Marks a select option as selected based on the option label for the given select element (supports multi-select)
                  var setSelectedValueByLabel = function setSelectedValueByLabel(el, label) {
                      
                      if ( Array.isArray(label) ) {
                        // this is an array of values so a multi-select
                        
                        for ( var i=0; i < label.length; i++) {
                            // add ctags
                            val = "0";
                           $(el).find("option").each(function() {
                              if ( $(this).text() === label[i] ) {
                                  val = $(this).val();
                                    var tag = '<span class="ctag alert alert-info" data-record-id="'+val+'">';
                                    tag += globalDecodeEntities(label[i])+'&nbsp;<span data-role="remove-tag"></span></span>';
                                    $(el).next("div.ctag-list").append(tag);
                                }
                            });             
                        }
                          
                      } else {
                          // single select, just set the val, if we can't find by label then just set the val and hope for the best
                          var found = false;
                          $(el).find("option").each(function() {
                            if ( $(this).text() === label ) {
                              val = $(this).val();
                                $(el).val(val);
                                found = true;
                            }
                          });
            
                          if ( !found ) {
                            $(el).val(label);
                          }
                      }
                  };
            });
            
            
           // <!-- ACTIVITY Tab START -->
                   
                    function loadAccountActivities(activityType){
                       
                       console.log('##--activityType:'+ activityType);
                       console.log('##--loadAccActivities.accId:'+ suregeonId);

                        // added by chad for 4.1
                        // store activities in a global object to make setting up the links much easier
                        window.surgActivities = {};

                       $("i.divNextSteps-busy").show();
                       $("i.divCompletedSteps-busy").show();
                       Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retreiveActivities}",
                               activityType,//'All Activities',
                               suregeonId,
                               function(result, event) {
                                   
                                   if(event.statusCode == 200){
                                       // clear the existing activities
                                       $("#divNextSteps").empty();
                                       $("#divCompletedSteps").empty();
                                       
                                       $.each(result, function(i, v){
                                           

                                           surgActivities[v.acc.recId] = v.acc;

                                           htm = constructActivity(v);

                                           if(v.acc.activityType == 'OPPORTUNITY')
                                           {                                               
                                               if(v.acc.stage=='Closed - Won' || v.acc.stage=='Closed - Lost' || v.acc.stage=='Cancelled')
                                               {
                                                   $("#divCompletedSteps").append(htm);
                                               }
                                               else
                                               {    
                                                   $("#divNextSteps").append(htm);
                                               }
                                           }
                                           else if ( v.acc.activityType  == 'TASK') {
                                                if ( v.acc.stage == 'Completed') {
                                                    $("#divCompletedSteps").append(htm);
                                                } else {
                                                    $("#divNextSteps").append(htm);
                                                }

                                           } else {

                                               if(moment(v.acc.logDate).isSameOrBefore(moment())){ //  moment().startOf('day')
                                                  console.log('iff----'+v.acc.logDate);
                                                   $("#divCompletedSteps").append(htm);
                                               } else{
                                               console.log('else----'+v.acc.logDate);
                                                   $("#divNextSteps").append(htm);
                                               }
                                            }   
                                           
                                       }); //  end of for-each activity
                                       $("i.divNextSteps-busy").hide();
                                       $("i.divCompletedSteps-busy").hide();
                                   }
                           }); //  end of remote call to get the existing Activites
                      }   //  end of loadAccountActivities
                      
                     function showAddNotes(){
                        $("#account-notes-modal span#addNoteErrors").html('');
                        $("#account-notes-modal #accNoteDate").html(dateFormatter(moment()));
                        $("#account-notes-modal #accNotes").val('');
                        $("#account-notes-modal").modal('show');                        
                        $("#account-notes-modal button.btn-delete" ).hide();
                        }   //  end of showAddNotes
                      
                      // added by chad
                        function showAddTasks(){
                          $("h4.modal-title.create").show();
                          $("h4.modal-title.edit").hide();
                          $("#task-edit-modal").modal('show');
                        }  
                      // end added by chad
                      
                      
                    function editTask(taskId){

                        // editing a task
                        $("h4.modal-title.create").hide();
                        $("h4.modal-title.edit").show();
                        
                        Visualforce.remoting.Manager.invokeAction("CS_ARContactsCC.retrieveMyTaskDetail", taskId,
                        function(t, event) {
                            $(".task-busy").hide();
                            if ( event.status ) {
                                $("#task-modal .modal-title.create").hide();
                                $("#task-modal .hide-on-create").show();
                                $("#task-modal .modal-title.edit").show();
                                $("#task-modal .delete").show();

                                $("#task-modal select.task-type").attr("disabled",true);
                                
                                $("#task-modal").attr("data-record-id", taskId);
                                
                                // priority button
                                $("#task-modal button.priority").each(function() {
                                    if ( $(this).attr("data-value") == t.priority ) {
                                        $(this).removeClass("btn-default").addClass("btn-primary");
                                    } else if ( $(this).hasClass("btn-primary") ) {
                                        $(this).removeClass("btn-primary").addClass("btn-default");
                                    }
                                });

                                // status button
                                $("#task-modal button.status").each(function() {
                                    if ( $(this).attr("data-value") == t.status ) {
                                        $(this).removeClass("btn-default").addClass("btn-primary");
                                    } else if ( $(this).hasClass("btn-primary") ) {
                                        $(this).removeClass("btn-primary").addClass("btn-default");
                                    }
                                });

                                // subject picklist or freeform text
                                // always use the free-form input by not populating the select pull down - chad 2017-06-22
                                var found = false;
                                $("#task-modal select.subject option").each(function() {
                                    
                                    var optionVal = $(this).val();

                                    /*
                                    if ( t.subject == optionVal ) {
                                        $(this).attr("selected",true);
                                        found = true;
                                    } else {
                                        $(this).removeAttr("selected");
                                    }
                                    */
                                    
                                    

                                });

                                if ( !found && typeof t.subject !== 'undefined' && t.subject.length > 0 ) {
                                    // subject wasn't in picklist but it does exist show it in the freeform text
                                    $("#task-modal select.subject").hide();
                                    $("#task-modal .other-subject").show();
                                    $("#task-modal input.other-subject").val(globalDecodeEntities(t.subject));
                                }

                                $("#task-modal .association-label").text(t.taskType);
                                
                                var taskTypeValue = t.taskType.toLowerCase();
                                if ( taskTypeValue == "surgical case") { 
                                    taskTypeValue = "case"; 
                                } 
                                if(t.isFollowUpTask){
                                    $("#task-modal select.task-type").append("<option value='follow-up'>Lead Follow-up</option>");
                                    $("#task-modal select.task-type").val("follow-up");
                                    $("#task-modal .task-type-label").text("Lead Follow-up");
                                } else if(taskTypeValue == 'leads app' ) {
                                    $("#task-modal select.task-type").append("<option value='leads-app'>Leads App</option>");
                                    $("#task-modal select.task-type").val("leads-app");
                                    $("#task-modal .task-type-label").text("Leads App");
                                }else{
                                    $("#task-modal select.task-type").val( taskTypeValue );
                                }

                                // set the task modal header
                                var taskTypeLabel = $("#task-modal select.task-type").find("option:selected").text();
                                $("#task-modal .task-type-label").text( taskTypeLabel );


                                var recordId = t.sourceId;
                                var name = t.source;                           

                                $("#task-modal .associated-object").val(name);
                                $("#task-modal .associated-object").attr("data-record-id", recordId);  
                                $("#task-modal input.account").attr("data-record-id", recordId).val(name);                       
                                $("#task-modal .association-container").show();
                                $("#task-modal button.association-button").hide();
                                
                                $("#task-modal div.ctag-list.surgeon").empty();
                                var lstTaskRelations = t.lstTaskRelations;
                                for ( var i=0; i < lstTaskRelations.length; i++ ) {
                                
                                    $("#task-modal div.ctag-list.surgeon").append(obj2ctag({
                                      Name: globalDecodeEntities(lstTaskRelations[i].Relation.Name),
                                      Id: lstTaskRelations[i].RelationId
                                    }));
                
                                }
                                /*$("#task-modal div.ctag-list.surgeon").append(obj2ctag({
                                    Id: $("#caseDetailsView input#surgeonId").val(),
                                    Name: $("div.surgeonName").first().text()
                                }));*/
                                                                     
                                $("#task-modal .account-container").show();
                                $("#task-modal .surgeon-container").show();
                                if ( t.teamId ) {
                                    
                                    // set the team and trigger change to update the task owner list

                                    $("#treeTaskTeam").one("team.tree.created", function() {

                                        // put this at the end of the task queue to try and further reduce race conditions
                                        window.setTimeout(function() {
                                            DDTEAMTREE=true;
                                            $("#task-modal #taskTeamButton").closest("div.dropdown").find("input[value='"+t.teamId+"']").click(); 
                                        });

                                    });

                                }

                                // the other misc inputs
                                $("#task-modal input.dueDate").val(t.s_dueDate);
                                $("#task-modal textarea.description").val(globalDecodeEntities(t.description));
                                $("#task-modal select.task-owner").val(t.taskOwnerId);     

                                $("#task-modal span.createdBy").text(globalDecodeEntities(t.createdBy));
                            
                                // the task owner list is built using a remoting call, we need to wait until it's finished
                                // before setting the owner
                                $("#task-modal #taskTeamButton").one("task.team.changed", function() {
                                    $("#task-modal select.task-owner").val(t.taskOwnerId).change();
                                });                           

                                $("#task-modal").modal("show");
                                
                            } else {

                                $("span.my-task-error").text(" - "+event.message);
                            }
                        });
                        
                    } 

                      var noteId;
                      function deleteNote(){
                          $("#delete-Note-modal").modal("show");                       
                      }
                        
                      function linkActivity(act){

                        var type = act.activityType;
                        var recId = act.recId;

                        if(type=='EVENT')
                        {
                            window.location="/AREventsDetail?id="+recId;
                        }
                        if(type=='NOTE')
                        {
                            editNote(act);                         
                        }
                        if(type=='OPPORTUNITY')
                        {
                            window.location ="/AROpportunityDetail?id="+recId;
                        }
                        if(type=='TASK')
                        {
                            editTask(recId);
                        }
                        /*
                            Vishnu Release 4.4
                                To show the lead details
                         */
                         else if(type == 'LEAD'){
                            showLeadDetails(act);
                         }                        
                      }                      

                      function getUIClassForActivity(type){
                        switch(type){
                            case "LOG":
                                return "fa fa-folder-open-o fa-1x fa-inverse fa-border fa-meeting-log";
                            case "EVENT":
                                return "fa fa-calendar fa-1x fa-inverse fa-border fa-meeting-surgicalcase";
                            case "NOTE":
                                return "fa fa-pencil-square-o fa-1x fa-inverse fa-border fa-meeting-note";
                            case "TASK":
                                return "fa fa-tasks fa-rotate-180 fa-1x fa-inverse fa-border fa-meeting-task"; 
                            case "OPPORTUNITY":
                                return "fa fa-pencil-square-o fa-1x fa-inverse fa-border fa-line-chart";       
                            case "Visit":
                                return "fa fa-clock-o fa-1x fa-inverse fa-border fa-marketing-visit";
                            case "Email":
                                return "fa fa-envelope-o fa-1x fa-inverse fa-border fa-marketing-email";
                            case "LEAD":
                                return "fa fa-star fa-1x fa-inverse fa-border fa-meeting-lead";
                        
                        }   //  end of switch
                        
                        //fa fa-calendar fa-2x fa-inverse fa-border fa-meeting-background
                    }   //  end of getUIClassForActivity
                    
                    function constructActivity(v){
                           var notes;
                           var link;
                           var username=$('.uname').text();
                           var iconStyle="";
                           
                           var notesparam= (v.acc.notes);
                            if ( typeof notesparam === "undefined" ) { 
                                 notesparam = ""; 
                            } else {
                                 notesparam = globalDecodeEntities(notesparam);
                            }
                              
                            var styleStr = "";        
                            if(v.acc.activityType=='EVENT' || v.acc.activityType=='OPPORTUNITY' || (v.acc.activityType=='NOTE' && v.acc.logOwner==username) || v.acc.activityType=='TASK' || v.acc.activityType=='LEAD') {                           
                    
                                if(v.acc.activityType =='OPPORTUNITY') {
                                  iconStyle='style="background-color:#800080 !important"';  
                                }

                                styleStr = "style='cursor:pointer;color:#3A9DDB;padding-left:0px;'";

                            } else {
                                  link ='style="padding-left:0px"'; 
                                  styleStr = 'style="padding-left:0px"'; 
                            }

                           htm = '<div class="col-sm-12 form-group detail_div" data-record-id="'+v.acc.recId+'"> '+
                                   '     <div class="col-sm-1 form-group detail_div axis-detail-pg-data-href" style="margin-bottom:5px !important" >  '+
                                   '         <i class="'+getUIClassForActivity(v.acc.activityType)+'"  '+iconStyle+'  ></i> '+
                                   '     </div> '+
                                   '     <div id="'+v.acc.recId+'" class="col-sm-8 form-group detail_div" style="word-break:normal;padding:0 !important"> ';
                                   
                                   if(v.acc.activityType=='LEAD' && v.acc.stage=="Registered"){
                                        htm += '         <div class="col-sm-12 form-group '+v.acc.activityType+'"  style="padding-left:0px;" data-type="textarea" >';
                                    } else{
                                        htm += '         <div class="col-sm-12 form-group activity-link '+v.acc.activityType+'" '+styleStr+' data-type="textarea" >';
                                    }

                            htm += '         '+v.acc.activityType+''+                                 
                                   '         </div> ';
                                   if(v.acc.activityType =='LEAD'){
                                        htm += '         <span class="notes">'+ v.acc.source + ' - ' + v.acc.stage + '</span>'+  
                                                '     </div> ';
                                   } else{
                                        htm += '         <span class="notes">'+notesparam + '</span>'+  
                                                '     </div> ';
                                   }
                                   

                                  if(v.acc.activityType =='LEAD'){
                                    htm += '     <div  class="col-sm-3 form-group detail_div" style="padding-left:0px;padding-right:0px;" > '+' <br/> '+
                                           '         '+ dateFormatterLead(v.acc.logDate) +
                                           '     </div> '+                                 
                                           ' </div>';
                                  } else {
                                    htm +=' <div  class="col-sm-3 form-group detail_div" style="padding-left:0px;padding-right:0px;" > '+ 
                                     '         '+ v.acc.logOwner +' <br/> '+
                                     '         '+ dateFormatter(v.acc.logDate) +
                                     '     </div> '+                                 
                                     ' </div>';
                                  }


                          return htm;                             

/*
                           if(v.acc.activityType=='SURGICAL CASE' || v.acc.activityType=='OPPORTUNITY' || (v.acc.activityType=='NOTE' && v.acc.logOwner==username || v.acc.activityType=='TASK'))                           
                           {

                               var notesparam= (v.acc.notes);
                                if ( typeof notesparam === "undefined" || notesparam == null ) { 
                                   notesparam = ""; 
                                } else {
                                   notesparam = globalDecodeEntities(notesparam);
                                }

                               var noteescapequot= notesparam.replace(/&quot/g, '\\y~');  
             
                               link ="style='cursor:pointer;color:#3A9DDB;padding-left:0px;' onclick='linkActivity(\""+v.acc.recId+"\",\""+v.acc.activityType+"\",\""+v.acc.logOwner+"\",\""+noteescapequot+"\");'";
                               if(v.acc.activityType =='OPPORTUNITY')
                               {
                                 iconStyle='style="background-color:#800080 !important"';  
                               }
                           }                           
                           else {link ='style="padding-left:0px"';}
                            var dateDisplay;
                           if(v.acc.activityType=='OPPORTUNITY'){
                               dateDisplay = moment(v.acc.logDate).format("MM-DD-YYYY");
                           }else{
                               dateDisplay = moment(v.acc.logDate).format("MM-DD-YYYY h:mm A")
                           }
                           htm = '<div class="col-sm-12 form-group detail_div" data-record-id="'+v.acc.recId+'"> '+
                                 '     <div class="col-sm-1 form-group detail_div axis-detail-pg-data-href" style="margin-bottom:5px !important">  '+
                                 '         <i class="'+getUIClassForActivity(v.acc.activityType)+'"  '+iconStyle+'  ></i> '+
                                 '     </div> '+
                                 '     <div id="'+v.acc.recId+'" class="col-sm-8 form-group detail_div"   style="word-break:break-all;padding:0 !important"> '+
                                 '         <div class="col-sm-12 form-group '+v.acc.activityType+'" data-type="textarea"   data-underline="false" '+link+' >'+ 
                                 '         '+v.acc.activityType+''+                                 
                                 '         </div> '+                                 
                                 '         <span class="notes">'+globalDecodeEntities(v.acc.notes)+'</span>'+
                                 '     </div> '+
                                 '     <div  class="col-sm-3 form-group detail_div" style="padding-left:0px;padding-right:0px;" > '+ 
                                 '         '+ v.acc.logOwner +' <br/> '+
                                 '         '+ dateDisplay +
                                 '     </div> '+                                 
                                 ' </div>';
                           return htm;
                           */
                     }   //  end of constructActivity
                     
                     function dateFormatter(val){
                        //return moment(val).format('M/D/YYYY');
                        return moment(val).format("MM-DD-YYYY h:mm A");//YYYY-MM-DD, hh:mm:ss);
                    }
                    
                    function dateFormatterLead(val){
                        //return moment(val).format('M/D/YYYY');
                        return moment(val).format("MM/DD/YYYY");//YYYY-MM-DD, hh:mm:ss);
                    }                                                          
                    
                    var noteId;
                    
                    function editNote(act){

                        var recId = act.recId;
                        var activityType = act.activityType;
                        var notes = "";
                        if ( act.notes ) {
                            notes = act.notes;
                        }
                        var logOwner = act.logOwner;

                        $("#account-notes-modal span#addNoteErrors").html('');
                        var username=$('.uname').text();
                        if(logOwner!=username)
                        {
                            return;
                        }
                        else if(activityType=='NOTE' && logOwner==username)
                        {
                              $('#account-notes-modal').modal('show'); 
                              $("#account-notes-modal #accNoteDate").html(dateFormatter(moment()));
                              $('#account-notes-modal').attr('data-rec-id',recId) ;
                              notes=notes.replace(/y~;/g, '\"'); 
                              $("#account-notes-modal #accNotes").val(globalDecodeEntities(notes));
                              $("#account-notes-modal button.btn-delete" ).show();
                              noteId = recId;                      
                        }
                    
                    }
                    
                    function updateNoteFun(noteId,note) {
                        console.log('url save-----');
                        
                        Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.updateNote}",
                            noteId, note,
                            function(result, event) {
                                if(event.statusCode == 200){
                                    
                                    loadAccountActivities($("#tab-accountActivity select#activityFilter").val());
                                    
                                    $('#account-notes-modal').modal('hide');
                                }
                        }); //  end of remote call to save linked acc
                        $('#account-notes-modal').attr('data-rec-id',"") 
                    }
                    
                    /**
                    * @author Original: Swetha Penmethsa TCS, Last Modified:  Aug/15/2017
                    * @release: 4.3
                    * @component: CID-000447
                    * @description: Minor Edits on Surgeon Page 
                    */
                    function makeCall(numtype) {
                        //var email =.text; 
                        var num="";
                        var link="";
                        var websiteLink="";
                        if(numtype=='web')
                        {
                            num = $('#provider-header a.website').text();
                            console.log('num =='+num );
                            if(num.toLowerCase().search( "https" )!=-1 || num.toLowerCase().search( "http" )!=-1)
                            {
                                link=num;  
                            }
                            else
                            {
                                link= "http://"+num;
                            }
                            
                           $("a.website").attr("href",link);                           
                           
                        }
                        else if (numtype=='mainSecWeb')
                        {
                            num = $('#surgeonDetailView a.website').text().replace("https://","");
                            if(num.toLowerCase().search( "https" )!=-1 || num.toLowerCase().search( "http" )!=-1)
                            {
                                link=num;  
                            }
                            else
                            {
                                link= "http://"+num;
                            }
                            console.log('link='+link);
                           $("a.website").attr("href",link);                           
                           
                        }
                        else
                        {
                            if(numtype=='phone')
                            {                       
                              num = $(".workphone").text();
                              link= "tel:"+num;
                            }
                            else if(numtype=='fax')
                            {
                                num = $(".workfax").text();
                                link= "tel:"+num;
                            }
                            
                            else if(numtype=='email')
                            {
                                num = $(".email").text();
                                link= "mailto:"+num;
                            }
                            
                            window.location = link;
                        }
                        console.log('call method=='+num+'numtype==='+numtype);                       
                        
                        
                        //alert(call);
                    } 
                    
                    
                                      
            function showAddNotes(){
                $("#account-notes-modal span#addNoteErrors").html('');
                $("#account-notes-modal #accNoteDate").html(dateFormatter(moment()));
                $("#account-notes-modal #accNotes").val('');
                $("#account-notes-modal").modal('show');                        
                $("#account-notes-modal button.btn-delete" ).hide();
            }   //  end of showAddNotes
                    
            function addAccountNote(){
                        $("#account-notes-modal span#addNoteErrors").html('');
                        
                        note = $("#account-notes-modal #accNotes").val();
                        if(note == null || note == ''){
                            $("#account-notes-modal span#addNoteErrors").html('Please enter a note');
                            return false;
                        }
                        NoteId =$("#account-notes-modal").attr('data-rec-id');
                        
                        console.log('Noteid'+ NoteId);
                        if(NoteId  == undefined || NoteId  =="")
                        {
                            var btntxt=$("#account-notes-modal button.btn-save").text();
                            $("#account-notes-modal button.btn-save").text('Saving...');
                            $("#account-notes-modal button").attr("disabled",true);
                            
                            //  if valid save the note
                            Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.createNote}",
                                suregeonId, note,
                                function(result, event) {
                                    if(event.statusCode == 200){
                                        
                                        //loadOpportunityActivities('All Activities');
                                        
                                        loadAccountActivities($("#tab-accountActivity select#activityFilter").val());
                                        $("#account-notes-modal button.btn-save").text(btntxt);
                                        $("#account-notes-modal button").removeAttr("disabled");                                        
                                        $('#account-notes-modal').modal('hide');
                                        
                                    }
                            }); //  end of remote call to save linked acc
                         }
                         else
                         {
                             updateNoteFun(NoteId,note);
                             NoteId="";
                         }   
                    }   //  end of addAccountNote
            
            function dateFormatter(val){
                //return moment(val).format('M/D/YYYY');
                return moment(val).format("MM-DD-YYYY h:mm A");//YYYY-MM-DD, hh:mm:ss);
            }
            
            /*Author:Ansu Routray
                      Release:4.3
                      Date Modified 28/08/2017
                      Component Id:CID-000463
                      Purpose:format date orthoilustrtated details for surgeon
            */
            function dateOnlyFormatter(val){
                //return moment(val).format('M/D/YYYY');
                return moment(val).format("MM-DD-YYYY");//YYYY-MM-DD, hh:mm:ss);
            }
            function dateInputFormat(val){
                return moment(val).format('MM/DD/YYYY');
                
            }
            
           // <!-- ACTIVITY Tab END -->      
            function populateOpportunityDetailsView(accountId){ 
                Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveOpportunitiesByAccountId}",
                accountId,
                function(result, event){ 
                    console.log('##--opportunities: ' + JSON.stringify(result));
                    if(result.length>0){
                        $("#divOpenOpportunities p.remove-when-present").hide();
                        $("#divOpenOpportunities").empty();
                        $.each(result, function(i, v){
                            $("#divOpenOpportunities").append("<div id='"+v.Id+"' data-linked-opp-id='"+v.Id+"'><dl><dt>"+v.Type+"</dt><dd><a href='#' onclick='oppPage(\""+v.Id+"\")'>"+v.Name+"</a></dd></dl></div>");
                        });
                    }
                                         
                    
                }); //  end of remote call
                         
            }
            function oppPage(oppId){
               window.location = "/AROpportunityDetail?id="+oppId;
             }
             
             //adding Account affliations 
               function populateSurgeons(){
                  $("#add-account-affiliation-modal i.surgeon-busy").show();
                  Visualforce.remoting.Manager.invokeAction("CS_ARCCExtension.retrieveProviders",
                  function(result, event) {
                    
                       //console.log('sur typeahead=='+result[0].Name);
                      // setup the account type ahead options object
                      var surgeonTypeAheadOptions = {
                          minLength: 1,
                          items: 50,
                          source: result,
                          showHintOnFocus: false,
                          displayText: function(item) {
                              return globalDecodeEntities(item.Name);
                          },              
                          afterSelect: function(item) {
                              $("#add-account-affiliation-modal input.account").val(globalDecodeEntities(item.Name));
                              $("#add-account-affiliation-modal input.account").attr("data-record-id", item.Id);
                              var practId = item.Id;
            
                                            if ( $("#add-account-affiliation-modal span[data-record-id="+item.Id+"].ctag").length === 0)
                                                 {
                                                // no duplicates and can't add yourself
                                                $("#add-account-affiliation-modal div.ctag-list.account").append(obj2ctag(item));
                                            } 
                                            $("#add-account-affiliation-modal .account-typeahead").val("");  
                          }
                          
                      };
                      //console.log('dr====='+$("#add-surgeon-affiliation-modal div.surgeon").attr("data-record-id")+"===="+item.Id);
                      // init the provider type ahead
                      $("#add-account-affiliation-modal input.account-typeahead").typeahead(surgeonTypeAheadOptions);  
                     
                      $("#add-account-affiliation-modal i.account-busy").hide();
                  });
                  
              }
               /*function obj2ctag(obj) {
                    var label = globalDecodeEntities(obj.Name);
                    var id = obj.Id;
        
                    var ctag = '<span class="ctag alert alert-info" data-record-id="'+id+'">';
                    ctag += label
                    ctag += '&nbsp;<span data-role="remove-tag"></span></span>';
                    
                    return ctag;
                }*/
                                    
              
                function createMapForSurgeon(accObj){
                    console.log('##--createMapForSurgeon.accObj: '+ JSON.stringify(accObj));
                    $('#divMap').height($('#divMapSibling').height());
                    $('#divMap').width($('#divMapSibling').width());           
                    var myCenter = new google.maps.LatLng(accObj.Geolocation__Latitude__s, accObj.Geolocation__Longitude__s);  
                    var mapCanvas = document.getElementById("divMap");
                    var mapOptions = {center: myCenter, zoom: 10};
                    var map = new google.maps.Map(mapCanvas, mapOptions);
                    console.log('##--createMapForSurgeon.map: '+map);
                    var marker = new google.maps.Marker({position:myCenter});
                    var content = accObj.Name;
                    if(globalDecodeEntities(accObj.PersonMailingStreet)){
                        content += "<br/>" + globalDecodeEntities(accObj.PersonMailingStreet) ;
                    }
                    if(globalDecodeEntities(accObj.PersonMailingStreet)){
                        content += "<br/>" + globalDecodeEntities(accObj.PersonMailingStreet);
                    }
                    if(globalDecodeEntities(accObj.PersonMailingState)){
                        content += "<br/>" + globalDecodeEntities(accObj.PersonMailingState);
                    }
                    if(globalDecodeEntities(accObj.PersonMailingCountry)){
                        content += "<br/>" + globalDecodeEntities(accObj.PersonMailingCountry);
                    }
                    if(globalDecodeEntities(accObj.PersonMailingPostalCode)){
                        content += "<br/>" + globalDecodeEntities(accObj.PersonMailingPostalCode);
                    }
                     
                    marker.setMap(map);
                    
                    google.maps.event.addListener(marker,'click',function() {
                        map.setZoom(9);
                        map.setCenter(marker.getPosition());
                        var infowindow = new google.maps.InfoWindow({
                            content: content
                        });
                        
                        infowindow.open(map,marker);
                    });
                    
                }   //  end of createMapForAccount
            var assignedTo = '';     
            function displayPractitionerDetail(practitionerId) {
               
                //Calling the Product Part typeahead method
                assignProductPartsTypeahead();
                
                //Calling the Product Part Description typeahead method
                assignProductPartDescriptionTypeahead();
                
                $("#surgeonDetailView").show();
                $("#provider-detail").hide();
                
    
                //$("#surgeonDetailView h2.name").text("");
                //$("#surgeonDetailView p").text("");
                //alert(practitionerId);
                $("#surgeonDetailView img.profile-pic").hide();                     
                $("i.detail-busy").show();
                
                Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitioner}",
                practitionerId, function(result, event) {
                
              $("i.detail-busy").hide();
              // added by Swetha Penmethsa - 04/16/2017 -- START
              $("#surgeonDetailView img.profile-pic").attr("src", "").show();
              // added by Swetha Penmethsa - 04/16/2017 -- ENDs
              
              $("#surgeonDetailView img.profile-pic").attr("src", result.Profile_Picture__c).show();
              
              var profilePic = result.Profile_Picture__c;
              if(result.Profile_Picture__c != undefined && result.Profile_Picture__c != null && profilePic.indexOf("/AxisTemplate/Axis/img/profile-surgeon.png") == -1){
                  $("#surgeonDetailView a.add-update-photo").html("Update ");
                  $("#surgeonDetailView a.delete-photo").html("| Delete");
              }
              
              var name = '';
              var fName = '';
              var middleNameVar = '';
              var lName = '';
              var sName = '';
              if(result.FirstName != undefined){
                  fName = result.FirstName;
              }
              if(result.MiddleName != undefined){
                  middleNameVar = result.MiddleName;
              }
              if(result.Suffix != undefined){
                  sName = result.Suffix;
              }
              if(result.LastName!= undefined){
                  lName = result.LastName;
              }    
              name = globalDecodeEntities(fName)+" "+globalDecodeEntities(middleNameVar)+" "+globalDecodeEntities(lName)+" "+globalDecodeEntities(sName);
              if ( result.Salutation && result.Salutation != '--None--') {
                  name = globalDecodeEntities(result.Salutation)+" "+name;
              }
    
              pardotEmail = result.PersonEmail;
    
              // Main header section
              $("#surgeonDetailView div.surgeonName").text(name);
              //alert(JSON.stringify(result));
              
              $("#surgeonDetailView div.name").text(name);
              
              if(result.Preferred_Name__c != undefined){
                  $("#surgeonDetailView div.Preferredname").text(result.Preferred_Name__c);
              }else{
                  $("#surgeonDetailView div.Preferredname").text('');
              }
              
              /**
                * @author Original: Swetha Penmethsa TCS, Last Modified:  Aug/15/2017
                * @release: 4.3
                * @component: CID-000447
                * @description: Minor Edits on Surgeon Page 
                */
              $("#surgeonDetailView a.website").text(result.Website);
              
            //Swetha Penmethsa --Release 3.2--april15---clear edit surgeon values 
              if(result.Designation__pc != undefined){
                  $("#surgeonDetailView div.designation").text(result.Designation__pc);
              }else{
                  $("#surgeonDetailView div.designation").text('');
              }
              //Swetha Penmethsa --Release 3.2--april15---clear edit surgeon values 
             
              
              Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveTerritoryForPractitioner}",
                  suregeonId, function(result, event) {
                    console.log('HCPId in territory-----------------'+suregeonId+'result--'+result);
                    assignedTo = '';               
                    if( result.length > 0 )
                    {
                        for ( var i=0; i < result.length; i++) {                        
                            assignedTo += ", " + globalDecodeEntities(result[i]).replace(/,/g , "");                        
                        }
                    }
                    console.log('assignedTo =='+assignedTo );                   
                    $("#surgeonDetailView div.assigned-team").text( assignedTo.substring(2) || "None" ); 
                    assignedTo = assignedTo.substring(2);
                     
                 });
              
              $("#surgeonDetailView div.npi").text(result.NPI__pc);
             
              if(result.Native_Language__c != undefined){
                  $("#surgeonDetailView div.lang").text(result.Native_Language__c);
              }else{
                  $("#surgeonDetailView div.lang").text('');
              }
              
              if(result.Surgery_Days__pc != undefined){
                  $("#surgeonDetailView div.surgeryDays").text(result.Surgery_Days__pc);
              }else{
                  $("#surgeonDetailView div.surgeryDays").text('');
              }
              if(result.Clinic_Days__pc != undefined){
                  $("#surgeonDetailView div.clinicDays").text(result.Clinic_Days__pc);
              }else{
                  $("#surgeonDetailView div.clinicDays").text('');
              }
               //Swetha Penmethsa--release 3.2
             if(result.Gender__c != undefined){
                  $("#surgeonDetailView div.gender").text(result.Gender__c);
              }else{
                  $("#surgeonDetailView div.gender").text('');
              }
             
             if(result.Focus_of_my_practice__pc != undefined){
                  $("#surgeonDetailView div.practiceFocus").text(globalDecodeEntities(result.Focus_of_my_practice__pc));
              }else{
                  $("#surgeonDetailView div.practiceFocus").text('');
              }
              //Swetha Penmethsa---release 3.2
             if(result.Arthrex_com_Surgeon_Specialty__pc != undefined){
                  $("#surgeonDetailView div.area-of-interest").text(globalDecodeEntities(result.Arthrex_com_Surgeon_Specialty__pc));
              }else{
                  $("#surgeonDetailView div.area-of-interest").text('');
              }
              $("#surgeonDetailView div.arthexMEmails").text(result.Assigned_Sales_Rep_Email__pc);
              //$("#surgeonDetailView div.consultant").text(result.Consultant__c);
              //$("#surgeonDetailView div.assigned-team").text(result.Account_Group__pc);
              //$("#surgeonDetailView div.practicePhone").text(result.Phone);
              $("#surgeonDetailView div.practicePhone").text('');
              if(result.Phone != undefined){
                  $("#surgeonDetailView div.practicePhone").append('<a href="tel:' + result.Phone + '">' + result.Phone + '</a>');
              }
              //$("#surgeonDetailView div.mobilePhone").text(result.PersonMobilePhone);
              
              $("#surgeonDetailView div.mobilePhone").text('');
              if(result.PersonMobilePhone != undefined){
                  $("#surgeonDetailView div.mobilePhone").append('<a href="tel:' + result.PersonMobilePhone + '">' + result.PersonMobilePhone + '</a>');
              }
              
              //$("#surgeonDetailView div.surgeonEmail").text(result.PersonEmail);
              $("#surgeonDetailView div.surgeonEmail").text('');
              $("#surgeonDetailView div.surgeonEmail_top").text('');
              if(result.PersonEmail != undefined){
                  $("#surgeonDetailView div.surgeonEmail_top").append('<a href="mailto:' + result.PersonEmail + '">' + result.PersonEmail + '</a>');
                            
                  $("#surgeonDetailView div.surgeonEmail").append('<a href="mailto:' + result.PersonEmail + '">' + result.PersonEmail + '</a>');
              }
              
              //$("#surgeonDetailView div.practiceName").text(result.Practice_Name__c);
              var mailingAdd = '';
              if(result.PersonMailingStreet != undefined){
                  mailingAdd = result.PersonMailingStreet;
              }
              if(result.PersonMailingCity != undefined){
                  if(mailingAdd != ''){
                       mailingAdd += ', ';
                  }
                  mailingAdd += result.PersonMailingCity;
              }
              if(result.PersonMailingState != undefined){
                 if(mailingAdd != ''){
                      mailingAdd += ', ';
                  }
                  mailingAdd += result.PersonMailingState;
              }
              if(result.PersonMailingCountryCode != undefined){
                  mailingAdd += ', ' + result.PersonMailingCountryCode;
              }
              if(result.PersonMailingPostalCode != undefined){
                  mailingAdd += ', ' + result.PersonMailingPostalCode;
              }
              
              $("#surgeonDetailView div.mailing-address").text(mailingAdd);
              createMapForSurgeon(result);
              
             
              if(result.Practice_Name__c != undefined){
                  $("#surgeonDetailView div.practiceName").text(globalDecodeEntities(result.Practice_Name__c));
              }else{
                  $("#surgeonDetailView div.practiceName").text('');
              }
              
               // Swetha Penmethsa- release 3.2 -surgeon type -without list and surgeon 
             
              if ( result.User_Type__pc != undefined && result.User_Type__pc.startsWith("Surgeon") ) {
                  var txt = globalDecodeEntities(result.User_Type__pc);
                  $("#surgeonDetailView div.user-type").text(txt.split(" - ")[1]);
              }
              else{
                  $("#surgeonDetailView div.user-type").text('');
              }
              //Swetha Penmethsa -March17 - Release 3.2 
              
              
              
              // this button and 2 links are only visible on tablet and smaller devices
              $("#surgeonDetailView button.create-case").attr("data-practitioner-name", name );
              $("#surgeonDetailView button.create-case").attr("data-practitioner-id", result.Id);
    
              $("#surgeonDetailView a.mail").attr("href","mailto:"+result.PersonEmail );
              if ( typeof result.PersonEmail == "undefined" || result.PersonEmail.length === 0 ) {
                $("#surgeonDetailView a.mail").attr("disabled","true");
              }
    
              $("#surgeonDetailView a.telephone").attr("href", "tel:"+result.Phone );
              if ( typeof result.Phone == "undefined" || result.Phone.length === 0  ) {
                  $("#surgeonDetailView a.telephone").attr("disabled","true");
              }
              // end button and links only visible on tablet and smaller devices          
              var focusOfMyPractice = result.Focus_of_my_practice__pc ? $("<div/>").html(result.Focus_of_my_practice__pc).text() : "";
              $("#surgeonDetailView p.practice-focus").text(focusOfMyPractice.replace(/;/g, ", ")); 
                         
              //Release 2.2- Surgeon req
              //CID:- 000064
              //Developer:- Mimansha
              //Date:- 12/2/2016
              //Purpose:- Display the value of Opt out of Email field
              var optOut = result.PersonHasOptedOutOfEmail;
              if ( optOut ) {
                   $("#surgeonDetailView div.email-opt-out").text("Does Not Accept Email");
                //$("#surgeonDetailView input.email-opt-out").prop("checked", true);
              } else {
                      $("#surgeonDetailView div.email-opt-out").text("Accept Email");
                    //$("#surgeonDetailView input.email-opt-out").prop("checked", false);
              }
              
              //Release 2.2- Surgeon req
              //CID:- 000064
              //Developer:- Mimansha
              //Date:- 12/2/2016
              //Purpose:- Display the value of Consultant Status field
              
              var consultantStatus = result.Consultant__c;
              if ( consultantStatus ) {  
                           
                  //$("#tab-contacts input.consultant-status").prop("checked", true);
                  document.getElementById("consultant-status").checked = true;
              } else {                 
                    //$("#tab-contacts input.consultant-status").prop("checked", false);
                    document.getElementById("consultant-status").checked = false;
              }
    
              $("#tab-contacts div.title").text(globalDecodeEntities(result.PersonTitle) || "None");
              $("#tab-contacts div.npi").text(result.NPI__pc);
    
              var birthDateStr = "None";
              if ( result.PersonBirthdate) {
                birthDateStr = moment(result.PersonBirthdate).format("MM/DD/YYYY")
              }          
              $("#tab-contacts div.birthdate").text(birthDateStr);
              
              
              if(result.Gender__c != '')
              {
                  $("#tab-contacts div.gender").text(result.Gender__c);
              }
              else{
                  $("#tab-contacts div.gender").text("");
              }
              
              $("#tab-contacts div.lang").text( globalDecodeEntities(result.Native_Language__c));

              if(result.User_Type__pc != null && result.User_Type__pc != ''){
                  var userType = result.User_Type__pc;
                  var userTypeElems = userType.split(" - ");
                  if (userTypeElems.length > 1 ) {
                      userType = userTypeElems[1];
                  }
                  $("#tab-contacts div.user-type").text(userType);
              }
              else{
                  $("#tab-contacts div.user-type").text("");
              }
              
              
              $("#tab-contacts div.assigned-sales-rep-email").text(result.Assigned_Sales_Rep_Email__pc || "None");
    
              var areaOfInterest = result.Arthrex_com_Surgeon_Specialty__pc ? $("<div/>").html(result.Arthrex_com_Surgeon_Specialty__pc).text() : "";
    
              $("#tab-contacts div.area-of-interest").text(areaOfInterest.replace(/;/g, ", ")); 
                
              var designation = result.Designation__pc ? $("<div/>").html(result.Designation__pc).text() : "";
              $("#tab-contacts div.designation").text(designation.replace(/;/g, ", "));                        
              $("#tab-contacts button.edit-surgeon-btn").attr("data-record-id",practitionerId);
            
              var mStreet = globalDecodeEntities(result.PersonMailingStreet);
              var mCity = globalDecodeEntities(result.PersonMailingCity);
              var mState = globalDecodeEntities(result.PersonMailingState);
              var mZip = result.PersonMailingPostalCode;
    
              
              $("#tab-contacts div.mailing-address").attr("data-street",mStreet);
              $("#tab-contacts div.mailing-address").attr("data-city",mCity);
              $("#tab-contacts div.mailing-address").attr("data-state",mState);
              $("#tab-contacts div.mailing-address").attr("data-zip",mZip);
    
              
              //$("#tab-contacts div.mailing-address").html(formatAddress(mStreet, mCity, mState, mZip));
    
    
              // procedure tab ( pulled in from the controller ) 
              $("#surgeonDetailView i.procedure-busy").show();
              $("#surgeonDetailView table.pref-card-products tbody").empty();
              $("#surgeonDetailView span.pref-card-data").hide();
              
                //  Resetting the pref card Id on the edit button to avoid pulling a wrong Id when there's no pref card
              $("#surgeonDetailView button.btn-edit-pref-card").removeAttr("data-record-id");
              $("#surgeonDetailView button.btn-pdf-pref-card").removeAttr("data-record-id");
              
              Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveTerritoryForPractitioner}",
                      practitionerId, function(result, event) {
                        console.log('PractitionerId in territory-----------------'+practitionerId);
                        var assignedTeam = '';               
                        if( result.length > 0 )
                        {
                            for ( var i=0; i < result.length; i++) {
                            
                                assignedTeam += ", " + globalDecodeEntities(result[i]).replace(/,/g , "");                        
                            }
                        }
                                           
                        $("#tab-contacts div.assigned-team").text(assignedTeam.substring(2) || "None" ); 
    
               });
               
                /*Release 2.2
                Component ID CID:- 000064
                Developer Name:- Mimansha Samal
                Date Added:- 12/9/2016
                Feature:- Display data in Account Affiliations tab*/             
              
              //Display Account Affiliations
              //displayAccountAffiliations(practitionerId);          
         
              
              Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitionerPrefCards}",
                      practitionerId, function(result, event) {
                        if (event.status) {
    
                          $("#surgeonDetailView select.pref-cards").attr("data-record-id", practitionerId);
                          $("#surgeonDetailView select.pref-cards").empty();
                          if ( result.length === 0 ) {
    
                            $("#surgeonDetailView select.pref-cards").empty().append("<option value=''>--None--</option>");
                            $("#surgeonDetailView button.btn-edit-pref-card").attr("disabled", "disabled");
                            $("#surgeonDetailView button.btn-pdf-pref-card").attr("disabled", "disabled");
                          } else {
                            
                            $("#surgeonDetailView button.btn-edit-pref-card").removeAttr("disabled");
                            $("#surgeonDetailView button.btn-pdf-pref-card").removeAttr("disabled");
                            $("#surgeonDetailView span.pref-card-data").show();
                            
                            //Modified by Mimansha Samal on 7/3/2017 in Release 4.1 to make the Pref Cards sorted in ASC order
                            for ( var i = result.length - 1; i >= 0; i--) {
                                var prefCard = result[i];
                                var prefCardOption = "<option value='"+result[i].Id+"'>"+globalDecodeEntities(result[i].Pref_Card_Name__c)+"</option";
                                $("#surgeonDetailView select.pref-cards").prepend(prefCardOption);
                            } 
    
                          }
                        } else {
                           // do nothing on error ( probably a bad idea )
                        }
    
                         // turn off the notification and turn on the pull down and click the first one
                          $("#surgeonDetailView span.pref-cards-notify").text("").hide();
                          if ( result.length > 0 ) {
                            $("#surgeonDetailView select.pref-cards").val( $("#surgeonDetailView  select.pref-cards option:first").val() ).change();
                          }
                          $("#surgeonDetailView select.pref-cards").show();
    
                     });               
              
           
              // calendar tab ( pulled in from the controller )
              $("#surgeonDetailView a[href=#tab-calendar]").hide();
              $("#surgeonDetailView i.calendar-busy").show();
              Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveCasesByPractitioner}",
                practitionerId, function(cases, event) {
    
                
                $("#surgeonDetailView table.table-calendar tbody").empty();  
                $("#surgeonDetailView i.case-busy").hide();
                if ( cases.length > 0 ) {
    
                  var rows = [];
                  for ( var i=0; i < cases.length; i++) {
            
                    var name = cases[i].Procedure_Names_Placeholder__c || "None";
     
                    var desc = cases[i].Description__c || "None";
                    if ( desc === "null" || desc === null ) { desc = "None"; }
    
                    var startDate = moment(cases[i].Event_Start_Date__c).format("MM/DD/YYYY");
                    var startTime = moment(cases[i].Event_Start_Date__c).format("h:mm A");
                    var endDate = moment(cases[i].Event_End_Date__c).format("MM/DD/YYYY");
                    var endTime = moment(cases[i].Event_End_Date__c).format("h:mm A");
                    var dateRange = startDate+' '+startTime+' - '+endTime;
    
                    var provider = "None";
                    if ( cases[i].Health_Care_Provider__r ) {
                      provider = cases[i].Health_Care_Provider__r.Name; 
                    }
                    
    
                    rows.push({
                      prefCard: globalDecodeEntities(name),
                      time: dateRange,
                      provider: globalDecodeEntities(provider),
                      case: cases[i]
                    });
    
                  }
    
                  // init the bootstrap table witih sorting
                  $("#surgeonDetailView table.table-calendar").bootstrapTable('destroy');
                  $("#surgeonDetailView table.table-calendar").bootstrapTable({
                      sortable: true,
                      pagination: true,
                      classes: "table-no-bordered table-striped table-hover",
                      onClickRow: function(rowData, $element) {
                        openCaseModalFromCaseId(rowData.case.Id);                  
                      },
                      columns: [{
                          field: 'prefCard',
                          title: 'Type',
                          sortable: true
                      }, {
                          field: 'Day',
                          title: 'Day',
                          sortable: true
                      } ,{
                          field: 'Location',
                          title: 'Time',
                          sortable: true,
                      }
                      ,{
                          field: 'time',
                          title: 'Location',
                          sortable: true,
                      }],
                      data: rows
                  });
              
              
    
                } else {
                  $("#surgeonDetailView table.table-calendar")
                    .append("<tr><td colspan='3' class='text-center'>No cases found</td></tr>");
                }
    
                $("#surgeonDetailView i.calendar-busy").hide();
                $("#surgeonDetailView a[href=#tab-calendar]").show();
                
              });
                       
              
              // Provider detail edit modal
              $("#provider-detail ")
            
              // BIO tab
              $("#tab-bio button.edit-surgeon-bio-btn").attr("data-record-id",suregeonId);
              
              // ------------------------------Release 4.4 Changes STARTS for Mimansha------------------------------------
              /*
              var gradInst = "";
              var gradInstId = "";
              //if(result.PersonContact != undefined){
              if ( result.PersonContact.Graduate_Institution__r ) { 
               gradInst = result.PersonContact.Graduate_Institution__r.Name;
               gradInstId = result.PersonContact.Graduate_Institution__r.Id;
              }
              $("#tab-bio div.graduate").text(globalDecodeEntities(gradInst));
              $("#tab-bio div.graduate").attr("data-record-id", gradInstId);
             
              var undergradInst = "";
              var undergradInstId = "";
              if (result.PersonContact.Undergraduate_Institution__r ) { 
                undergradInst = result.PersonContact.Undergraduate_Institution__r.Name;
                undergradInstId = result.PersonContact.Undergraduate_Institution__r.Id;
              }
              
              $("#tab-bio div.undergraduate").text(globalDecodeEntities(undergradInst));
              $("#tab-bio div.undergraduate").attr("data-record-id", undergradInstId);
    
              var doctorateInst = "";
              var doctorateInstId = "";
              if (result.PersonContact.Doctorate_Institution__r ) { 
               doctorateInst = result.PersonContact.Doctorate_Institution__r.Name;
               doctorateInstId = result.PersonContact.Doctorate_Institution__r.Id;
             }          
              $("#tab-bio div.doctorate").text(globalDecodeEntities(doctorateInst));
              $("#tab-bio div.doctorate").attr("data-record-id", doctorateInstId);
              */
              //}
              //$("#tab-bio div.Undergraduate").text(globalDecodeEntities( result.Undergraduate_Institution__pc) || "" );
              //$("#tab-bio div.Graduate").text(globalDecodeEntities( result.Graduate_Institution__pc) || "" );
              //$("#tab-bio div.Doctorate").text(globalDecodeEntities( result.Doctorate_Institution__pc) || "" );
              //$("#tab-bio div.internship").text(globalDecodeEntities( result.Internship__c ) || "" );
              $("#tab-bio div.residencies").html(globalDecodeEntities( result.Residencies__c) || "" );
              $("#tab-bio div.fellowships").html(globalDecodeEntities( result.Fellowships__c ) || "" );
              
              // Mimansha Changes for CID - 000342 in Release 4.4       
              // Modified Date:- 10/25/2017        
              //$("#tab-bio div.certifications").text((globalDecodeEntities(result.Certifications__c ) || "" ).replace(/<br\s*[\/]?>/gi,' ').replace(/\&/g,'').replace(/\amp;/g,'&'));              
              //$("#tab-bio div.awards").text((globalDecodeEntities( result.Awards__c) || "" ).replace(/<br\s*[\/]?>/gi,' ').replace(/\&/g,'').replace(/\amp;/g,'&'));
              //$("#tab-bio div.professional-societies").text((globalDecodeEntities( result.Professional_Societies__c) || "").replace(/<br\s*[\/]?>/gi,' ').replace(/\&/g,'').replace(/\amp;/g,'&'));
              //$("#tab-bio div.sports-teams-affiliations").text(globalDecodeEntities(result.Sport_Interests__c ) || "");
              
              $("#tab-bio div.certifications").html((globalDecodeEntities(result.Certifications__c ) || "" ));
              $("#tab-bio div.awards").html((globalDecodeEntities( result.Awards__c) || "" ) );
              $("#tab-bio div.professional-societies").html((globalDecodeEntities( result.Professional_Societies__c) || ""));
              $("#tab-bio div.sports-teams-affiliations").text(globalDecodeEntities(result.Sport_Interests__c ) || "");
              
              //$("#tab-bio div.personal-interest").text(globalDecodeEntities(result.Personal_Intrest__c ) || "");
              //$("#tab-bio div.spouse-and-children").text(globalDecodeEntities(result.Family_Information__c ) || "");
              
              //Modified by Mimansha in Release 4.4 for component CID-000341
              $("#tab-bio div.publications").html( $('<div/>').html(result.Publications__c).text() );
              
              
              //Release 4.4
              //Component ID:- CID-000341
              //Developer:- Mimansha Samal
              //Date:- 9/7/2017
              //Purpose:- Retrieve all the education programs for the practitioner              
              
              Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitionerPrograms}",
                      practitionerId, function(practitionerPrograms, event) {
                        console.log('PractitionerId in Programs-----------------'+practitionerId);
                                 
                        if( practitionerPrograms != null )
                        {
                            console.log('Inside IF of Programs');
                            console.log('##--result of Program: '+ JSON.stringify(practitionerPrograms));                            
                          
                            $.each(practitionerPrograms.lstProgramParticipants, function(i,v){
                           
                               if(globalDecodeEntities(v.Education_Level__c) == 'Undergraduate' ||
                                globalDecodeEntities(v.Education_Level__c) == 'Graduate' ||
                                    globalDecodeEntities(v.Education_Level__c) == 'Doctorate')
                               { 
                                    var startDate = v.Participant_Start_Date__c || "";
                                    var endDate = v.Participant_End_Date__c || "";  
                                    var fieldOfStudy = globalDecodeEntities( v.Field_of_Study__c) || "";
                                    var degreeType = globalDecodeEntities( v.Education_Type__c) || "";
                                    var startYear = '';
                                    var endYear = '';
                                    if(startDate != '')
                                        startYear = dateFormatterYearOnly(startDate);
                                    if(endDate != '')
                                        endYear = dateFormatterYearOnly(endDate);
                                   
                                    if(v.Institution__c != null)
                                        $("#tab-bio .education-details tbody").append('<tr data-part-id="'+v.Id+'"><td><p class="form-control-static">'+ startYear +'</p></td><td><p class="form-control-static">'+endYear+'</p></td><td><p class="form-control-static">'+ degreeType +'</p></td><td><p class="form-control-static">'+ fieldOfStudy +'</p></td><td><p class="form-control-static">'+ (globalDecodeEntities(v.Institution__r.Name) || "") +'</p></td>');
                                    else
                                        $("#tab-bio .education-details tbody").append('<tr data-part-id="'+v.Id+'"><td><p class="form-control-static">'+startYear+'</p></td><td><p class="form-control-static">'+endYear+'</p></td><td><p class="form-control-static">'+ degreeType +'</p></td><td><p class="form-control-static">'+ fieldOfStudy +'</p></td><td></td>');     
                               }
                               else if(globalDecodeEntities(v.Education_Level__c) == 'Postgraduate')
                               {
                                    var startDate = v.Participant_Start_Date__c || "";
                                    var endDate = v.Participant_End_Date__c || "";                                    
                                    var educationType = globalDecodeEntities( v.Education_Type__c) || "";
                                    var programType = globalDecodeEntities( v.Program_Type__c) || "";
                                    var startYear = '';
                                    var endYear = '';
                                    if(startDate != '')
                                        startYear = dateFormatterYearOnly(startDate);
                                    if(endDate != '')
                                        endYear = dateFormatterYearOnly(endDate);                                    
                                    
                                    if(v.Program_Name__c != null)
                                        $("#tab-bio .postGraduate-details tbody").append('<tr data-part-id="'+v.Id+'"><td><p class="form-control-static">'+startYear+'</p></td><td><p class="form-control-static">'+endYear+'</p></td><td><p class="form-control-static">'+ educationType +'</p></td><td><p class="form-control-static">'+ programType +'</p></td><td><p class="form-control-static">'+ (globalDecodeEntities(v.Program_Name__r.Name) || "") +'</p></td>');
                                    else
                                        $("#tab-bio .postGraduate-details tbody").append('<tr data-part-id="'+v.Id+'"><td><p class="form-control-static">'+startYear+'</p></td><td><p class="form-control-static">'+endYear+'</p></td><td><p class="form-control-static">'+ educationType +'</p></td><td><p class="form-control-static">'+ programType +'</p></td><td></td>');
                               }
                               
                              
                            });  // End of For- each block
                        }     // End of IF block
              });
              
              //Release 4.4
              //Component ID:- CID-000342
              //Developer:- Mimansha Samal
              //Modified Date:- 9/20/2017
              //Purpose:- Open Graduate/UG/Doctorate/PG details in Surgeon Bio Modal 
            
              // opens the edit surgeon bio modal and sets the account id
              $("#surgeonDetailView button.edit-surgeon-bio-btn").on("click", function() {
                          
                    var practitionerId = $(this).attr("data-record-id");
                    $("#surgeon-bio-modal").attr("data-record-id", practitionerId);
                
                    $("#tab-bio button.edit-surgeon-bio-btn").attr("data-record-id",practitionerId);
                    /*
                    var graduate = $("#tab-bio div.graduate").text();
                    var graduateId = $("#tab-bio div.graduate").attr("data-record-id");
                            
                    var undergraduate = $("#tab-bio div.undergraduate").text();
                    var undergraduateId = $("#tab-bio div.undergraduate").attr("data-record-id");
                            
                    var doctorate = $("#tab-bio div.doctorate").text();
                    var doctorateId = $("#tab-bio div.doctorate").attr("data-record-id");
                
                    var internship = $("#tab-bio div.internship").text();
                    */
                    var residencies = $("#tab-bio div.residencies").text();
                    var fellowships = $("#tab-bio div.fellowships").text();
                    var certifications = $("#tab-bio div.certifications").text();                    
                    var awards = $("#tab-bio div.awards").text();
                    var professionalSocieties = $("#tab-bio div.professional-societies").text();
                    var sportsTeamsAffiliations = $("#tab-bio div.sports-teams-affiliations").text();
                            
                    //var personalInterest = $("#tab-bio div.personal-interest").text();
                    //var spouseAndChildren = $("#tab-bio div.spouse-and-children").text();                    
                            
                    
                    /*
                    $("#surgeon-bio-modal input.graduate").val(graduate);
                    $("#surgeon-bio-modal input.graduate").attr("data-record-id", graduateId);
                            
                    $("#surgeon-bio-modal input.undergraduate").val(undergraduate);
                    $("#surgeon-bio-modal input.undergraduate").attr("data-record-id", undergraduateId);
                
                    $("#surgeon-bio-modal input.doctorate").val(doctorate);
                    $("#surgeon-bio-modal input.doctorate").attr("data-record-id", doctorateId);
                
                    $("#surgeon-bio-modal textarea.internship").val(internship);
                    */      
                    $("#surgeon-bio-modal textarea.residencies").val(residencies);
                    $("#surgeon-bio-modal textarea.fellowships").val(fellowships);
                    $("#surgeon-bio-modal textarea.certifications").val(certifications);
                    $("#surgeon-bio-modal textarea.awards").val(awards);
                    $("#surgeon-bio-modal textarea.professional-societies").val(professionalSocieties);
                    $("#surgeon-bio-modal textarea.sports-teams-affiliations").val(sportsTeamsAffiliations);
                    //$("#surgeon-bio-modal textarea.personal-interest").val(personalInterest);
                    //$("#surgeon-bio-modal textarea.spouse-and-children").val(spouseAndChildren);
                            
                    Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitionerPrograms}",
                      practitionerId, function(practitionerPrograms, event) {
                            console.log('PractitionerId in Programs-----------------'+practitionerId);      
                            console.log('Inside Edit Surgeon Modal Open-------');                                   
                            if( practitionerPrograms != null )
                            {
                                $.each(practitionerPrograms.lstProgramParticipants, function(i,v){
                                                                    
                                    if(globalDecodeEntities(v.Education_Level__c) == 'Undergraduate' ||
                                    globalDecodeEntities(v.Education_Level__c) == 'Graduate' ||
                                    globalDecodeEntities(v.Education_Level__c) == 'Doctorate')
                                    { 
                                        var startDate = v.Participant_Start_Date__c || "";
                                        var endDate = v.Participant_End_Date__c || "";  
                                        var fieldOfStudy = globalDecodeEntities( v.Field_of_Study__c) || "";
                                        var degreeType = globalDecodeEntities( v.Education_Type__c) || "";
                                        var startYear = '';
                                        var endYear = '';
                                        if(startDate != '')
                                            startYear = dateFormatterYearOnly(startDate);
                                        if(endDate != '')
                                            endYear = dateFormatterYearOnly(endDate);
                                       
                                        var row_id = $("#surgeon-bio-modal .surgeon-education tbody tr").length + 1;
                                        
                                        if(v.Institution__c != null)
                                            $("#surgeon-bio-modal .surgeon-education tbody").append('<tr data-part-id="'+row_id+'"><td class="startyear-marker"><p class="form-control-static start-year">'+ startYear +'</p></td><td class="endyear-marker"><p class="form-control-static end-year">'+endYear+'</p></td><td class="degreetype-marker"><p class="form-control-static degree-type">'+ degreeType +'</p></td><td class="fieldofstudy-marker"><p class="form-control-static field-of-study">'+ fieldOfStudy +'</p></td><td class="institution-marker" institution-id = "' + v.Institution__c + '" institution-name="' + (globalDecodeEntities(v.Institution__r.Name) || "") + '"><p class="form-control-static institution-name">'+ (globalDecodeEntities(v.Institution__r.Name) || "") +'</p></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary edu-edit-btn" onclick="editEducationDetail(\''+row_id+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-edu-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                                        else
                                            $("#surgeon-bio-modal .surgeon-education tbody").append('<tr data-part-id="'+row_id+'"><td class="startyear-marker"><p class="form-control-static start-year">'+startYear+'</p></td><td class="endyear-marker"><p class="form-control-static end-year">'+endYear+'</p></td><td class="degreetype-marker"><p class="form-control-static degree-type">'+ degreeType +'</p></td><td class="fieldofstudy-marker"><p class="form-control-static field-of-study">'+ fieldOfStudy +'</p></td><td class="institution-marker" institution-id = "" institution-name=""><p class="form-control-static institution-name"></p></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary edu-edit-btn" onclick="editEducationDetail(\''+row_id+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-edu-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');     
                                    }
                                    else if(globalDecodeEntities(v.Education_Level__c) == 'Postgraduate')
                                    {
                                        var startDate = v.Participant_Start_Date__c || "";
                                        var endDate = v.Participant_End_Date__c || "";                                    
                                        var educationType = globalDecodeEntities( v.Education_Type__c) || "";
                                        var programType = globalDecodeEntities( v.Program_Type__c) || "";
                                        var startYear = '';
                                        var endYear = '';
                                        if(startDate != '')
                                            startYear = dateFormatterYearOnly(startDate);
                                        if(endDate != '')
                                            endYear = dateFormatterYearOnly(endDate);                                    
                                        
                                        var row_id = $("#surgeon-bio-modal .surgeon-postgraduate tbody tr").length + 1;
                                        
                                        if(v.Program_Name__c != null)
                                            $("#surgeon-bio-modal .surgeon-postgraduate tbody").append('<tr data-part-id="'+row_id+'"><td class="startyear-marker"><p class="form-control-static start-year">'+startYear+'</p></td><td class="endyear-marker"><p class="form-control-static end-year">'+endYear+'</p></td><td class="trainingtype-marker"><p class="form-control-static training-type">'+ educationType +'</p></td><td class="programtype-marker"><p class="form-control-static program-type">'+ programType +'</p></td><td class="program-marker" program-id = "' + v.Program_Name__c + '" program-name = "' + (globalDecodeEntities(v.Program_Name__r.Name) || "") + '"><p class="form-control-static program-name">'+ (globalDecodeEntities(v.Program_Name__r.Name) || "") +'</p></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary pg-edit-btn" onclick="editPostGraduateDetail(\''+row_id+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-pg-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                                        else
                                            $("#surgeon-bio-modal .surgeon-postgraduate tbody").append('<tr data-part-id="'+row_id+'"><td class="startyear-marker"><p class="form-control-static start-year">'+startYear+'</p></td><td class="endyear-marker"><p class="form-control-static end-year">'+endYear+'</p></td><td class="trainingtype-marker"><p class="form-control-static training-type">'+ educationType +'</p></td><td class="programtype-marker"><p class="form-control-static program-type">'+ programType +'</p></td><td class="program-marker" program-id = "" program-name = ""><p class="form-control-static program-name"></p></td><td class="pull-right"><button type="button" class="btn btn-xs btn-primary pg-edit-btn" onclick="editPostGraduateDetail(\''+row_id+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-pg-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                                    }
                                });  // End of For- each block
                                
                                var publications = $('<div/>').html(practitionerPrograms.objPractitioner.Publications__c).text();
                                $("#surgeon-bio-modal #publicationsSummernote").summernote('code',publications);
                                
                            } // End of If block
                            
                            // Load the Start Year and End Year dropdowns
                            var d = new Date();
                            for ( var i=1930; i <= parseInt(d.getFullYear()); i++) {
                                console.log('Year--------'+i);
                                $("#surgeon-bio-modal #select-startYear").append("<option value='"+i+"'>"+i+"</option>");
                                $("#surgeon-bio-modal #select-EndYear").append("<option value='"+i+"'>"+i+"</option>");
                                $("#surgeon-bio-modal #select-startPGYear").append("<option value='"+i+"'>"+i+"</option>");
                            }
                            
                            //Release 4.4
                            //Component - CID00342
                            // Modified Date- 10/12/2017
                            //Developer- Mimansha Samal
                            //End Year for PG should be current year + 5
                            for ( var i=1930; i <= parseInt(d.getFullYear()) + 5; i++) {        
                                console.log('Year--------'+i);                                      
                                $("#surgeon-bio-modal #select-EndPGYear").append("<option value='"+i+"'>"+i+"</option>");       
                            }
                            
                            $("#surgeon-bio-modal input.surgeon-program-name").attr("disabled", true);
                            $("#surgeon-bio-modal select.program-type").attr("disabled", true);   
                            $("#surgeon-bio-modal").modal("show");
            
                    }); 
              });   // End of Edit Modal of Surgeon Bio
              
              // ------------------------------Release 4.4 Changes ENDS for Mimansha------------------------------------
              
              // Activities tab
              $("#surgeonDetailView a[href=#tab-activities]").hide();
              $("#surgeonDetailView i.activities-busy").show();
    
              Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitionerTasks}",
                      practitionerId, function(result, event) {
                          
                        if (event.status) {
                            
                          //Yan: these events will not be used in Oct. 2016 release
                          // these come back in order
                          //$("#tab-activities div.axis-activity").html( $('<div/>').html(result[0] ).text() );
                          //$("#tab-activities div.arthrex-marketing-interactions").html( $('<div/>').html(result[1]).text() );
                          //$("#tab-activities div.arthrex-medical-education-training").html( $('<div/>').html(result[2]).text() );
                          //$("#tab-activities div.arthrex-events").html( $('<div/>').html(result[3]).text() );
                          
                        }
                        $("#surgeonDetailView i.activities-busy").hide();
                        $("#surgeonDetailView a[href=#tab-activities]").show();
                                  
    
              });
                     
              //Release 4.4
              //Component ID:- CID-000342
              //Developer:- Mimansha Samal
              //Modified Date:- 9/25/2017
              //Purpose:- Save Graduate/UG/Doctorate/PG and other details in Surgeon Bio Modal 
                  
              // saving surgeon bio
              $("#surgeon-bio-modal button.btn-save-surgeon-bio").on("click", function(e) {

                e.preventDefault();
                e.stopPropagation();
            
                $("#surgeon-bio-modal .save-error").text("");
                
                // ------------------------------Release 4.4 Changes STARTS for Mimansha------------------------------------
                
                /*
                Below logic needs to be reevaluated
                */
                /*if(($("#surgeon-bio-modal input.graduate").val() != 'None' && $("#surgeon-bio-modal input.graduate").attr("data-record-id") == '') || 
                    ($("#surgeon-bio-modal input.undergraduate").val() != 'None' && $("#surgeon-bio-modal input.undergraduate").attr("data-record-id") == '') ||
                    ($("#surgeon-bio-modal input.doctorate").val() != 'None' && $("#surgeon-bio-modal input.doctorate").attr("data-record-id") == '')){
                    
                    $("#surgeon-bio-modal .save-error").text("Select valid institutions.");
                    return false;
                }
            
                //  if a previously selected institution is deleted, we empty the Previous selected ID
                if($("#surgeon-bio-modal input.graduate").val() == ''){
                    $("#surgeon-bio-modal input.graduate").attr("data-record-id", "");
                }
                if($("#surgeon-bio-modal input.undergraduate").val() == ''){
                    $("#surgeon-bio-modal input.undergraduate").attr("data-record-id", "");
                }
                if($("#surgeon-bio-modal input.doctorate").val() == ''){
                    $("#surgeon-bio-modal input.doctorate").attr("data-record-id", "");
                }
                */
                
                // Mimansha Changes for CID - 000342 in Release 4.4       
                // Modified Date:- 10/12/2017
                // ----------------------- Mimansha Changes STARTS Here--------------------------------
                // Check if Education detail is selected and not added yet                
                if($("#surgeon-bio-modal .institution-typeahead").val().length == 0)
                {
                    $("#surgeon-bio-modal .institution-typeahead").attr("data-record-id", "" );
                    $("#surgeon-bio-modal .institution-typeahead").attr("record-name", "" );
                }
                
                var institution_id = $("#surgeon-bio-modal .institution-typeahead").attr("data-record-id");
                var degreetypeddlb = $("#surgeon-bio-modal #select-DegreeType").val();
                console.log('Value of Institution ID while save---'+ institution_id);
                                                
                if(!(institution_id == '' || institution_id == 'undefined' || institution_id == undefined)
                || !(degreetypeddlb == '-Select-'))     
                {       
                    if(!addEducationDetail())
                        return false;       
                }
                
                                                
                // Check if Post Graduate detail is selected and not added yet
                if($("#surgeon-bio-modal .programname-typeahead").val().length == 0)
                {
                    $("#surgeon-bio-modal .programname-typeahead").attr("data-record-id", "" );
                    $("#surgeon-bio-modal .programname-typeahead").attr("record-name", "" );
                }
                
                var program_id = $("#surgeon-bio-modal .programname-typeahead").attr("data-record-id");
                var startyearddlb = $("#surgeon-bio-modal #select-startPGYear").val();
                var endyearddlb = $("#surgeon-bio-modal #select-EndPGYear").val();
                var trainingtypeddlb = $("#surgeon-bio-modal #select-TrainingType").val();
                var programtypeddlb = $("#surgeon-bio-modal #select-ProgramType").val();        
                console.log('Value of Program ID while save---'+ program_id);
                
                if(!(program_id == undefined || program_id == '' || program_id == 'undefined')
                || !(programtypeddlb == '-Select-' || programtypeddlb == '') || !(startyearddlb == '-Select-')
                || !(endyearddlb == '-Select-') || !(trainingtypeddlb == '-Select-'))       
                {       
                    if(!addPostGraduateDetail())
                        return false;       
                }
                // ----------------------- Mimansha Changes Ends Here--------------------------------
                var bio = {
                  id : $("#surgeon-bio-modal").attr("data-record-id"),                 
                  internship : $("#surgeon-bio-modal textarea.internship").val(),
                  residencies : $("#surgeon-bio-modal textarea.residencies").val(),
                  fellowships : $("#surgeon-bio-modal textarea.fellowships").val(),
                  certifications : $("#surgeon-bio-modal textarea.certifications").val(),
                  awards : $("#surgeon-bio-modal textarea.awards").val(),
                  professionalSocieties : $("#surgeon-bio-modal textarea.professional-societies").val(),
                  sportsTeamsAffiliations : $("#surgeon-bio-modal textarea.sports-teams-affiliations").val(),
                  personalInterest : $("#surgeon-bio-modal textarea.personal-interest").val(),
                  spouseAndChildren : $("#surgeon-bio-modal textarea.spouse-and-children").val(),
                  publications : $("#surgeon-bio-modal #publicationsSummernote").summernote('code')
                };
                
                var lstEducation = [];
                var lstPostGraduate = [];
                // Prepare a list of all Education Records added in the Bio modal
                $.each($("#surgeon-bio-modal .surgeon-postgraduate tbody tr"), function(i, v) {
                //$("#surgeon-bio-modal .surgeon-education tbody tr").each(function(){
                    var startyear = $("td.startyear-marker", v).text();
                    var endyear = $("td.endyear-marker", v).text();
                    var trainingtype = $("td.trainingtype-marker", v).text();
                    var programtype = $("td.programtype-marker", v).text();
                    var programname = $("td.program-marker", v).text();
                    var program_id = $("td.program-marker", v).attr("program-id");
                    
                    lstPostGraduate.push(startyear + '::' + endyear + '::' + trainingtype + '::' + programtype + '::' + program_id);
                });
                
                // Prepare a list of all Post Graduate Records added in the Bio modal
                $.each($("#surgeon-bio-modal .surgeon-education tbody tr"), function(i, v) {
                    var startyear = $("td.startyear-marker", v).text();
                    var endyear = $("td.endyear-marker", v).text();
                    var degreetype = $("td.degreetype-marker", v).text();
                    var fieldofstudy = $("td.fieldofstudy-marker", v).text();
                    var institutionname = $("td.institution-marker", v).text();
                    var institution_id = $("td.institution-marker", v).attr("institution-id");
                    
                    lstEducation.push(startyear + '::' + endyear + '::' + degreetype + '::' + fieldofstudy + '::' + institution_id);
                });
                
                console.log('##-- Education record' +lstEducation);
                console.log('##-- Post graduate record' +lstPostGraduate);
                
                // Save the bio 
                var btnTxt = $("#surgeon-bio-modal button.btn-save-surgeon-bio").text();
                $("#surgeon-bio-modal button.btn-save-surgeon-bio").text("Saving...");
                $("#surgeon-bio-modal button").attr("disabled",true);
                Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.updatePractitionerBio}", 
                  bio,
                  lstEducation,
                  lstPostGraduate,
                    function(programParticipants, event) {
                        if(event.status) {
                            
                            $("#surgeon-bio-modal button.btn-save-surgeon-bio").text(btnTxt);
                            $("#surgeon-bio-modal button").removeAttr("disabled");
                            
                            $("#tab-bio table.education-details tbody").empty();
                            $("#tab-bio table.postGraduate-details tbody").empty();
                            
                            if( programParticipants !=  null )
                            {
                                console.log('Inside IF of Programs');
                                console.log('##--result of Program Participants After Save: '+ JSON.stringify(programParticipants));                            
                          
                                $.each(programParticipants.lstProgramParticipants, function(i,v){
                                
                                    if(globalDecodeEntities(v.Education_Level__c) == 'Undergraduate' ||
                                        globalDecodeEntities(v.Education_Level__c) == 'Graduate' ||
                                        globalDecodeEntities(v.Education_Level__c) == 'Doctorate')
                                    { 
                                        var startDate = v.Participant_Start_Date__c || "";
                                        var endDate = v.Participant_End_Date__c || "";  
                                        var fieldOfStudy = globalDecodeEntities( v.Field_of_Study__c) || "";
                                        var degreeType = globalDecodeEntities( v.Education_Type__c) || "";
                                        var startYear = '';
                                        var endYear = '';
                                        if(startDate != '')
                                            startYear = dateFormatterYearOnly(startDate);
                                        if(endDate != '')
                                            endYear = dateFormatterYearOnly(endDate);
                                       
                                        if(v.Institution__c != null)
                                            $("#tab-bio .education-details tbody").append('<tr data-part-id="'+v.Id+'"><td><p class="form-control-static">'+ startYear +'</p></td><td><p class="form-control-static">'+endYear+'</p></td><td><p class="form-control-static">'+ degreeType +'</p></td><td><p class="form-control-static">'+ fieldOfStudy +'</p></td><td><p class="form-control-static">'+ (globalDecodeEntities(v.Institution__r.Name) || "") +'</p></td>');
                                        else
                                            $("#tab-bio .education-details tbody").append('<tr data-part-id="'+v.Id+'"><td><p class="form-control-static">'+startYear+'</p></td><td><p class="form-control-static">'+endYear+'</p></td><td><p class="form-control-static">'+ degreeType +'</p></td><td><p class="form-control-static">'+ fieldOfStudy +'</p></td><td></td>');     
                                    }
                                    else if(globalDecodeEntities(v.Education_Level__c) == 'Postgraduate')
                                    {
                                        var startDate = v.Participant_Start_Date__c || "";
                                        var endDate = v.Participant_End_Date__c || "";                                    
                                        var educationType = globalDecodeEntities( v.Education_Type__c) || "";
                                        var programType = globalDecodeEntities( v.Program_Type__c) || "";
                                        var startYear = '';
                                        var endYear = '';
                                        if(startDate != '')
                                            startYear = dateFormatterYearOnly(startDate);
                                        if(endDate != '')
                                            endYear = dateFormatterYearOnly(endDate);                                    
                                        
                                        if(v.Program_Name__c != null)
                                            $("#tab-bio .postGraduate-details tbody").append('<tr data-part-id="'+v.Id+'"><td><p class="form-control-static">'+startYear+'</p></td><td><p class="form-control-static">'+endYear+'</p></td><td><p class="form-control-static">'+ educationType +'</p></td><td><p class="form-control-static">'+ programType +'</p></td><td><p class="form-control-static">'+ (globalDecodeEntities(v.Program_Name__r.Name) || "") +'</p></td>');
                                        else
                                            $("#tab-bio .postGraduate-details tbody").append('<tr data-part-id="'+v.Id+'"><td><p class="form-control-static">'+startYear+'</p></td><td><p class="form-control-static">'+endYear+'</p></td><td><p class="form-control-static">'+ educationType +'</p></td><td><p class="form-control-static">'+ programType +'</p></td><td></td>');
                                    }
                               
                              
                                });  // End of For- each block
                            }     // End of IF block
                            
                            // reload the new practitioner info with the data from the modal
                            //$("#tab-bio div.graduate").text( bio.graduate );
                            //$("#tab-bio div.undergraduate").text( bio.undergraduate );
                            //$("#tab-bio div.doctorate").text( bio.doctorate );
                            //$("#tab-bio div.internship").text( bio.internship );
                            $("#tab-bio div.residencies").text( bio.residencies );
                            $("#tab-bio div.fellowships").text( bio.fellowships );
                            $("#tab-bio div.certifications").text( bio.certifications );
                            $("#tab-bio div.awards").text( bio.awards );
                            $("#tab-bio div.professional-societies").text( bio.professionalSocieties );
                            $("#tab-bio div.sports-teams-affiliations").text( bio.sportsTeamsAffiliations );
                            //$("#tab-bio div.personal-interest").text( bio.personalInterest );
                            //$("#tab-bio div.spouse-and-children").text( bio.spouseAndChildren );                  
                            
                            $("#tab-bio div.publications").html( $('<div/>').html(programParticipants.objPractitioner.Publications__c).text() );
                            
                            // hide the modal and clear the values
                            $("#surgeon-bio-modal").modal("hide");
                            $("#surgeon-bio-modal textarea").val("");
                            $("#surgeon-bio-modal").attr("data-record-id", "");                  
                          
                            $("#surgeon-bio-modal button.btn-save-surgeon-bio").text("Save");
                            $("#surgeon-bio-modal button").attr("disabled",false);
                        }
                        // If Publication value is too large than data type
                        else if (event.type === 'exception')
                        {
                            if((event.message).includes('STRING_TOO_LONG, Publications')){
                                console.log('The exception message is----'+event.message);
                                console.log('The exception message ends----');
                                $("#surgeon-bio-modal .save-error").text("Publications exceeds the maximum character limit.");
                            }
                            // Mimansha Changes for CID - 000342 in Release 4.4       
                            // Modified Date:- 10/17/2017
                            else if((event.message).includes('Input too long'))
                            {
                                $("#surgeon-bio-modal .save-error").text("Publications exceeds the maximum character limit.");
                            }
                            
                            $("#surgeon-bio-modal button.btn-save-surgeon-bio").text(btnTxt);
                            $("#surgeon-bio-modal button").removeAttr("disabled");
                        }
                }); // End of VF Remoting          

              });  // End of Save Surgeon Bio Modal
              
              // ------------------------------Release 4.4 SAVE Changes ENDS for Mimansha------------------------------------
              
              $("#cancel-surgeon-bio-modal button.btn-close-surgeon-bio-warning").on("click", function(e) {                     
                $("#cancel-surgeon-bio-modal").modal('hide');
                $("#surgeon-bio-modal").modal('hide');
              }); //  end of Cancel Pref Card modal.cancel click
                    
              $("#surgeon-bio-modal button.surgeon-bio-close-btn").on("click", function() {
               
                $("#cancel-surgeon-bio-modal").modal("show");                   
              }); //  end of Pref Card modal.cancel click
          
              //Release 4.4
              //Component ID:- CID-000341
              //Developer:- Mimansha Samal
              //Modified Date:- 9/19/2017
              //Purpose:- Clear Graduate/UG/Doctorate/PG table in Surgeon Bio Modal on close modal
              // ------------------------------Release 4.4 Hide Surgeon Bio Modal STARTS for Mimansha------------------------------------
              $("#surgeon-bio-modal").on("hidden.bs.modal", function (e) {  
                    
                $("#surgeon-bio-modal .surgeon-education tbody").empty();
                $("#surgeon-bio-modal .surgeon-postgraduate tbody").empty();
                $("#surgeon-bio-modal .save-error").text("");
                document.getElementById("select-startYear").selectedIndex = 0;
                document.getElementById("select-EndYear").selectedIndex = 0;
                document.getElementById("select-DegreeType").selectedIndex = 0;
                document.getElementById("select-startPGYear").selectedIndex = 0;
                document.getElementById("select-EndPGYear").selectedIndex = 0;
                document.getElementById("select-TrainingType").selectedIndex = 0;
                $("#surgeon-bio-modal #select-TrainingType").change();
                $("#surgeon-bio-modal input").val("");
                $("#surgeon-bio-modal textarea").val("");   
                $("div.note-popover").css('display', 'none');
              });
              
              // ------------------------------Release 4.4 Hide Surgeon Bio Modal ENDS for Mimansha------------------------------------
          
           });
    
           //if current tab is marketing, switch to contact info           
           if($("#marketingTab").hasClass("active")){
            console.log('marketing tab active');
            $("#marketingTab").removeClass("active");
            $("#tab-activities").removeClass("active");
            $("#contacts").parent("li").addClass("active");
            $("#tab-contacts").addClass("active");
           }  
                           
          } //  end of  displayPractitionerDetail
       
          function adjustPardotActivityList(type){
         
        console.log(type + ' selected');
        
        var surgeonEmail = $("#surgeon-detail p.email").text();
        console.log('##--surgeonEmail: '+ surgeonEmail);
        
        //below should be removed when in prod.
        //surgeonEmail = 'mremley@STEELHEADSURGICAL.COM';
        loadPardotActivity(surgeonEmail, type, 0);
        /*if(type == 'Email'){
          $("div[pardot-type='Email']").css("display", "inline");
          $("div[pardot-type='Visitor']").css("display", "none");
        }
        else if(type == 'Visitor'){
          $("div[pardot-type='Email']").css("display", "none");
          $("div[pardot-type='Visitor']").css("display", "inline");

        }
        else{
          
          //$("#PardotActivityDisplay div.detail_div").show();
           $("div[pardot-type='Email']").css("display", "inline");
          $("div[pardot-type='Visitor']").css("display", "inline");

        }*/

 
      }
        /*
            Vishnu Release 4.4
            Addind methods that will be useful in Lead conversion
        */
        function showLeadDetails(act){
            console.log('##--opp: ' + JSON.stringify(act));
            console.log('opp.recId'  + act.recId);
            Visualforce.remoting.Manager.invokeAction("CS_ARCCExtension.retrieveLeadDetails",
            act.recId,
            function(result, event) {
                if (event.status) {
                    //  TODO: Add the logic to show the Lead Details modal pop-up
                    //showLeadDetailsNew(result, "#divLeadDetailsModal", true);
                    renderLeadDetails(result, "#divLeadDetailsModal", true);
                    //$("#lead-details-modal").modal('show');
                } else {
                    //  TODO: Display Error
                }
            }); //  end of remote action to get the Conf Member details

        }   //  end of showLeadDetails      
      //Swetha Penmethsa -Release3.2 -account pop up --adding duplicates -april-18
            function showAccountPopup(){
                Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrieveAccountAffiliationsByPractitioner}",
                    suregeonId,
                    function(results, event) {
                    var htm="";           
                    var rows = [];
                    for ( var i=0; i < results.length; i++) {
                    //alert(JSON.stringify(results[i].Id));
                    rows.push({
                    name: globalDecodeEntities(results[i].LastName)+", "+globalDecodeEntities(results[i].FirstName),
                    title: globalDecodeEntities(results[i].PersonTitle),
                    email: results[i].PersonEmail,
                    phone: results[i].Phone,
                    contact: results[i]
                    });
                    htm += "<div id='"+results[i].objAff.Id+"' data-account-id='"+results[i].objAff.Account_hcp__c+"'></div>";
                    
                    }
                    
                    $("#accountsTag").html(htm);                
                });                
                
                $("#add-account-affiliation-modal").modal("show");            
            } 
            //Swetha Penmethsa -Release3.2 -account pop up --adding duplicates -april-18
          function hideValidationMessage(){            
 $("#spnPhone").html("validated").hide();
 $("#spnMobilePhone").html("validated").hide();
}
          
          function loadPardotActivity(email, type, loadMore){
              
                if(email != null){

                console.log('Load loadPardotActivity begins!');

                if(!loadMore){
                  //First time loading Pardot
                  $("#pardot-refresh").show();
                  $("#PardotActivityDisplay").empty();  
                  console.log('First time loading Pardot');
                }
                else{
                  //Hide load more button
                  $(".load-more").hide();
                  $("#pardot-load-refresh").show();
                  
                  console.log('Load more pardot activities');
                }
                
                Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARContactsCC.retrievePractitionerPardotActivities}",
                        email, loadMore, function(result, event) {

                          if(event.status && result != null){
                          //Process pardot activities
                          console.log(result);

                          //Retrieve the list of Prospect activities
                          var prospectActivityList = result.result.visitor_activity;
                          console.log('Pardot activity list ');
                          console.log(prospectActivityList);

                          var activityTypeList = [];
                          
                          //iterate each event and construct the UI
                          $.each(prospectActivityList, function(i, v){                      
                              //filter based on the type list

                              if(type == 'Any Type' ){
                                htm = constructPardotActivity(v);
                                $("#PardotActivityDisplay").append(htm);  
                                console.log('New activity: ' + v.type_name + ' id: ' + v.email_id);
                                activityTypeList.push(v.type_name);

                              }else if(type == v.type_name){
                                htm = constructPardotActivity(v);
                                $("#PardotActivityDisplay").append(htm);  
                                console.log('New activity: ' + v.type_name + ' id: ' + v.email_id);
                                activityTypeList.push(v.type_name);
                              }

                          });

                          //Display Request More button
                          //Add a refresh icon for load more action
                          if(loadMore == false && type == 'Any Type'){
                            var b_htm = '<div class="col-sm-12 form-group detail_div" " style="display: inline;"> '+
                                '     <div class="col-sm-8"> '+ 
                                ' <button class="btn btn-primary btn-xs load-more">Load More</button>' +
                                '     </div> '+
                                ' </div>' +
                                '<div class="col-sm-12 form-group detail_div" " style="display: inline;"> '+
                                '     <div class="col-sm-8"> '+
                                '<i id="pardot-load-refresh" class="detail-busy fa fa-refresh fa-spin" style="font-size: 3rem; float: left; display:none;"></i>' +
                                '     </div> '+
                                ' </div>';
                            $("#PardotActivityDisplay").append(b_htm); 

                          }
                          $("#activityFilter").on("change", adjustPardotActivityList);
                          //Construct Activity Type Filter
                          if(activityTypeList.length!=0 && type == 'Any Type'){
                            $("#activityFilter").empty();
                            //remove duplicates
                            activityTypeList = activityTypeList.filter(function(elem, pos){
                              return activityTypeList.indexOf(elem) == pos;
                            });

                            activityTypeList.push('Any Type');
                            activityTypeList.sort();

                            console.log(activityTypeList);

                            $.each(activityTypeList, function(index, value){
                                var activityFilterHtml;
                                if(value == type){
                                  activityFilterHtml = constructActivityFilter(value, 1);
                                }
                                else{
                                  activityFilterHtml = constructActivityFilter(value, 0);
                                }
                                console.log('filter item: ' + activityFilterHtml);
                                $("#activityFilter").append(activityFilterHtml);
                            });

                          }
                          $("#pardot-refresh").hide();
                          $("#pardot-load-refresh").hide();
                      
                          $("#surgeon-detail i.activities-busy").hide();
                          $("#surgeon-detail a[href=#tab-activities]").show();
                        }   
                        else{
                                //Error handling
                                if(result == null && loadMore == false){
                                  console.log('empty list');
                                htm = '<div class="col-sm-12 form-group detail_div" " style="display: inline;"> '+
                                '     <div class="col-sm-8"> '+ 
                                ' No Activity Available from Pardot' +
                                '     </div> '+
                                ' </div>';
                                  $("#PardotActivityDisplay").html(htm); 

                                }
                                console.log('Status: ' + event.status + ' Type: ' + event.type + ' Message: ' + event.message + ' Where: ' + event.where);
                                //alert(result.Prospect.id);
                                 $("#pardot-refresh").hide();
                                $("#surgeon-detail i.activities-busy").hide();
                                $("#surgeon-detail a[href=#tab-activities]").show();

                          }                                 

                       });
              }
              else{
                console.log('No email found on the surgeon for pardot');

              }

              console.log('Done loadPardotActivity');

            }// end of loadPardotActivity function
            
            function constructActivityFilter(type, isSelect){

        if(isSelect){
          var html = '<option selected="selected" id="' + type + '" value="' + type + '">' + type + '</option>';
        }
        else{
          var html = '<option id="' + type + '" value="' + type + '">' + type + '</option>';
        }
        console.log(html);
        return html
      }

    function showProfilePicPopup(){
        $("#upload-surgeon-profile-pic-modal").modal("show");
    }
    
    function deleteProfilePic(){
        $("#delete-photo-modal").modal("show");
    }
        
          function constructPardotActivity(v){
                        if(v.type_name == 'Email'){
                          htm = '<div class="col-sm-12 form-group detail_div" '+ 'pardot-type="Email"'+ 'email-id="' + v.email_id + '" style="">' +
                                                        '     <div class="col-sm-1 form-group detail_div axis-detail-pg-data-href" style="margin-bottom:5px !important">  '+
                                                        
                                                        /*
                                                        commented by srinivas sattoor for 3.2
                                                        */
                                                        '<a  style="text-decoration: none; color:white; cursor:initial;"> ' +                                                       
                                                        '         <i class="'+getUIClassForActivity(v.type_name)+'"></i>' +
                                                        '</a> '+ 
                                                        
                                                        '     </div> '+
                                                        '     <div class="col-sm-8 form-group detail_div" email-id="'+ v.email_id +'style="word-break:break-all;padding:0 !important"> '+ 
                                                        
                                                        '<a class="pardot-email-detail" style="text-decoration: none; font-color:#3A9DDB;">' +
                                                        ''+v.type_name.toUpperCase()+
                                                        '</a> '+
                                                        
                                                        '<br/> '+
                                                        
                                                        
                                                        '     '+v.details + ' @' + v.campaign.name+
                                                        '     </div> '+
                                                        '     <div class="col-sm-3"> '+ 
                                                        '         '+ moment(v.created_at).format("MM-DD-YYYY") +
                                                        '     </div> '+
                                                        ' </div>';
                                                  

                        }
                        else if(v.type_name == 'Visit'){                
                          htm = '<div class="col-sm-12 form-group detail_div" pardot-type="Visitor" visit-id="' + v.visit_id + '" style="display: inline;"> '+
                                '     <div class="col-sm-1">  '+
                                 /*
                                  commented by srinivas sattoor for 3.2
                                  */
                                /* '<a class="btn btn-primary btn-xs" style="text-decoration: none; color:white; cursor:initial;"> ' + */                                                       
                                '<i class="'+getUIClassForActivity(v.type_name)+'"></i> '+
                                /* '</a> '+ */
                                
                                '     </div> '+
                                '     <div class="col-sm-8"> '+ 
                                
                                '    <a class="pardot-visit-detail" style="text-decoration: none;font-color:#3A9DDB;">' +
                                '         '+v.type_name.toUpperCase()+
                                ' </a>'+
                                
                                ' <br/> '+
                                '         '+v.details + ': ' + v.campaign.name +
                                '     </div> '+
                                '     <div class="col-sm-3"> '+ 
                                '         '+ moment(v.created_at).format("MM-DD-YYYY") +
                                '     </div> '+
                                ' </div>';

                       }
                        return htm;
                    }   //  end of constructActivity
                    

      function adjustPardotActivityList(type){
        console.log(type + ' selected');
        
        var surgeonEmail = $("#surgeon-detail p.email").text();
        console.log('##--surgeonEmail: '+ surgeonEmail);
        
        //below should be removed when in prod.
        //surgeonEmail = 'mremley@STEELHEADSURGICAL.COM';
        loadPardotActivity(surgeonEmail, type, 0);
        /*if(type == 'Email'){
          $("div[pardot-type='Email']").css("display", "inline");
          $("div[pardot-type='Visitor']").css("display", "none");
        }
        else if(type == 'Visitor'){
          $("div[pardot-type='Email']").css("display", "none");
          $("div[pardot-type='Visitor']").css("display", "inline");

        }
        else{
          
          //$("#PardotActivityDisplay div.detail_div").show();
           $("div[pardot-type='Email']").css("display", "inline");
          $("div[pardot-type='Visitor']").css("display", "inline");

        }*/

 
      }
      
       /*Author:Ansu Routray
      Release:4.3
      Date Modified 22/08/2017
      Component Id:CID-000463
      Purpose:method for retrieving orthoilustrtated details for surgeon
      */
      function openOrthoModalForAdd(){
           $('#ortho-add-modal div.ctag-list').empty();
           $('#ortho-add-modal').modal('show');           
           
      }
      var getMultiSelectValues = function getMultiSelectValues(el) {
                      var ctags = "";
                      $(el).next("div.ctag-list").children().each(function() {
                          var val = $(this).attr("data-record-id");
                          ctags += val+";";
                      });          
                      return ctags.substring(0, (ctags.length-1)); // trims off the trailing semicolon
      };
      var row_id = 1;   
      function addCourse(){
                          var checkCourseFields = false;
                          console.log("--------"+productItemsCount)
                          <!-- Modified on 18/10/2017 Added all the fields for Mandatory criteria by Santosh Release:4.4-->
                          var courseName = $("#ortho-add-modal input.course-name").val();
                          var courseType = $("#ortho-add-modal select.course-type").val();
                          var courseDate = $("#ortho-add-modal input.courseDate").val();
                          var location = $("#ortho-add-modal input.course-location").val();
                          var productItemsCount =$("#ortho-add-modal #product-terms").children().length;
                          console.log("--------"+productItemsCount)
                         if((courseName=='')||(courseName==null)){checkCourseFields=true;}            
                         if((courseType=='')||(courseType==null)||(courseType=='- Select -')){checkCourseFields=true;}                  
                         if((courseDate=='')||(courseDate==null)||(courseDate=='Invalid date')){checkCourseFields=true;}                   
                         if((location=='')||(location==null)){checkCourseFields=true;}                     
                         if( productItemsCount == 0 ) { checkCourseFields= true; }
                         
                         if(checkCourseFields){$("#newOrthoErrors").text("Mandatory fields missing");}
                         
                        
                        
                        else {
                            //$("#opportunity-modal .product-parts tbody").append('<tr data-part-id="'+$("#opportunity-modal .opportunity-part-number-typeahead").attr("data-part-id")+'"><td><p class="form-control-static">'+$("#opportunity-modal .opportunity-part-number-typeahead").val()+'</p></td><td><p class="form-control-static">'+$("#opportunity-modal .opportunity-part-description").val()+'</p></td><td><p class="form-control-static part-quantity">'+$("#opportunity-modal .opportunity-part-quantity").val()+'</p></td><td><p class="form-control-static">'+$("#opportunity-modal .opportunity-part-unit-price").val()+'</p></td><td id="total" data-total="'+$("#opportunity-modal .opportunity-part-total-price").attr("data-total-price")+'"><p class="form-control-static">'+$("#opportunity-modal .opportunity-part-total-price").text()+'</p></td><td class="pull-right"><button class="btn btn-xs btn-primary" onclick="$(this).parent().parent().remove()">delete</button></td>');
                            var proglist=getMultiSelectValues($("#ortho-add-modal select.program-type"));
                            $("#ortho-add-modal .course-parts tbody").append('<tr data-part-id="'+row_id+'"><td class="name-marker"><p class="form-control-static part-name">'+$("#ortho-add-modal .course-name").val()+'</p></td><td class="type-marker"><p class="form-control-static part-type">'+$("#ortho-add-modal .course-type").val()+'</p></td><td class="date-marker"><p class="form-control-static part-date">'+dateOnlyFormatter($("#ortho-add-modal .courseDate").val())+'</p></td><td class="location-marker"><p class="form-control-static part-location">'+$("#ortho-add-modal .course-location").val()+'</p></td><td id="multi-team" class="team-marker"><p class="form-control-static part-product-type">'+proglist+'</p></td><td class="pull-right"><button class="btn btn-xs btn-primary" onclick="editCoursePart(\''+row_id+'\')" >Edit</button>&nbsp;<button class="btn btn-xs btn-danger" onclick="courseDeleteConfirm(\''+row_id+'\')">Delete</button></td>');
                            row_id=row_id +1;  
                        $("#ortho-add-modal input.course-name").val('');
                        $("#ortho-add-modal input.course-location").val('');
                        $("#ortho-add-modal .course-type").val('');
                        $("#ortho-add-modal .courseDate").val('');
                        $("#ortho-add-modal select.program-type").val('');
                        $("#multi-program div.ctag-list").empty();
                        $("#newOrthoErrors").text("");
                         }
                        
                                
                    }   //  end of addPart 
                    
        $("select.multi-select").on("change", function(e) {
                     
                      var val = $(this).val();
                      var isDup = ( $(this).next("div.ctag-list").find("span.ctag[data-record-id='"+val+"']").length > 0 );
                      //swetha penmethsa---release 3.2--- for dropdown select on edit srgeon detail 
                     if ( val != "- Select -" && val != "0" && !isDup ) {
                       //swetha penmethsa---release 3.2--- for dropdown select on edit srgeon detail 
                         var label = $(this).find("option[value='"+val+"']").text();
                         var tag = '<span class="ctag alert alert-info" data-record-id="'+val+'">';
                         tag += label+'&nbsp;<span data-role="remove-tag"></span></span>';
                         $(this).next("div.ctag-list").append(tag);
                      }  
                      // reset back to "- SElect -"
                      $(this).val("0");
                      
                  });  
                  
                  $(".ctag-list").on("click","[data-role=remove-tag]", function() {
                      // removes tags from the tag-list
                      $(this).parent().remove();
                      
                      syncSelectionAfterDelete('#new-prefcard-modal');
                  });             
                    
      function editCoursePart(row_id)
      {
          $.each($("#ortho-add-modal .course-parts tbody tr"), function(i, v) {
               console.log('##--Inside tr loop rowpart id ' + $(v).attr("data-part-id"));
               if ($(v).attr("data-part-id") == row_id) {
                     //$("td.pull-right", v).remove();
                     //$(this).append('<td class="pull-right"><button type="button" class="btn btn-xs btn-primary pt-save-btn" onclick="savePart(\''+row_id+'\')">Save</button>&nbsp;&nbsp;<button class="btn btn-xs btn-danger delete-course-part" onclick="courseDeleteConfirm(\''+row_id+'\')">Delete</button></td>');
                     var name= $("td.name-marker", v).text();
                     $("#ortho-add-modal input.course-name").val(name);
                     console.log('##--name:'+ name);
                     
                     
                     var loc= $("td.location-marker", v).text();
                     console.log('##--location:location'+ loc);
                     $("#ortho-add-modal input.course-location").val(loc);
                     
                     var typ= $("td.type-marker", v).text();
                     console.log('##--type:'+ typ);
                     $("#ortho-add-modal .course-type").val(typ);
                  
                   
                     var dt=dateInputFormat( $("td.date-marker", v).text());
                     console.log('##--date:'+ dt);
                     $("#ortho-add-modal .courseDate").val(dt);
                     
                     var tm= $("td.team-marker", v).text();
                     $("#ortho-add-modal select.program-type").val(tm);
                     console.log('##--team:'+ tm);
                     
                      var lstTm = tm.split(";");
                      for ( var i=0; i < lstTm.length; i++ ) {
                      $("#multi-program div.ctag-list").append(obj2ctag({
                                      Name: globalDecodeEntities(lstTm[i]),
                                      Id: globalDecodeEntities(lstTm[i])                                      
                                    })); 
                                    }
                      //$("#multi-program div.ctag-list").empty();
                      $(this).remove();
                               
               
               }
               
               
          });
           
      }
      function saveCoursePart(row_id){
            
                console.log('##--row_id for part save: ' + row_id);
                $.each($("#ortho-add-modal .course-parts tbody tr"), function(i, v) {
                     console.log('##--Inside tr loop product save part id ' + $(v).attr("data-part-id"));
                    if ($(v).attr("data-part-id") == row_id) {
                         
                         //var product_type = $(v).attr("product-group-type");
                         //console.log('##--product Group Type: '+ product_type );
                         
                         $("td.pull-right", v).remove();
                         $(this).append('<td class="pull-right"><button type="button" class="btn btn-xs btn-primary pt-edit-btn" onclick="editCoursePart(\''+row_id+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-course-part" onclick="courseDeleteConfirm(\''+row_id+'\')">Delete</button></td>');
                         var cname= $(".course-parts .edit-pt-name").val();
                         console.log('##--course save name: '+ cname);
                         $("td.name-marker input", v).remove();
                         $("td.name-marker", v).append('<p class="form-control-static part-name">'+ cname +'</p>');
                         
                         var ctype= $(".course-parts .edit-pt-type").val();
                         console.log('##--course save type: '+ ctype);
                         $("td.type-marker select", v).remove();
                         $("td.type-marker", v).append('<p class="form-control-static part-type">'+ ctype +'</p>');
                         
                         var cdate= $(".course-parts .edit-pt-date").val();
                         console.log('##--course save date: '+ cdate);
                         $("td.date-marker div", v).remove();
                         $("td.date-marker", v).append('<p class="form-control-static part-date">'+ cdate +'</p>');
                         
                         var cteam= getMultiSelectValues($(".course-parts .edit-pt-team"));
                         console.log('##--course save team: '+ cteam);
                         $("td.team-marker select", v).remove();
                         $("td.team-marker", v).append('<p class="form-control-static part-product-type">'+ cteam +'</p>');
                         
                          var cloc= $(".course-parts .edit-pt-location").val();
                         console.log('##--course save loc: '+ cloc);
                         $("td.location-marker input", v).remove();
                         $("td.location-marker", v).append('<p class="form-control-static part-location">'+ cloc +'</p>');
                         
                    }
               });
     }
      var coursetoDel;
      function courseDeleteConfirm(ele)
      {
          coursetoDel=ele;
          $('#delete-course-modal').modal('show');
      }
      function deleteCourse()
      {
          console.log('coursetoDel====='+coursetoDel);
          $.each($("#ortho-add-modal .course-parts tbody tr"), function(i, v) {
                             console.log('##--Inside tr loop rowpart id ' + $(v).attr("data-part-id"));
                            if ($(v).attr("data-part-id") == coursetoDel) {
                                 $(v).remove(); 
                            }
          });          
          $('#delete-course-modal').modal('hide');
      }
      
      
                
        function deleteOrthoConfirm(){
              $('#delete-ortho-modal').modal('show');
                                
        }
       
       //Addition by Ansu ends for OI CID-000463 
            
        </script>
        
        <div class="wrapper wrapper-content">
             <div class="row">
                 <div class="col-xs-12">
                     <div class="ibox float-e-margins">
                         <div class="ibox-title">
                             <div class="clearfix">
                                 <div class="pull-left"> 
                                     <div id="detailHeader">
                                         <div class="text-pull-left">
                                            <h2>
                                                <b><span class="font-large">Surgeon Detail View</span></b>
                                                <i class="oppDetail-busy fa fa-refresh fa-spin" style="display:none"></i>
                                            </h2>
                                        </div>   <!-- End of text-pull-left -->
                                    </div> <!-- End of detailHeader -->
                                </div> <!-- End of pull-left -->
                                <div class="pull-right"> 
                                    <button type="button" class="btn btn-primary menu_btn btnViewSwitch"  tabindex="-1" id="oppListBtn" style="margin-right: 5px" onclick="switchSurgeonView('ListView')"><i class="fa fa-list"></i> List View</button> 
                                </div> 
                            </div>  <!-- End of clearfix -->
                        </div> <!-- End of ibox-title --> 
                        <div id="surgeonDetailView" style="background-color: white;">
                            <div class="row ibox">
                                <div class="col-xs-12">
                                    <div class="ibox-content box border_top_none light_border_top_bottom">
                                        <div class="clearfix">
                                            <div class="row">
                                                <!--<div class="col-md-3" style="padding-left:120px;width:250px">
                                                    <span>  
                                                        <div class="surgeonProfile-image">
                                                           
                                                            <img alt="image" class="img-circle profile-pic" src="" height="130" width="130" style="display:none"/>
                                                          </div> 
                                                      
                                                    <br/>
                                                   
                                                    <div style="display:inline-flex;padding-left:26px;width:145px;">
                                                    
                                                    <a href="" class="add-update-photo" onclick="showProfilePicPopup();">Add Photo</a>
                                                       
                                                    <a href="" class="delete-photo" style="width:51px;" onclick="deleteProfilePic();"></a>
                                                    </div>
                                                    </span> 

                                                </div>-->
                                                <div class="col-md-9" >
                                                    <div class="row">
                                                        <div class="col-md-11">
                                                            <p class="form-control-static muted_label">
                                                                
                                                            </p>
                                                        </div>
                                                        <div class="col-md-10">
                                                            <b><div class="surgeonName" style="font-size:25px;">surgeon name</div></b><br/>
                                                            <input type="hidden" id="surgeonId" name="surgeonId"/>
                                                        </div>
                                                       
                                                        <div class="col-sm-3 form-group" >
                                                            <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">PRACTICE NAME</p>
                                                            <div class="practiceName"></div>
                                                        </div>
                                                        <div class="col-sm-3 form-group">
                                                            <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">PRACTICE PHONE</p> 
                                                            <div class="practicePhone"></div>
                                                          
                                                        </div>
                                                        <div class="col-sm-3 form-group">
                                                            <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">MOBILE PHONE</p>
                                                            <div style="color:#3A9DDB; cursor:pointer;"></div>
                                                            <div class="mobilePhone">mobilePhone</div>
                                                        </div>
                                                        <div class="col-sm-3 form-group">
                                                            <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">EMAIL</p>
                                                            <div class="surgeonEmail_top"></div> 
                                                        </div> 
                                                    </div>
                                                </div>
                                                <div class="col-md-3" style="padding-left:120px;width:250px">
                                                    <span>  
                                                        <div class="surgeonProfile-image">
                                                            <!--<img src=""/>-->
                                                            <img alt="image" class="img-circle profile-pic" src="" height="130" width="130" style="display:none"/>
                                                          </div> 
                                                      
                                                    <br/>
                                                    <!--<input type="file"/>-->
                                                    <div style="display:inline-flex;padding-left:26px;width:145px;">
                                                    
                                                    <a href="" class="add-update-photo" onclick="showProfilePicPopup();">Add Photo</a>
                                                       
                                                    <a href="" class="delete-photo" style="width:51px;" onclick="deleteProfilePic();"></a>
                                                    </div>
                                                    </span> 

                                                </div>
                                                
                                            </div>
                                        </div>  <!-- end of clear fix -->
                                    </div> <!-- end of border_top_none -->
                                </div> 
                            </div> <!-- end of row ibox -->
                            
                            <div class="row ibox">
                                <div class="col-xs-12 grey_border_right">
                                    <div class="ibox-content box border_top_none">
                                        <div class="clearfix">
                                            <div class="tabs-container">
                                                <ul class="nav nav-tabs surgeon">
                                                    <li class="active">                                     
                                                        <a id="surgeonDetail" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-surgeonDetail" aria-expanded="">DETAILS
                                                        </a>
                                                        <i class="surgeonDetail-busy tab-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                    </li>
                                                    
                                                    
                                                    <li class="">
                                                        <a id="accountsList" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-accounts" aria-expanded="">ACCOUNT AFFILIATIONS</a>
                                                        <i class="accounts-busy tab-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                    </li>
                                                    
                                                    <li class="">
                                                        <a id="surgeonBiography" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-bio" aria-expanded="false">BIOGRAPHY</a>
                                                        <i class="surgeonBiography-busy tab-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                    </li>
                                                    
                                                 
                                                    <li class="">
                                                        <a id="surgeonRelatedContact" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-surgeonRelatedContact" aria-expanded="false">RELATED CONTACTS</a>
                                                        <i class="surgeonRelatedContact-busy tab-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                    </li>
                                                    <li id="marketingTab" class="">
                                                        <a id="surgeonMarketing-" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-activities" aria-expanded="false">MARKETING</a>
                                                        <i class="surgeonMarketing-busy tab-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                    </li>
                                                    <li class="">
                                                        <a id="surgeonPrefCard" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-surgeonPrefCard" aria-expanded="false">{!$Label.ARSurgeon_PrefCard}</a>
                                                        <i class="surgeonPrefCard-busy tab-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                    </li>
                                                    <li class=""><!--Author:Ansu Routray   Release:4.3   Date Modified :3/10/2017    Component Id:CID-000463 Purpose:tab for orthoilustrtated details for surgeon -->
                                                        <a id="surgeonOrthoillustrated" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-Orthoillustrated" aria-expanded="false">ORTHOILLUSTRATED
                                                        </a>
                                                        <i class="surgeonOrthoillustrated-busy tab-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                    </li>
                                                    <li class="">
                                                        <a id="surgeonActivity" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-accountActivity" aria-expanded="false">ACTIVITY</a>
                                                        <i class="surgeonActivity-busy tab-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                    </li>
                                                    
                                                </ul>
                                                <div class="tab-content">
                                                    <!-- Surgeon Detail tab -->
                                                    <div id="tab-surgeonDetail" class="tab-pane active">
                                                          <div class="full-height-scroll">
                                                            <div class="clearfix">
                                                                <button class="btn btn-primary pull-right btn-xs edit-surgeon-btn">
                                                                    <i class="edit-busy fa fa-refresh fa-spin" style="display:none"></i> Edit
                                                                </button>
                                                                  <div class="row ibox">
                                                                      <div class="col-sm-6">
                                                                          <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">Full Name
                                                                              <div class="name" style="height:40px;"></div>        
                                                                          </p>
                                                                      </div>
                                                                      <div class="col-sm-6"> 
                                                                          <!--/**
                                                                            * @author Original: Swetha Penmethsa TCS, Last Modified:  Aug/15/2017
                                                                            * @release: 4.3
                                                                            * @component: CID-000447
                                                                            * @description: Minor Edits on Surgeon Page 
                                                                            */-->                                                                           
                                                                          <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">Website</p>
                                                                              <div>
                                                                                  <a href="" target="_blank" style="color:#3A9DDB; word-wrap:break-word;" onclick="makeCall('mainSecWeb');" class="website axis-detail-pg-data-href"></a>  
                                                                              </div>                                                                       
                                                                              <!--<div class="preferredWebsite" style="height:40px;"></div> -->
                                                                                                                                
                                                                       </div>
                                                                  </div>
                                                                  
                                                                  <div class="row ibox">
                                                                      <div class="col-sm-6">
                                                                          <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">Preferred Name
                                                                              <div class="Preferredname" style="height:40px;"></div>        
                                                                          </p>
                                                                      </div>
                                                                      <div class="col-sm-6">
                                                                          <!-- Added by Swetha -- 08/13/2017 -- START -->  
                                                                          <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">{!$Label.CS_Email}
                                                                              <div style="float:right;">
                                                                                  <a href="#" class=""><i class="" style="display: inline;"></i></a>                                                                         
                                                                              </div>
                                                                              <div class="surgeonEmail" style="height:40px;"></div>                                                                                  
                                                                          </p>
                                                                          <!-- Added by Swetha -- 08/13/2017 -- END -->        
                                                                       </div>
                                                                  </div>
                                                                   
                                                                  <div class="row ibox">
                                                                      <div class="col-sm-6">
                                                                          <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">{!$Label.CS_Designation}
                                                                              <div class="designation" style="height:40px;"></div>        
                                                                          </p>
                                                                      </div>
                                                                      <div class="col-sm-6">
                                                                          <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">Clinic Days
                                                                              <div class="clinicDays" style="height:40px;"></div>        
                                                                          </p>                                                             
                                                                       </div>
                                                                  </div>
                                                                  
                                                                  
                                                                  <div class="row ibox">
                                                                      <div class="col-sm-6">
                                                                          <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">{!$Label.CS_SurgeonType}
                                                                              <div class="user-type" style="height:40px;"></div>        
                                                                          </p>
                                                                      </div>
                                                                      <div class="col-sm-6">
                                                                          <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">Surgery Days
                                                                              <div class="surgeryDays" style="height:40px;"></div>        
                                                                          </p>                                                             
                                                                       </div>
                                                                  </div>
                                                                  
                                                                  <div class="row ibox">
                                                                      <div class="col-sm-6">
                                                                          <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">{!$Label.CS_NPI}
                                                                              <div class="npi" style="height:40px;"></div>        
                                                                          </p>
                                                                      </div>
                                                                     <div class="col-sm-6">
                                                                          <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">{!$Label.CS_PracticeAddr}
                                                                              <div id="mailing-address" class="mailing-address" style="height:40px;"></div>
                                                                          </p>                                                             
                                                                       </div> 
                                                                  </div>
                                                                                                                                    
                                                                  <div class="row ibox"> 
                                                                      <div id="divMapSibling" class="col-xs-6">
                                                                          <div class="row">
                                                                              <div class="col-sm-12" >
                                                                                    <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">{!$Label.CS_NativeLanguage}
                                                                                        <div class="lang" style="height:40px;"></div>
                                                                                    </p>
                                                                               </div>
                                                                               <div class="col-sm-12" >
                                                                                    <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">{!$Label.CS_Gender}
                                                                                        <div class="gender" style="height:40px;"></div>
                                                                                    </p>
                                                                               </div> 
                                                                               
                                                                               <div class="col-sm-12" >
                                                                                    <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">Practice Focus
                                                                                        <div class="practiceFocus" style="padding-top:10px;min-height:90px;white-space: pre-wrap;word-break: break-all; word-wrap: break-word;"></div>
                                                                                    </p>
                                                                               </div>
                                                                               
                                                                               <div class="col-sm-12" >
                                                                                    <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">{!$Label.CS_AreaInterest}
                                                                                        <div class="area-of-interest" style="min-height:70px;white-space: pre-wrap;word-break: break-all; word-wrap: break-word;"></div>
                                                                                    </p>
                                                                               </div>
                                                                               
                                                                               <div class="col-sm-12" >
                                                                                    <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">Arthex Marketing Emails
                                                                                        <div class="email-opt-out" style="min-height:40px;white-space: pre-wrap;word-break: break-all; word-wrap: break-word;"></div>
                                                                                    </p>
                                                                               </div>
                                                                               
                                                                               <div class="col-sm-12" >
                                                                                          <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">Consultant &nbsp;
                                                                                         <input type="checkbox" id="consultant-status" class="consultant-status" disabled="true" />   
                                                                                        <div class="consultant" style="height:40px;"></div>
                                                                                    </p>
                                                                                    
                                                                               </div>
                                                                               
                                                                               <div class="col-sm-12" >
                                                                                    <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">{!$Label.CS_AssignedTo}
                                                                                        <div class="assigned-team" style="height:40px;"></div>
                                                                                    </p>
                                                                               </div>
                                                                          </div>
                                                                          
                                                                          
                                                                           
                                                                      </div>
                                                                      <div id="divMapContainer" class="col-xs-3">
                                                                                <div id="divMap"></div>
                                                                           </div>
                                                                           
                                                                  </div>
                                                                                                            
                                                          </div>  
                                                          </div>
                                                          
                                                    </div>
                                                    
                                                    <!-- Surgeon Accounts tab -->
                                                     <div id="tab-accounts" class="tab-pane">
                                                            <div class="text-right" style="padding:5px 0px">
                                                            <button class="btn btn-xs btn-primary new-contact" data-toggle="modal" onclick="showAccountPopup();">{!$Label.CS_NewButton}</button>
                                                        </div> 
                                                        
                                                          <div id="accountGrid" style="border:thin; border-color:gray; height: 600px;" class="ag-bootstrap"></div>
                                                           
                                                    </div>
                                                    
                                                    <!-- Surgeon Biography tab -->
                                                    <!--<div id="tab-surgeonBiography" class="tab-pane">
                                                          <div class="full-height-scroll">
                                                            <div class="clearfix">
                                                            </div>
                                                          </div>
                                                    </div>-->
                                                    
                                                     <!--      //Release 4.4
                                                               //Component ID:- CID-000341
                                                               //Developer:- Mimansha Samal
                                                               //Date:- 9/18/2017
                                                               //Purpose:- Re-define Surgeon Bio Tab   -->
                                                    <div id="tab-bio" class="tab-pane">
                                                    <!--<div> -->
                                                      <div class="full-height-scroll">
                                                        <div class="clearfix">
                                                            <button class="btn btn-primary pull-right btn-xs edit-surgeon-bio-btn">
                                                               {!$Label.CS_Edit}
                                                            </button>
                                                            
                                                            <!--</div>                                                        
                                                            <div class="row ibox">
                                                                <div class="col-sm-6">
                                                                  <div class="form-group">
                                                                      <label>Undergraduate</label>
                                                                      <div class="undergraduate-year" style="min-height:10px;"></div>
                                                                      <div class="undergraduate-type" style="min-height:10px;"></div>
                                                                      <div class="undergraduate" style="min-height:30px;white-space: pre-wrap;"></div>
                                                                  </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                  <div class="form-group">
                                                                      <label>Certifications</label>
                                                                      <div class="certifications-year" style="min-height:10px;"></div>
                                                                      <div class="certifications-type" style="min-height:10px;"></div>
                                                                      <div class="certifications" style="min-height:30px;white-space: pre-wrap;"></div>
                                                                  </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="row ibox">
                                                                <div class="col-sm-6">
                                                                  <div class="form-group">
                                                                      <label>Graduate</label>
                                                                      <div class="graduate-year" style="min-height:10px;"></div>
                                                                      <div class="graduate-type" style="min-height:10px;"></div>
                                                                      <div class="graduate" style="min-height:30px;white-space: pre-wrap;"></div>
                                                                  </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                  <div class="form-group">
                                                                      <label>Awards</label>
                                                                      <div class="awards-year" style="min-height:10px;"></div>
                                                                      <div class="awards-type" style="min-height:10px;"></div>
                                                                      <div class="awards" style="min-height:30px;white-space: pre-wrap;"></div>
                                                                  </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="row ibox">
                                                                <div class="col-sm-6">
                                                                  <div class="form-group">
                                                                      <label>Doctorate</label>
                                                                      <div class="doctorate-year" style="min-height:10px;"></div>
                                                                      <div class="doctorate-type" style="min-height:10px;"></div>
                                                                      <div class="doctorate" style="min-height:30px;white-space: pre-wrap;"></div>
                                                                  </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                  <div class="form-group">
                                                                      <label>Professional Societies</label>
                                                                      <div class="professional-year" style="min-height:10px;"></div>
                                                                      <div class="professional-type" style="min-height:10px;"></div>
                                                                      <div class="professional-societies" style="min-height:30px;white-space: pre-wrap;"></div>
                                                                  </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="row ibox">
                                                                <div class="col-sm-6">
                                                                  <div class="form-group">
                                                                      <label>Residencies</label>
                                                                      <div class="residencies-year" style="min-height:10px;"></div>
                                                                      <div class="residencies-type" style="min-height:10px;"></div>
                                                                      <div class="residencies" style="min-height:30px;white-space: pre-wrap;"></div>
                                                                  </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                  <div class="form-group">
                                                                      <label>Sports Teams Affiliations</label>
                                                                      <div class="sports-year" style="min-height:10px;"></div>
                                                                      <div class="sports-type" style="min-height:10px;"></div>
                                                                      <div class="sports-teams-affiliations" style="min-height:30px;white-space: pre-wrap;"></div>
                                                                  </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="row ibox">
                                                                <div class="col-sm-6">
                                                                  <div class="form-group">
                                                                      <label>Fellowships</label>
                                                                      <div class="fellowships-year" style="min-height:10px;"></div>
                                                                      <div class="fellowships-type" style="min-height:10px;"></div>
                                                                      <div class="fellowships" style="min-height:30px;white-space: pre-wrap;"></div>
                                                                  </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                  <div class="form-group" style="display:none">
                                                                      <label>Personal Interest</label>
                                                                      <div class="personal-interest">None</div>
                                                                  </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="row ibox">
                                                                <div class="col-sm-6">
                                                                  <div class="form-group" style="display:none">
                                                                      <label>Spouse and Children</label>
                                                                      <div class="spouse-and-children">None</div>
                                                                  </div>
                                                                </div>
                                                            </div>
                                                            -->
                                                        
                                                            <div id="divSurgeonEducationBio">
                                                                <div class="row">
                                                                    <div class="col-xs-12"> 
                                                                        <div class="ibox-content box border_top_none">
                                                                        
                                                                            <div class="row"> 
                                                                                <div class="col-xs-12">
                                                                                    <h3 class="section-header-surgeon-details">{!$Label.ARSurgeon_BioEducation}</h3>
                                                                                </div>     
                                                                            </div>
                                                                            <div id="divSurgeonEducationDetail" class="collapse in">
                                                                                <table class="table ibox-table education-details" id = "tableDetailEducation">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <th style="width:10%">{!$Label.ARSurgeon_StartYear}</th>
                                                                                            <th style="width:10%">{!$Label.ARSurgeon_EndYear}</th>
                                                                                            <th style="width:15%">{!$Label.ARSurgeon_DegreeType}</th>
                                                                                            <th style="width:15%">{!$Label.ARSurgeon_FieldOfStudy}</th>
                                                                                            <th style="width:50%">{!$Label.ARSurgeon_Institution}</th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody> 
                                                                                    </tbody> 
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div> <!-- end of divSurgeonEducationBio-->
                                                        
                                                            <div id="divSurgeonPostGraduateBio">
                                                                <div class="row">
                                                                    <div class="col-xs-12"> 
                                                                        <div class="ibox-content" style="width: 100%;border-top:solid 1px #D3D3D3 !important">
                                                                        
                                                                            <div class="row"> 
                                                                                <div class="col-xs-12">
                                                                                    <h3 class="section-header-surgeon-details">{!$Label.ARSurgeon_PostGraduate}</h3>
                                                                                </div>     
                                                                            </div>
                                                                            <div id="divSurgeonPostGraduateDetail" class="collapse in">
                                                                                <table class="table ibox-table postGraduate-details" id = "tableDetailPostGraduate">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <th style="width:10%">{!$Label.ARSurgeon_StartYear}</th>
                                                                                            <th style="width:10%">{!$Label.ARSurgeon_EndYear}</th>
                                                                                            <th style="width:15%">{!$Label.ARSurgeon_DegreeType}</th>
                                                                                            <th style="width:15%">{!$Label.ARSurgeon_ProgramType}</th>
                                                                                            <th style="width:50%">{!$Label.ARSurgeon_ProgramName}</th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody> 
                                                                                    </tbody> 
                                                                                </table>
                                                                            </div>
                                                                            <div id="divPostGraduateNotes" class="collapse in">
                                                                                <div class="GGrid col-lg-6">
                                                                                    <div class="GGrid-content"> <b>Residency Notes</b> <br/> 
                                                                                        <div class="residencies"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="GGrid col-lg-6">
                                                                                    <div class="GGrid-content"> <b>Fellowship Notes</b> <br/> 
                                                                                        <div class="fellowships"></div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div> <!-- end of divSurgeonPostGraduateBio-->
                                                            <br/>  
                                                            <br/> 
                                                            <div class="GEducation-details" id="divSurgeonBioNotes">
                                                                <div class="row">
                                                                    <div class="col-xs-12"> 
                                                                        <div class="ibox-content" style="width: 100%;border-top:solid 1px #D3D3D3 !important"> 
                                                                            <div class="row"> 
                                                                                <div class="col-xs-12">
                                                                                    <h3 class="section-header-surgeon-details">Other Information</h3>
                                                                                </div>
                                                                                            
                                                                            </div> 
                                                                            <div id="divBiographyNotes" class="collapse in">
                                                                                <div class="GGrid col-lg-6">
                                                                                    <div class="GGrid-content"> <b>Certifications</b> <br/> 
                                                                                        <div class="certifications"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="GGrid col-lg-6">
                                                                                    <div class="GGrid-content"> <b>Awards</b> <br/> 
                                                                                        <div class="awards"></div>
                                                                                    </div>
                                                                                </div>      
                                                                                <div class="GGrid col-lg-6">
                                                                                    <div class="GGrid-content"> <b>Professional Societites</b> <br />
                                                                                        <div class="professional-societies"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="GGrid col-lg-6">
                                                                                    <div class="GGrid-content"> <b>Sports Teams Affilliations</b> <br /> 
                                                                                        <div class="sports-teams-affiliations"></div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="GGrid col-lg-12">
                                                                                    <div class="GGrid-content">
                                                                                        <b>Publications</b> <br /> 
                                                                                        <div class="publications"></div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div> <!-- end of GEducation-details -->
                                                            <!--
                                                            <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                  <label>{!$Label.CS_Education}</label>
                                                                  <div class="education"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_Certification}</label>
                                                                  <div class="certifications"></div>
                                                               </div>
                                                               <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_Undergraduate}</label>
                                                                  <div class="Undergraduate"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_Graduate}</label>
                                                                  <div class="Graduate"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_Doctorate}</label>
                                                                  <div class="Doctorate"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_Internship}</label>
                                                                  <div class="internship"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_Awards}</label>
                                                                  <div class="awards"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_Residencies}</label>
                                                                  <div class="residencies"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_ProfessionalSocieties}</label>
                                                                  <div class="professional-societies"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_Fellowships}</label>
                                                                  <div class="fellowships"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6" style="display:none">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_Competitions}</label>
                                                                  <div class="competitions"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_SpouseandChildren}</label>
                                                                  <div class="spouse-and-children"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_PersonalInterest}</label>
                                                                  <div class="personal-interest"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6">
                                                               <div class="GGrid-content">
                                                                <label>Sports Team Affiliations</label>
                                                                  <div class="favorite-sports-teams"></div>
                                                               </div>
                                                            </div>
                                                            <div class="GGrid col-lg-6" style="display:none">
                                                               <div class="GGrid-content">
                                                                <label>{!$Label.CS_Competitors}</label>
                                                                  <div class="competitors"></div>
                                                               </div>
                                                            </div>
                                                            -->
                                                        </div> <!-- end of clearfix div -->
                                                      </div> <!-- end of full height scroll div -->
                                                    </div>   <!-- end of Surgeon bio tab div --> 
                                                
                                                    <!-- Surgeon Schedule tab -->
                                                   
                                                    
                                                    <!-- Surgeon Related Contacts tab -->
                                                    <!-- <div id="tab-surgeonRelatedContact" class="tab-pane">
                                                          <div class="full-height-scroll">
                                                            <div class="clearfix">
                                                                Surgeon Related Contacts will be here
                                                            </div>
                                                          </div>
                                                    </div> -->
                                                    <div id="tab-surgeonRelatedContact" class="tab-pane">
                                                           <!--<div class="full-height-scroll">
                                                          </div>-->
                                                          <div class="clearfix">
                                                                <div class="text-right" style="padding:5px 0px">
                                                                 <button class="btn btn-xs btn-primary new-contact" onclick="hideValidationMessage();" data-toggle="modal" data-target="#provider-contact-modal">Add</button>
                                                                </div>
                                                            </div>
                                                          <div id="contactGrid" style="border:thin; height: 600px;" class="ag-bootstrap"></div>
                                                           
                                                    </div>
                                                    
                                                    
                                                    <!-- Surgeon Marketing tab -->
                                                    <!--<div id="tab-surgeonMarketing" class="tab-pane">
                                                        <div class="full-height-scroll">
                                                            <div class="clearfix"> 
                                                            
                                                            Surgeon Marketing will be here
                                                                
                                                            </div>
                                                        </div>
                                                    </div>-->
                                                    
                                                    <div id="tab-activities" class="tab-pane">
                                                    <div>
                                                      <div class="full-height-scroll" style="overflow: hidden; width: auto; height: 100%;"> 
                                                         <div class="row">
                                                        <div class="col-sm-6 form-group detail_div">
                                                          <div class="form-group">
                                                              <label for="activityFilter" class="col-sm-2 control-label" style="padding-top: 7px">Show: </label>
                                                              <div class="col-sm-10">
                                                              
                                                               <select class="form-control" id="activityFilter" onchange="javascript:adjustPardotActivityList(this.value)">
                                                                 
                                                                  <!-- select class="form-control" id="activityFilter" onchange="javascript:loadPardotActivity('mremley@STEELHEADSURGICAL.COM', this.value)"-->
                                                                  <!--option value="AnyType">Any Type</option>
                                                                  <option value="Email">Email</option>
                                                                <option value="LandingPage">Landing Page</option>
                                                                <option value="Webinar">Webinar</option-->
                                                              </select>
                                                              </div>
                                                          <i id="pardot-refresh" class="detail-busy fa fa-refresh fa-spin" style="font-size: 3rem; float: left; display:none;"></i>
                                                          

                                                          </div>

                                                        </div>
                                                       </div>
                                                        <div id="PardotActivityDisplay" class="row">
                                                        </div>
                                                        </div>
                                                      </div>
                                                  </div>
                                                  
                                                    <!-- Surgeon Preference Card tab -->
                                                    <div id="tab-surgeonPrefCard" class="tab-pane">
                                                        <div class="full-height-scroll">
                                                            <div class="clearfix">
                                                                <div class="row">
                                                                    <div class="col-sm-12 form-group detail_div"> 
                                                                        <div class="col-sm-6 form-group detail_div">
                                                                            <div class="form-group">
                                                                                <label for="prefCardFilter" class="col-sm-2 control-label" style="padding-top: 7px">{!$Label.ARSurgeon_Show}</label>
                                                                                <div class="col-sm-8">
                                                                                    <select class="form-control pref-cards">
                                                                                      <option value="">--None--</option>
                                                                                    </select>
                                                                                </div>
                                                                                <i id="prefcard-refresh" class="detail-busy fa fa-refresh fa-spin" style="font-size: 2rem; float: left; display:none;"></i>
                                                                            </div>
                                                                        </div>  
                                                                        <div class="col-sm-6 form-group detail_div">
                                                                            <div class="text-right">
                                                                                <button class="btn btn-xs btn-primary btn-pdf-pref-card"><i class="edit-pref-card-busy fa fa-refresh fa-spin" style="display:none"></i> {!$Label.ARSurgeon_PDF}</button>
                                                                                <button class="btn btn-xs btn-primary btn-edit-pref-card"><i class="edit-pref-card-busy fa fa-refresh fa-spin" style="display:none"></i> {!$Label.ARSurgeon_Edit}</button>
                                                                                <button class="btn btn-xs btn-primary btn-add-pref-card"><i class="add-pref-card-busy fa fa-refresh fa-spin" style="display:none"></i>{!$Label.ARSurgeon_Add}</button>
                                                                                
                                                                            </div>
                                                                        </div>
                                                                        <hr style="width: 100%;border-top:solid 1px #D3D3D3 !important"/>
                                                                    </div>
                                                                    
                                                                </div>
                                                                
                                                                <span class="pref-card-data">
                                                                    <div class="row">
                                                                        <div class="col-sm-12"> 
                                                                            <div class="col-sm-6" style="width:53%">
                                                                                <div class="col-sm-4">
                                                                                    <label>{!$Label.ARSurgeon_CardName}</label>
                                                                                </div>
                                                                                <div class="col-sm-8">
                                                                                    <div class="prefCardName" style="display:inline"></div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-6" style="width:47%">
                                                                                <div class="col-sm-4"> 
                                                                                    <label>&nbsp;{!$Label.ARSurgeon_CreatedBy}</label>
                                                                                </div>
                                                                                <div class="col-sm-8">
                                                                                    <div class="createdBy" style="display:inline"></div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="col-sm-12 "> 
                                                                            <div class="col-sm-6" style="width:53%">
                                                                                <div class="col-sm-4">
                                                                                    <label>{!$Label.ARSurgeon_Position}</label>
                                                                                </div>
                                                                                <div class="col-sm-8">
                                                                                    <div class="position" style="display:inline"></div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-6" style="width:47%">
                                                                                <div class="col-sm-4">
                                                                                    <label>&nbsp;{!$Label.ARSurgeon_LastModifiedBy}</label>
                                                                                </div>
                                                                                <div class="col-sm-8">
                                                                                    <div class="lastModified" style="display:inline"></div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                </div>   
                                                                        
                                                                
                                                                <br/>   
                                                                
                                                                <div id="divProductTeamAndProcedures">
                                                                        <div class="row">
                                                                            <div class="col-xs-12"> 
                                                                                <div class="ibox-content box border_top_none">
                                                                                    <div id="divTableProductTeamAndProcedures" class="collapse in">
                                                                                        <table class="table ibox-table taxonomy-details" id = "tableDetailTaxonomy">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th style="width:25%">{!$Label.ARSurgeon_ProductTeam}</th>
                                                                                                    <th style="width:30%">{!$Label.ARSurgeon_Procedure}</th>
                                                                                                    <th style="width:45%">{!$Label.ARSurgeon_SurgicalTechnique}</th> 
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody> 
                                                                                            </tbody> 
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                </div> <!-- end of divProductTeamAndProcedures-->
                                                                 
                                                                
                                                                <div id="divImplantsAndDisposables">
                                                                        <div class="row">
                                                                            <div class="col-xs-12"> 
                                                                                <div class="ibox-content" style="width: 100%;border-top:solid 1px #D3D3D3 !important">
                                                                                
                                                                                    <div class="row"> 
                                                                                      <div class="col-xs-9">
                                                                                          <h3 class="section-header-surgeon-details">{!$Label.ARSurgeon_Implants}</h3>
                                                                                      </div>
                                                                                        <div class="col-xs-3">
                                                                                            
                                                                                            <div class="pull-right">
                                                                                                <i id="fc-Implants-toggle" class="fa fa-chevron-up"
                                                                                                    data-target="divTableImplantsAndDisposables"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                        
                                                                                    </div>
                                                                                    <div id="divTableImplantsAndDisposables" class="collapse in">
                                                                                        <table class="table ibox-table product-parts">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th style="width:25%">{!$Label.AROpportunity_PartNumber}</th>
                                                                                                    <th style="width:30%">{!$Label.AROpportunity_Description}</th>
                                                                                                    <th style="width:15%">{!$Label.AROpportunity_Qty}</th>
                                                                                                    <th style="width:15%">{!$Label.AROpportunity_UnitPrice}</th>
                                                                                                    <th style="width:15%">{!$Label.AROpportunity_TotalPrice}</th>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody>
                                                                                                
                                                                                            </tbody>
                                                                                            <tfoot>
                                                                                                <tr>
                                                                                                    <td colspan="3">&nbsp;</td>
                                                                                                    <td><b>{!$Label.AROpportunity_Total}</b></td>
                                                                                                    <td id="totalProductAmount"><b>-</b></td>
                                                                                                </tr>
                                                                                            </tfoot>
                                                                                        </table>
                                                                                    </div> <!-- end of divTableImplantsAndDisposables -->
                                                                                </div>
                                                                            </div>
                                                                        </div> 
                                                                </div>   <!-- end of divImplantsAndDisposables -->
                                                                
                                                                <div id="divInstrumentsAndEquipment">
                                                                        <div class="row">
                                                                            <div class="col-xs-12"> 
                                                                                <div class="ibox-content" style="width: 100%;border-top:solid 1px #D3D3D3 !important"> 
                                                                                    <div class="row"> 
                                                                                        <div class="col-xs-9">
                                                                                            <h3 class="section-header-surgeon-details">{!$Label.ARSurgeon_Instruments}</h3>
                                                                                        </div>
                                                                                        <div class="col-xs-3">
                                                                                            <div class="pull-right">
                                                                                                <i id="fc-Instruments-toggle" class="fa fa-chevron-up"
                                                                                                    data-target="divTableInstrumentsAndEquipment"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div> 
                                                                                    <div id="divTableInstrumentsAndEquipment" class="collapse in">
                                                                                        <table class="table ibox-table IEproduct-parts">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th style="width:25%">{!$Label.AROpportunity_PartNumber}</th>
                                                                                                    <th style="width:30%">{!$Label.AROpportunity_Description}</th>
                                                                                                    <th style="width:45%">{!$Label.AROpportunity_Qty}</th>
                                                                                                    
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody> 
                                                                                            </tbody> 
                                                                                        </table>
                                                                                    </div>
                                                                                </div>  
                                                                            </div>
                                                                        </div>
                                                                </div> <!-- end of divInstrumentsAndEquipment -->
                                                                
                                                                <div class="GProcedure-details" id="divNotes">
                                                                        <div class="row">
                                                                            <div class="col-xs-12"> 
                                                                                <div class="ibox-content" style="width: 100%;border-top:solid 1px #D3D3D3 !important"> 
                                                                                    <div class="row"> 
                                                                                        <div class="col-xs-9">
                                                                                            <h3 class="section-header-surgeon-details">{!$Label.ARSurgeon_Notes}</h3>
                                                                                        </div>
                                                                                        <div class="col-xs-3">
                                                                                            <div class="pull-right">
                                                                                                <i id="fc-Prior-Chart-toggle" class="fa fa-chevron-up"
                                                                                                    data-target="divTableNotes"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div> 
                                                                                   <div id="divTableNotes" class="collapse in">
                                                                                   <div class="GGrid col-lg-4">
                                                                                      <div class="GGrid-content"> <b>{!$Label.CS_Disposables}</b> <br/> 
                                                                                        <div class="disposables"></div>
                                                                                      </div>
                                                                                   </div>
                                                                                   <div class="GGrid col-lg-4">
                                                                                      <div class="GGrid-content"> <b>{!$Label.CS_Sutures}</b> <br/> 
                                                                                        <div class="sutures"></div>
                                                                                      </div>
                                                                                   </div>
                                                                                   <div class="GGrid col-lg-4">
                                                                                      <div class="GGrid-content"> <b>{!$Label.CS_Medications}</b> <br />
                                                                                        <div class="medications"></div>
                                                                                      </div>
                                                                                   </div>
                                                                                   <div class="GGrid col-lg-4">
                                                                                      <div class="GGrid-content"> <b>{!$Label.CS_Equipment}</b> <br /> 
                                                                                        <div class="equipment"></div>
                                                                                      </div>
                                                                                   </div>
                                                                                   <div class="GGrid col-lg-8">
                                                                                      <div class="GGrid-content">
                                                                                         <b>{!$Label.CS_Equipment_Notes}</b> <br /> 
                                                                                         <div class="equipment-notes"></div>
                                                                                      </div>
                                                                                   </div>
                                                                                   </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                </div> <!-- end of GProcedure-details -->
                                                                
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <!-- Surgeon Activity tab -->
                                                    <!--<div id="tab-surgeonActivity" class="tab-pane">
                                                          <div class="full-height-scroll">
                                                            <div class="clearfix">
                                                            </div>
                                                          </div>
                                                    </div>-->
                                                    <!-- Account Activity tab -->
                                                    <div id="tab-accountActivity" class="tab-pane">
                                                        <div class="full-height-scroll">
                                                            <div class="clearfix">                                                      
                                                               <div class="row">
                                                                   
                                                                       <div class="col-sm-12 form-group detail_div">
                                                                           <div class="col-sm-1 form-group detail_div">
                                                                                 <label for="activityFilter" style="padding-top: 7px">Show: </label>
                                                                                  
                                                                           </div>
                                                                           <div class="col-sm-5 form-group detail_div" style="padding: 0 !important">
                                                                            <!--<div class="form-group">-->
                                                                                <div class="col-sm-10" style="padding: 0 !important">
                                                                                    <select class="form-control" id="activityFilter" onchange="loadAccountActivities(this.value)">
                                                                                        <option value="All Activities">All Activities</option>
                                                                                        <option value="Event">Event</option>
                                                                                        <option value="Log">Logs</option>
                                                                                        <option value="Note">Notes</option>
                                                                                        <!-- added by chad -->
                                                                                        <option value="Task">Tasks</option>
                                                                                        <!-- end added by chad -->
                                                                                        <option value="Opportunity">Opportunities</option>
                                                                                        <!-- Vishnu Release 4.4 -->
                                                                                        <option value="Lead">Lead</option>
                                                                                        <!-- Vishnu Release 4.4 -->
                                                                                    </select>
                                                                                </div>
                                                                             <!--</div>-->
                                                                         </div>                                                                    
                                                                        <div class="col-sm-6">
                                                                            <!-- <button class="btn btn-primary btn-sm" onclick="populateCaseDependentLists('add-linked-cases')"> Link Cases </button>
                                                                            &nbsp;&nbsp;&nbsp; -->
                                                                            <button class="btn btn-primary btn-sm" onclick="showAddNotes()"> Add Notes </button>
                                                                            <!-- added by chad -->
                                                                            &nbsp;&nbsp;&nbsp;
                                                                            <!--<button class="btn btn-primary btn-sm" onclick="showAddTasks()"> Add Task </button>-->
                                                                            <!-- end added by chad -->
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- End of row -->
                                                                <div class="row">
                                                                    <div class="col-sm-12 form-group detail_div">
                                                                        NEXT STEPS
                                                                        <i class ="divNextSteps-busy fa fa-refresh fa-spin" style="display: none;"></i>
                                                                    </div>
                                                                </div>
                                                                <!-- End of row -->
                                                                <div id="divNextSteps" class="row">
                                                                </div>
                                                                <!-- End of divNextSteps -->
                                                                <div class="col-sm-12">
                                                                    <div style='border-bottom:1px solid #ccc;'></div>
                                                                </div>
                                                                <br/>
                                                                <div class="row" id="divactivity">
                                                                    <div class="col-sm-12 form-group detail_div">
                                                                        COMPLETED STEPS
                                                                        <div class="pull-right"  style="margin-right: 10px">
                                                                        <i id="open-opps-toggle" class="fa fa-chevron-up" data-target="divCompletedSteps"></i></div>                                                        
                                                                        <i class ="divCompletedSteps-busy fa fa-refresh fa-spin" style="display: none;"></i>
                                                                        
                                                                    </div>
                                                                </div>
                                                                <!-- End of row -->
                                                                <div id="divCompletedSteps" class="row collapse in">
                                                                </div>
                                                                <!-- End of divCompletedSteps -->                                                                
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <!--Author:Ansu Routray   Release:4.3   Date Modified :22/08/2017    Component Id:CID-000463 Purpose: orthoilustrtated tab for surgeon -->
                                                    <div id="tab-Orthoillustrated" class="tab-pane">
                                                        <div class="full-height-scroll">
                                                            <div class="clearfix">
                                                               <button type="button" class="btn btn-primary pull-right btn-xs btn-ortho" onclick="openOrthoModalForAdd();">New OI Request</button> 
                                                            </div>
                                                            <div class="clearfix">                                                                                                                         
                                                                <div class="row">
                                                                    <div class="col-sm-12"> 
                                                                            <div class="col-sm-6">
                                                                                <div class="row ibox detail_div">
                                                                                 <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">
                                                                                    OI Full Name
                                                                                 </p> 
                                                                                 <div class="OI-Enabled">
                                                                                 </div>   
                                                                              </div>
                                                                              <div class="row ibox detail_div">
                                                                                  <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">
                                                                                    OI Website
                                                                                  </p>
                                                                                  <div class="OI-Website">
                                                                                 </div>
                                                                              </div>
                                                                              <div class="row ibox detail_div">
                                                                                 <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">
                                                                                    OI Phone                                                                                 
                                                                                  </p>
                                                                                 <div class="OI-Phone">
                                                                                 </div>    
                                                                              </div>
                                                                              <div class="row ibox detail_div">
                                                                                  <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">
                                                                                    OI Email
                                                                                  </p>
                                                                                  <div class="OI-Email">
                                                                                 </div>
                                                                              </div>
                                                                            </div>
                                                                            <div class="col-sm-6" >
                                                                               <div class="row ibox detail_div">
                                                                                 <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">
                                                                                    OI Practice Name
                                                                                 </p>
                                                                                 <div class="OI-PracticeName">
                                                                                 </div>    
                                                                              </div>
                                                                              <div class="row ibox detail_div">
                                                                                  <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">
                                                                                    OI Address
                                                                                  </p>
                                                                                  <div class="OI-Address">
                                                                                  </div>
                                                                              </div>    
                                                                              <div class="row ibox detail_div">
                                                                                 <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">
                                                                                    State License
                                                                                 </p>
                                                                                 <div class="OI-StateLicense">
                                                                                 </div>    
                                                                              </div>
                                                                              <div class="row ibox detail_div">
                                                                                  <p class="form-control-static muted_label axis-detail-pg-field-label" style="font-weight:bold;color:#676a6c;">
                                                                                    OI Specialties
                                                                                  </p>
                                                                                  <div class="OI-Specialties">
                                                                                 </div>
                                                                              </div>
                                                                            </div>
                                                                    </div> <!-- end of col-sm-12 -->
                                                                    <br/>
                                                                    <div class="col-sm-12">
                                                                            <div style='border-bottom:1px solid #ccc;'></div>
                                                                            <br/>
                                                                      </div>
                                                                      <br/>
                                                                      <div class="col-sm-12">
                                                                            <div id="orthoGrid" style="border:thin; height: 300px;" class="ag-bootstrap"></div>
                                                                      </div>
                                                               </div> 
                                                           </div> <!--  end of clearfix -->
                                                        </div>
                                                    </div>
                                                    <!--  end of Ansu code -->
                                                    
                                                    
                                                    
                                                    
                                                    
                                                    
                                                 </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> <!-- end of div grey_border_right -->
                                <!-- end of divSurgeonSummaries -->
                               
                               
                            </div> <!-- end of row ibox -->
                            
                        </div> <!-- end of surgeonDetailView -->
                    </div> <!-- End of float-e-margins -->
                </div> <!-- End of col-xs-12 -->
            </div> <!-- End of row -->
        </div>   <!-- End of wrapper content -->
        
        <!-- Edit Surgeon detail modal -->
    <div class="modal fade  modal-authrex" id="edit-surgeon-modal" data-backdrop="static" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close surgeon-type-cancel-btn" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp; Edit Surgeon Details </h4>
          </div>
          <div class="modal-body row">
            <div class="form">              

        <div class="row">

                <div class="col-sm-6 form-group">
                  <strong>Full Name </strong>
                  <input type="text" maxlength="80" disabled="true" class="form-control fullname"/>
                </div>
                
                <div class="col-sm-6 form-group">
                  <strong>{!$Label.CS_PracticeName} </strong><span class="text-danger"></span>
                  <input type="text" class="form-control practice"/>
                </div>
                
                <div class="col-sm-6 form-group">
                  <strong>Preferred Name </strong>
                  <input type="text" maxlength="80" class="form-control preferredName"/>
                </div>
                
                <div class="col-sm-6 form-group">
                  <strong>{!$Label.CS_PracticePhone}</strong><span class="text-danger"></span>
                    <input type="text" onkeypress="return OnlyNum(event)" class="form-control phone"/>
                </div> 
                
                <div class="col-xs-6 form-group">
                    <strong>{!$Label.CS_Designation} </strong><span class="text-danger"></span>
                    <select class="form-control designation multi-select">
                      <option value="">- {!$Label.CS_Select} -</option>
                    </select>
                    <div class="ctag-list"></div>
                </div>
                
                <div class="col-sm-6 form-group">
                  <strong>{!$Label.CS_Email}</strong><span class="text-danger"></span>
                  <input type="text" class="form-control email"/>                  
                </div>
                
                <div class="col-sm-6 form-group">
                  <strong>{!$Label.CS_SurgeonType} </strong><span class="text-danger"></span>
                  <select class="form-control user-type">
                      <option value="">- {!$Label.CS_Select} -</option>
                  </select>
                </div>
                               
                <div class="col-sm-6 form-group">
                  <strong>Mobile Phone</strong><span class="text-danger"></span>
                    <input type="text" onkeypress="return OnlyNum(event)" class="form-control mobilePhone"/>
                </div> 
                
                
                <div class="col-sm-6 form-group">
                  <strong>{!$Label.CS_NPI} </strong>
                  <input type="text" class="form-control npi" disabled="true"/>
                </div>                
                
                <div class="col-sm-6 form-group">
                  <strong>Assigned To </strong>
                  <input type="text" class="form-control assignedTo" disabled="true"/>
                </div>
                
                <div class="col-sm-6 form-group">
                  <strong>{!$Label.CS_NativeLanguage} </strong>
                  <input type="text" class="form-control lang"/>
                </div> 
                
                
               
                <div class="col-sm-6 form-group">
                  <strong>{!$Label.CS_Gender}: </strong>
                  <select class="gender form-control">
                      <option value="">- {!$Label.CS_Select} -</option>
                  </select>              
                </div>                
               
               
                
                
                <div class="col-sm-6 form-group"  style="display:none">
                  <strong>{!$Label.CS_AccountTitle} </strong>
                  <input type="text" maxlength="80" class="form-control title"/>
                </div>

                <div class="col-sm-6 form-group" style="display:none">
                  <strong>{!$Label.CS_Birthdate}</strong>
                  <div class="input-group date birthdate-container">
                    <input type="text" class="form-control birthdate clear-on-close" readonly="true" />
                      <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                      </span>
                  </div>                
                </div>
                
                <div class="col-sm-6 form-group" style="display:none">
                  <strong>{!$Label.CS_AssignedRepEmail}</strong>
                  <input type="text" class="form-control assigned-sales-rep-email"/>
                </div>                   
                <!-- Do Not Email checkbox will not display on Edit Screen from Release 2.2--By mimansha Samal
                <div class="col-sm-6 form-group">
                  <strong>{!$Label.CS_Email}</strong>
                  <input type="text" class="form-control email"/>
                  <div class="checkbox">
                      <label>
                        <input type="checkbox" id="consultant" class="form-control consultant" checked="false"/>
                        <strong>{!$Label.CS_ContactEmailOptOut}</strong>
                      </label>
                  </div>
                </div>  -->  
                <!--/**
                    * @author Original: Swetha Penmethsa TCS, Last Modified:  Aug/15/2017
                    * @release: 4.3
                    * @component: CID-000447
                    * @description: Minor Edits on Surgeon Page 
                    */-->
                <div class="col-xs-6 form-group">
                  <strong>Website</strong>
                  <input type="text" class="form-control preferredWebsite"/>
                </div>
               
                <div class="col-xs-6 form-group">
                  <strong>Clinic Days</strong>
                  <input type="text" class="form-control clinicDays"/>
                </div>
                
                <div class="col-xs-6 form-group">
                  <strong>Surgery Days</strong>
                  <input type="text" class="form-control surgeryDays"/>                 
                </div>
                
                <div class="col-xs-6 form-group">
                  <strong>{!$Label.CS_PracticeFocus} </strong><span class="text-danger"></span>
                  <select class="form-control practice-focus multi-select">
                      <option value="">- {!$Label.CS_Select} -</option>
                  </select>
                  <div class="ctag-list"></div>
                </div>
                <div class="col-xs-6 form-group">
                    <strong>{!$Label.CS_AreaInterest} </strong><span class="text-danger"></span>
                    <select class="form-control specialty multi-select">
                        <option value="">- {!$Label.CS_Select} -</option>
                    </select>
                    <div class="ctag-list"></div>
                </div>
                        
              </div>
              
              <div class="row">
                <div class="col-sm-6 form-group">
                  <strong>{!$Label.CS_PracticeStreet} </strong><span class="text-danger"></span>
                  <input type="text" maxlength="255" class="form-control mStreet" placeholder="Street"/>
                </div>
                <div class="col-sm-6 form-group">
                  <strong>{!$Label.CS_PracticeCity} </strong><span class="text-danger"></span>
                    <input type="text" class="form-control mCity" placeholder="City"/>
                </div>
                <div class="col-sm-6 form-group">
                  <strong>{!$Label.CS_PracticeState} </strong><span class="text-danger"></span> 
                    <select class="form-control mState">
                      <option>Alabama</option>
                      <option>Alaska</option>
                      <option>Arizona</option>
                      <option>Arkansas</option>
                      <option>California</option>
                      <option>Colorado</option>
                      <option>Connecticut</option>
                      <option>Delaware</option>
                      <option>Dist of Columbia</option>
                      <option>Florida</option>
                      <option>Georgia</option>
                      <option>Hawaii</option>
                      <option>Idaho</option>
                      <option>Illinois</option>
                      <option>Indiana</option>
                      <option>Iowa</option>
                      <option>Kansas</option>
                      <option>Kentucky</option>
                      <option>Louisiana</option>
                      <option>Maine</option>
                      <option>Maryland</option>
                      <option>Massachusetts</option>
                      <option>Michigan</option>
                      <option>Minnesota</option>
                      <option>Mississippi</option>
                      <option>Missouri</option>
                      <option>Montana</option>
                      <option>Nebraska</option>
                      <option>Nevada</option>
                      <option>New Hampshire</option>
                      <option>New Jersey</option>
                      <option>New Mexico</option>
                      <option>New York</option>
                      <option>North Carolina</option>
                      <option>North Dakota</option>
                      <option>Ohio</option>
                      <option>Oklahoma</option>
                      <option>Oregon</option>
                      <option>Pennsylvania</option>
                      <option>Rhode Island</option>
                      <option>South Carolina</option>
                      <option>South Dakota</option>
                      <option>Tennessee</option>
                      <option>Texas</option>
                      <option>Utah</option>
                      <option>Vermont</option>
                      <option>Virginia</option>
                      <option>Washington</option>
                      <option>West Virginia</option>
                      <option>Wisconsin</option>
                      <option>Wyoming</option>
                    </select>

                </div>
                <div class="col-sm-6 form-group">
                  <strong>{!$Label.CS_PracticeZipCode} </strong><span class="text-danger"></span>  
                    <input type="text" class="form-control mZip" placeholder="Zip"/>
                </div>

              </div>

            </div>

          </div>
          <div class="modal-footer">
            <span class="text-danger save-error" id="surgeonErrors"></span>
            <button type="button" class="btn btn-default surgeon-type-cancel-btn">{!$Label.CS_Close}</button>
            <button type="button" class="btn btn-primary edit-surgeon-save-btn">{!$Label.CS_Save}</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    
        
         <!--CID - 000041/Swetha Penmethsa/Feb/21/2017/Edit Surgeon warning  Card -->
            <div class="modal fade  modal-authrex" id="cancel-edit-surgeon-modal" data-backdrop="static" tabindex="-1" role="dialog" >
   
              <div class="modal-dialog" style="width:450px">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Surgeon</h4>
                  </div>

                  <div class="modal-body">
                    <div class="row">
                      <div>
                       
                          <label>Do you want to save the changes you made for the surgeon? </label>
                                      
                      </div>
                    </div>
                  </div>

                  <div class="modal-footer">
                    <span class="text-danger save-error"></span>
                   
                    <button type="button" class="btn btn-default" data-dismiss="modal">Yes</button>
                    <button type="button" class="btn btn-primary btn-cancel-surgeon-card">No</button>
                    
                  </div>
                </div><!-- /.modal-content -->
              </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->            
            <!--CID - 000041/Swetha Penmethsa/Feb/21/2017/Edit Surgeon warning  Card -->
            
            <div id="account-notes-modal" data-rec-id="" class="modal fade modal-authrex" role="dialog" data-backdrop="static" tabindex="-1" >
                    <div class="modal-dialog">
                    
                            <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close account-notes-cancel-btn" aria-hidden="true"></button>
                                <h3 class="dependent-list-header"> Notes</h3>
                            </div>
                            <div class="modal-body">
                                <div>
                                    <div class="form-group row">
                                        <label for="accNoteDate" class="col-sm-2 control-label" style="padding-top: 7px">{!$Label.AROpportunity_Date}</label>
                                        <div class="col-sm-10">
                                            <p class="form-control-static" id="accNoteDate">
                                                dateFormatter(moment());
                                            </p>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="accNotes" class="col-sm-2 control-label">{!$Label.AROpportunity_Note}&nbsp;<span class="text-danger">*</span></label>
                                        <div class="col-sm-10">
                                            <textarea class="form-control" rows="5" id="accNotes"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <span class="text-danger save-error" id="addNoteErrors"></span>
                                <button type="button" class="btn btn-warning pull-left btn-delete" onclick="deleteNote()">Delete</button>
                                <button type="button" class="btn account-notes-cancel-btn">Cancel</button>
                                <button type="button" class="btn btn-primary" onclick="addAccountNote()">Ok</button>
                            </div>
                        </div>
                    </div>
                </div><!-- /.modal -->

                <!-- Add Provide related contact modal -->
    <div class="modal fade  modal-authrex" id="provider-contact-modal" data-backdrop="static" tabindex="-1" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Contact</h4>
          </div>
          <div class="modal-body">
            <div class="form contact-form">
              <div class="row">
                <div class="col-sm-6">
                  <div class="form-group">
                    <label><span class="text-danger">*</span> First Name</label>
                    <input type="text" class="firstName form-control" tabindex="1"/>
                  </div>
                  <div class="form-group">
                    <label>Title</label>
                    <input type="text" class="title form-control" tabindex="3"/>
                  </div>
                  <div class="form-group">
                    <label><span class="text-danger"></span> Phone</label>
                    <input id="Phone" type="text" class="phone form-control" tabindex="5" onkeypress='return isNumberCommaDot(event)'/>
                    <span id="spnPhone"></span>
                  </div>
                  <div class="form-group">
                    <label>Street</label>
                    <input type="text" class="street form-control" tabindex="7"/>
                  </div>
                  <div class="form-group">
                    <label>State</label>
                    <select class="form-control state" tabindex="9">
                      <option>Alabama</option>
                      <option>Alaska</option>
                      <option>Arizona</option>
                      <option>Arkansas</option>
                      <option>California</option>
                      <option>Colorado</option>
                      <option>Connecticut</option>
                      <option>Delaware</option>
                      <option>Dist of Columbia</option>
                      <option>Florida</option>
                      <option>Georgia</option>
                      <option>Hawaii</option>
                      <option>Idaho</option>
                      <option>Illinois</option>
                      <option>Indiana</option>
                      <option>Iowa</option>
                      <option>Kansas</option>
                      <option>Kentucky</option>
                      <option>Louisiana</option>
                      <option>Maine</option>
                      <option>Maryland</option>
                      <option>Massachusetts</option>
                      <option>Michigan</option>
                      <option>Minnesota</option>
                      <option>Mississippi</option>
                      <option>Missouri</option>
                      <option>Montana</option>
                      <option>Nebraska</option>
                      <option>Nevada</option>
                      <option>New Hampshire</option>
                      <option>New Jersey</option>
                      <option>New Mexico</option>
                      <option>North Carolina</option>
                      <option>New York</option>
                      <option>North Dakota</option>
                      <option>Ohio</option>
                      <option>Oklahoma</option>
                      <option>Oregon</option>
                      <option>Pennsylvania</option>
                      <option>Rhode Island</option>
                      <option>South Carolina</option>
                      <option>South Dakota</option>
                      <option>Tennessee</option>
                      <option>Texas</option>
                      <option>Utah</option>
                      <option>Vermont</option>
                      <option>Virginia</option>
                      <option>Washington</option>
                      <option>West Virginia</option>
                      <option>Wisconsin</option>
                      <option>Wyoming</option>
                    </select>
                  </div>                                                          
                </div>
                <div class="col-sm-6">
                  <div class="form-group">
                    <label><span class="text-danger">*</span> Last Name</label>
                    <input type="text" class="lastName form-control" tabindex="2"/>
                  </div>
                  <div class="form-group">
                    <label><span class="text-danger"></span> Email</label>
                    <input type="text" class="email form-control" tabindex="4"/>
                  </div>    
                  <div class="form-group">
                    <label>Mobile</label>
                    <input id="contactMobilePhone" type="text" tabindex="6" class="mobile form-control" onkeypress='return isNumberCommaDot(event)'/>
                    <span id="spnMobilePhone"></span>
                  </div>
                  <div class="form-group">
                    <label>City</label>
                    <input type="text" class="city form-control" tabindex="8"/>
                  </div> 
                  <div class="form-group">
                    <label>Zip</label>
                    <input type="text" class="zip form-control" tabindex="10"/>
                  </div>                                                                        
                </div>                
              </div>
              
              <div class="row">
                <div class="col-xs-12">
                  <div class="form-group">
                    <label>Notes</label>
                    <textarea class="notes form-control" tabindex="11"></textarea>
                  </div> 
                </div>
              </div>
              
              <div class="row">
                <div class="col-xs-12">
                 <p>
                    IMPORTANT: "HIPAA Protected Health Information (PHI) should not be submitted using this form"
                 </p>
                </div>
              </div>

            </div>
          </div>
          <div class="modal-footer">
            <span class="text-danger save-error"></span>
            <button type="button" style="display:none" class="pull-left btn btn-warning btn-delete">Delete</button>
            <button type="button" class="btn btn-default provider-contact-close-btn">{!$Label.CS_Close}</button>
            <button type="button" class="btn btn-primary btn-save">{!$Label.CS_Save}</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->        
            
        <!--      //Release 4.4
                  //Component ID:- CID-000342
                  //Developer:- Mimansha Samal
                  //Modified Date:- 9/21/2017
                  //Purpose:- Redefine Surgeon Bio Modal  -->
                  
        <!-- modal for editing practitioner bio -->
        <div class="modal fade  modal-authrex" id="surgeon-bio-modal" data-backdrop="static" tabindex="-1" role="dialog">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close surgeon-bio-close-btn" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.CS_EditSurgBio}</h4>
              </div>
    
              <div class="modal-body modalOverflow ">
              <!--  
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label>Undergraduate</label>
                      <input class="form-control undergraduate institution-typeahead"/>
                    </div>
    
                    <div class="form-group">
                      <label>Graduate</label>
                      <input class="form-control graduate institution-typeahead"/>
                    </div>
                      
                    <div class="form-group">
                      <label>Doctorate</label>
                      <input class="form-control doctorate institution-typeahead"/>
                    </div>  
    
                    <div class="form-group">
                      <label>Internship</label>
                      <textarea class="form-control internship"></textarea>
                    </div>  
    
                    <div class="form-group">
                      <label>Residencies</label>
                      <textarea class="form-control residencies"></textarea>
                    </div>  
                    <div class="form-group">
                      <label>Fellowships</label>
                      <textarea class="form-control fellowships"></textarea>
                    </div>
    
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label>Certifications</label>
                      <textarea class="form-control certifications"></textarea>
                    </div>
    
                    <div class="form-group">
                        <label>Awards</label>
                        <textarea class="form-control awards"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Professional Societies</label>
                        <textarea class="form-control professional-societies"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Sports Teams Affiliations</label>
                        <textarea class="form-control sports-teams-affiliations"></textarea>
                    </div>        
                                                                    
                    
                    <div class="form-group" style="display:none">
                        <label>Personal Interest</label>
                        <textarea class="form-control personal-interest"></textarea>
                    </div>
                    
                    <div class="form-group"  style="display:none">
                        <label>Spouse and Children</label>
                        <textarea class="form-control spouse-and-children"></textarea>
                    </div>
                  </div>
                </div> -->
                
                 <!--  Mimansha Changes for CID - 000342 in Release 4.4       
                Modified Date:- 10/12/2017  -->
                <div class="row">
                    
                    <div class="row form-group col-sm-12" id="divEducationPrograms">
                        <div class="col-xs-12"  style="width:103.5%">
                            <div class="table-responsive">
        
                                <table class="table table-condensed surgeon-education related-table" style="margin-bottom:0px">
                                    <label class="control-label">{!$Label.ARSurgeon_BioEducation}</label><br/>
                                    <thead>
                                    <tr>
                                        <th style="width:14.5%">{!$Label.ARSurgeon_StartYear}</th>
                                        <th style="width:14.5%">{!$Label.ARSurgeon_EndYear}</th>
                                        <th style="width:15%"><span class="text-danger">*</span>{!$Label.ARSurgeon_DegreeType}</th>
                                        <th style="width:18.5%">{!$Label.ARSurgeon_FieldOfStudy}</th>
                                        <th style="width:25%"><span class="text-danger">*</span>{!$Label.ARSurgeon_Institution}</th>
                                        <th style="width:20%"></th>
                                    </tr>
                                    <tr>
                                        <td>
                                            <select id="select-startYear" class="form-control startyear" >
                                                <option value=""> -Select- </option>
                                            </select>
                                        </td>
                                        <td>
                                            <select id="select-EndYear" class="form-control endyear" >
                                                <option value=""> -Select- </option>
                                            </select>
                                        </td>
                                        <td>
                                            <select id="select-DegreeType" class="form-control education-type" >
                                                <option value=""> -Select- </option>
                                            </select>
                                        </td>
                                        <td>
                                            <input type="text" id ="fieldOfStudy" class="form-control surgeon-field-of-study" />
                                            <p class="form-control-static surgeon-field-of-study"></p>
                                        </td>
                                        <td>
                                                        
                                            <input type="text" class="form-control surgeon-institution institution-typeahead" placeholder="Search Institutions" />
                                                                    
                                        </td>
                                        <td style="text-align:right">
                                            <button class="btn btn-xs btn-primary add-education-part" onclick="addEducationDetail()">Add</button>
                                        </td>                
                                     </tr>            
                                    </thead>
                                    <tbody>
                                                                                         
                                    </tbody>
                                    
                                </table>
                            </div>
                        </div>
                    </div>
                    <br/>
                    <div class="row form-group col-sm-12" id="divPostGraduatePrograms">
                        <div class="col-xs-12"  style="width:103.5%">
                            <div class="table-responsive">
        
                                <table class="table table-condensed surgeon-postgraduate related-table" style="margin-bottom:0px">
                                    <label class="control-label">{!$Label.ARSurgeon_PostGraduate}</label><br/>
                                    <thead>
                                    <tr>
                                        <th style="width:14.5%"><span class="text-danger">*</span>{!$Label.ARSurgeon_StartYear}</th>
                                        <th style="width:14.5%"><span class="text-danger">*</span>{!$Label.ARSurgeon_EndYear}</th>
                                        <th style="width:15%"><span class="text-danger">*</span>{!$Label.ARSurgeon_DegreeType}</th>
                                        <th style="width:18.5%"><span class="text-danger">*</span>{!$Label.ARSurgeon_ProgramType}</th>
                                        <th style="width:25%"><span class="text-danger">*</span>{!$Label.ARSurgeon_ProgramName}</th>
                                        <th style="width:20%"></th>
                                    </tr>
                                    <tr>
                                        <td>
                                            <select id="select-startPGYear" class="form-control startyear" >
                                                <option value=""> -Select- </option>
                                            </select>
                                        </td>
                                        <td>
                                            <select id="select-EndPGYear" class="form-control endyear" >
                                                <option value=""> -Select- </option>
                                            </select>
                                        </td>
                                        <td>
                                            <select id="select-TrainingType" class="form-control training-type" onchange="trainingTypeSelected(this.value)">
                                                <option value=""> -Select- </option>
                                            </select>
                                        </td>
                                        <td>
                                            <select id="select-ProgramType" class="form-control program-type" onchange="programTypeSelected(this.value)">
                                                <option value=""> -Select- </option>
                                            </select>
                                        </td>
                                        <td>
                                                        
                                            <input type="text" class="form-control surgeon-program-name programname-typeahead" placeholder="Search Programs"  />
                                                                    
                                        </td>
                                        <td style="text-align:right">
                                            <button class="btn btn-xs btn-primary add-post-graduate-part" onclick="addPostGraduateDetail()">Add</button>
                                        </td>                
                                     </tr>            
                                    </thead>
                                    <tbody>
                                                                                         
                                    </tbody>
                                    
                                </table>
                            </div>
                        </div>
                    </div>
                    <br/>
                    <br/>
                </div>  <!-- End of Parent Div Row -->                
                
                <br/>
                <div class="row">
                     <div class="col-sm-6">
                        <div class="form-group">
                            <label>Residency Notes</label>
                            <textarea class="form-control residencies"></textarea>
                        </div>
                     </div>
                     
                     <div class="col-sm-6">
                        <div class="form-group">
                            <label>Fellowship Notes</label>
                            <textarea class="form-control fellowships"></textarea>
                        </div>
                     </div>
                </div>
                <br/>
                <div class="row">
                    
                    <div class="form-group col-sm-12"> 
                        <label class="control-label"><b>Other information</b></label>
                    </div>
                    <div class="col-sm-6">
                                            
                        <div class="form-group">
                        <label>Certifications</label>
                        <textarea class="form-control certifications"></textarea>
                        </div>
                        
                        <div class="form-group">
                        <label>Professional Societies</label>
                        <textarea class="form-control professional-societies"></textarea>
                        </div>
                    </div>
                    
                    <div class="col-sm-6">
                                            
                        <div class="form-group">
                        <label>Awards</label>
                        <textarea class="form-control awards"></textarea>
                        </div>
                        
                        <div class="form-group">
                        <label>Sports Teams Affiliations</label>
                        <textarea class="form-control sports-teams-affiliations"></textarea>
                        </div>
                    </div>
                    
                    <div class="form-group col-sm-12"> 
                        <label class="control-label">Publications</label>
                        <div class="publications" id="publicationsSummernote"></div>
                    </div>
                               
                </div>  <!--   End of row -->
              </div>    <!--   End of Modal Body -->
    
              <div class="modal-footer">
                <span class="text-danger save-error"></span>&nbsp;&nbsp;
                <button type="button" class="btn btn-default surgeon-bio-close-btn">{!$Label.CS_Close}</button>
                <button type="button" class="btn btn-primary btn-save-surgeon-bio">{!$Label.CS_Save}</button>
              </div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->  
        
        <div class="modal fade  modal-authrex" id="add-account-affiliation-modal" data-backdrop="static" tabindex="-1" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.CS_AccountAffiliation}</h4>
          </div>
          <div class="modal-body">
            <div class="form contact-form">
              <div class="row">
                <div class="col-sm-12">
                  <div class="form-group">
                    <label for="account" class="control-label"><span class="text-danger">*</span> {!$Label.CS_HealthCareOrg} <i class="account-busy fa fa-refresh fa-spin" style="display:none"></i></label>
                    <input  id="account" class="form-control account-typeahead clear-on-close" type="text" />
                    <div id="accountsTag" class="account ctag-list clear-on-close"></div>
                  </div>
                </div>        
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <span class="text-danger save-error" id="affiliationErrors"></span>
            <button type="button" id ="delete-btn-account" style="display:none" class="pull-left btn btn-warning btn-delete">Delete</button>
            <button type="button" class="btn btn-default account-affiliation-cancel-btn">{!$Label.CS_Close}</button>
            <button type="button" class="btn btn-primary btn-save">{!$Label.CS_Save}</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
            <!-- modal for delete Notes -->
                <div class="modal fade  modal-authrex" id="delete-Note-modal" data-backdrop="static" tabindex="-1" role="dialog">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Note</h4>
                      </div>
            
                      <div class="modal-body">
            
                        <div class="row">
                          <div class="col-sm-8">
                            <div class="form-group">
                               <label>Are you sure you want to delete the Note?</label>
                            </div>                
                          </div>
                        </div>
                      </div>
            
                      <div class="modal-footer">
                        <span class="text-danger save-error"></span>&nbsp;&nbsp;
                        <button type="button" class="btn btn-primary btn-delete-Note">Yes</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
                        
                      </div>
                    </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                
                
                <!-- modal for Pardot Visit detail view-->
    <div class="modal fade  modal-authrex" id="pardot-visit-modal" data-backdrop="static" tabindex="-1" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Pardot Activity Detail</h4>
          </div>

          <div class="modal-body">
            <div class="row">
              <div >
                <div class="form-group">
                  <label>Page Views</label>
                  <output id="pardot-visit-pageviews"/>
                </div>


                <div class="form-group">
                  <label>Duration</label>
                  <output id="pardot-visit-duration"/>
                </div>


                <div class="form-group">
                  <label>Created At</label>
                  <output id="pardot-visit-createdat"/>
                </div>

                <hr/>
                <div class="form-group">
                  <label>Visitor Page Views</label>
                </div>

                <!-- Visit Page Views Detail -->
                 <div id="PardotVisitPageViews" class="row">
                 <!-- Header row-->
                 <div class="col-sm-12 form-group detail_div">
                  <div class="col-sm-8"><label>URL/Title</label></div>
                  <!--div class="col-sm-3"><label>Date</label></div-->
                 </div>

                 </div>

                 <!-- div class="table-responsive">
                 <table id="pardotVisitPageViewsList" >
                    <thead>
                      <tr>
                        <th data-field="startDate" data-title="URL/Title" data-sortable="true"/>
                        <th data-field="provider" data-title="Date" data-sortable="true" data-filter-control="input"/>
                    </tr>
                    </thead>
                 </table>
                 </div -->

              <div class="modal-footer">
                <span class="text-danger save-error"></span>&nbsp;&nbsp;
                <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Close}</button>
              </div>
              </div><!-- / modal-content -->
          </div><!-- /.pardot modal-dialog -->
        </div><!-- /.pardot modal -->  
      </div>
      </div>
    </div>
    
    <!-- modal for Pardot Email detail view-->
    <div class="modal fade  modal-authrex" id="pardot-email-modal" data-backdrop="static" tabindex="-1" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Pardot Activity Detail</h4>
          </div>

          <div class="modal-body">
            <div class="row">
              <div >
                <div class="form-group">
                  <label>Name</label>
                  <output id="pardot-email-name"/>
                </div>

                <div class="form-group">
                  <label>Subject</label>
                  <output id="pardot-email-subject"/>
                </div>

                <div class="form-group">
                  <label>Created At</label>
                  <output id="pardot-email-date"/>
                </div>

                <div class="form-group">
                  <label>Message</label>
                  <output id="pardot-email-message" style="max-width:100%" />
                </div>

          <div class="modal-footer">
            <span class="text-danger save-error"></span>&nbsp;&nbsp;
            <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Close}</button>
          </div>
        </div><!-- / modal-content -->
      </div><!-- /.pardot modal-dialog -->
    </div><!-- /.pardot modal -->  
    </div>
    </div>
    </div>
    
    
        <!--CID - Swetha Penmethsa/April/03/2017/Release 3.2/Add Profile Pic -->
            <div class="modal fade  modal-authrex" id="upload-surgeon-profile-pic-modal" data-backdrop="static" tabindex="-1" role="dialog" >
   
              <div class="modal-dialog" style="width:500px">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close btn-cancel-profile-pic" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Upload Profile Photo</h4>
                  </div>

                  <div class="modal-body">
                    <div class="row">
                      <div>
                       
                          <label> You can upload a JPG, GIF or PNG file. Maximum file size is 500 KB. </label>
                          <input type="file" id="fileInput"/>     
                      </div>
                    </div>
                  </div>

                  <div class="modal-footer">
                    <span class="text-danger save-error"></span>
                   
                    
                    <button type="button" class="btn btn-primary btn-save-surgeon-profile-pic">Save</button>
                    <button type="button" class="btn btn-default btn-cancel-profile-pic">Cancel</button>
                    
                  </div>
                </div><!-- /.modal-content -->
              </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->            
            <!--CID - /Swetha Penmethsa/April/03/2017/Release 3.2 /Add Profile Pic -->
            
            <!-- Code Changes by Mimansha Samal starts on 6th March 2017 in Release 3.2 for Preference Card  -->
            <!--Modal for new preference card -->
            <div class="modal fade  modal-authrex" id="new-prefcard-modal" data-backdrop="static" tabindex="-1" role="dialog">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close btn-cancel-new-prefcard" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;<span class="modal-title-txt">{!$Label.ARSurgeon_PrefCardModal}</span></h4>
                  </div>
                  <div class="modal-body ModalOverflow">
                    
        
                    <apex:form styleClass="row pref-card">
                        
                    <div class="form">    
                        <div class="row">
                            
                            <div class="form-group col-sm-12">                        
                              <label class="control-label"><span class="text-danger">*</span> {!$Label.CS_Name}</label>
                              <input type="text" class="form-control prefCardName" placeholder="Preference card name"/>
                            </div>
                            
                            <div class="row form-group col-sm-12" id="divTaxonomy">
                                <div class="col-xs-12" style="width:103.5%">
                                    <div>
        
                                        <table class="table table-condensed pcard-procedures productTeam" id = "tablePrefCardTaxonomy" style="margin-bottom:0px">
                                            <!-- <caption><h3>{!$Label.AROpportunity_Products}</h3></caption> -->
                                            <thead>
                                                <tr>
                                                    <th style="width:25.5%"><span class="text-danger">*</span> {!$Label.ARSurgeon_ProductTeam}</th>
                                                    <th style="width:31.5%"><span class="text-danger">*</span> {!$Label.ARSurgeon_Procedure}</th>
                                                    <th style="width:30%">{!$Label.ARSurgeon_SurgicalTechnique}</th> 
                                                    <th style="width:20%">&nbsp;</th>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <!-- <input type="text" id="pcard-productteam" class="form-control pcard-productteam pcard-productteam-typeahead" autocomplete="off"/> -->
                                                        <select id="select-productteam" class="form-control"  onchange="productTeamSelected('#new-prefcard-modal', this.value)">
                                                            <option value=""> Select Product Team </option>
                                                        </select>
                                                    </td>
                                                    <td>
                                                        
                                                        <div id="divProcedures" class="input-group" style="display: none;">
                                                            <input type="text" id="procedures" class="form-control procedures other-procedures-typeahead"
                                                                    placeholder="Other Procedure" autocomplete="off"/>
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-default" type="button" onclick="addOtherProcedure()">+</button>
                                                            </span>
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-error" type="button" onclick="resetProcedureSelection('#new-prefcard-modal')">x</button>
                                                            </span>
                                                        </div>
                                                        <select id="select-procedure" class="form-control default-color selectpicker" multiple="multiple" 
                                                                    data-style="default-color"  data-selected-text-format="static"
                                                                    data-width="250px" title="Procedures" data-container="#new-prefcard-modal.ModalOverflow">
                                                            
                                                        </select>
                                                        
                                                        <div class="dropdown">
                                                            <div class="dropdown-content">
                                                                <div id="divNewProcedure">
                                                                    <div class="form-group">
                                                                        <label for="newProcedure">Other Procedure</label>
                                                                        <input type="text" class="form-control newProcedure-typeahead" id="newProcedure" placeholder="New Procedure"/>
                                                                    </div>
                                                                    <button type="button" class="btn btn-default">Add</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        
                                                        <div class="procedures ctag-list clear-on-close"></div>
                                                    </td>
                                                    <td>
                                                        <!-- <input type="text" id="surgical-technique" class="form-control surgical-technique surgical-technique-typeahead"/>
                                                        <div class="surgical-technique ctag-list clear-on-close"></div> -->
                                                        
                                                        <div id="divSurgicalTechnique" class="input-group" style="display: none;">
                                                            <input type="text" id="surgical-technique" class="form-control surgical-technique surgical-technique-typeahead"
                                                                    placeholder="Other surgical-technique"/>
                                                            <span class="input-group-btn">
                                                                <button class="btn btn-default" type="button" onclick="addOtherProcedure()">+</button>
                                                            </span>
                                                        </div>
                                                        <select id="select-surgical-technique" class="form-control default-color selectpicker" multiple="multiple" 
                                                                    data-style="default-color" data-selected-text-format="static"
                                                                    data-width="250px" title="Surgical Techniques" data-container="#new-prefcard-modal.ModalOverflow">
                                                            
                                                        </select>
                                                        
                                                       <div class="dropdown"  >
                                                            <div class="dropdown-content">
                                                                <div id="divNewSurgicalTechnique">
                                                                    <div class="form-group">
                                                                        <label for="newSurgicalTechnique">Other Surgical Technique</label>
                                                                        <input type="text" class="form-control newSurgicalTechnique-typeahead" id="newSurgicalTechnique" placeholder="New Surgical Technique"/>
                                                                    </div>
                                                                    <button type="button" class="btn btn-default">Add</button>
                                                                </div>
                                                            </div>
                                                        </div> 
                                                        
                                                        
                                                        <div class="surgical-technique ctag-list clear-on-close"></div>
                                                    </td> 
                                                    <td style="vertical-align:middle;text-align:right" >
                                                        <span class="text-danger save-add-error"></span>
                                                        <button type="button" class="btn btn-xs btn-primary btn-add-taxonomy" onclick="addTaxonomy('#new-prefcard-modal')"> {!$Label.ARSurgeon_Add}</button>
                                                    </td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>  
                            </div>
        
                            <!-- <div class="form-group col-sm-12">                        
                              <label class="control-label"><span class="text-danger">*</span> {!$Label.CS_ProcedureName}</label>
                              <input type="text" data-record-name="" data-record-id="" class="form-control procedure card-procedure-typeahead" placeholder="Search by name"/>
                            </div>
                            
                            <div class="form-group col-sm-12">                        
                              <label class="control-label">Surgical Technique</label>
                              <input type="text" data-record-name="" data-record-id="" class="form-control surgical-technique surgical-technique-typeahead" placeholder="Search by name"/>
                            </div> 
                          
                            <div class="form-group col-sm-12">
                              <label class="control-label">{!$Label.Products_ARContact}</label> &nbsp;<button type="button" class="btn btn-xs btn-primary btn-clear-products">Clear</button>
                              <input type="text" class="card-products-typeahead form-control clear-on-close" placeholder="Search by name"/>
                              <div class="products ctag-list clear-on-close"></div>
                            </div> -->
                            
                            <div class="row form-group col-sm-12" id="divProductItems">
                                <div class="col-xs-12"  style="width:103.5%">
                                    <div class="table-responsive">
        
                                        <table class="table table-condensed product-parts related-table" style="margin-bottom:0px">
                                            <label class="control-label">{!$Label.ARSurgeon_ArthrexProducts}</label><br/>
                                            <thead>
                                                <tr>
                                                    <th style="width:25.5%">{!$Label.AROpportunity_PartNumber}</th>
                                                    <th style="width:31.5%">{!$Label.AROpportunity_Description}</th>
                                                    <th style="width:10%">{!$Label.AROpportunity_Qty}</th>
                                                    <th style="width:10%">{!$Label.AROpportunity_UnitPrice}</th>
                                                    <th style="width:10%">{!$Label.AROpportunity_TotalPrice}</th>
                                                    <th style="width:20%"></th>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <input type="text" class="form-control opportunity-part-number opportunity-part-number-typeahead" maxlength="25"/>
                                                    </td>
                                                    <td>
                                                        <input type="text" class="form-control opportunity-part-description opportunity-part-description-typeahead"/>
                                                    </td>
                                                    <td>
                                                        <input type="text" class="form-control opportunity-part-quantity" onkeypress="return OnlyNum(event)"/>
                                                    </td>
                                                    <td>
                                                        <input type="text" id ="number-decimal" class="form-control opportunity-part-unit-price" onkeypress="return isNumberWithDecimalKey(this)"/>
                                                        <p class="form-control-static opportunity-part-unit-price"></p>
                                                    </td>
                                                    <td>
                                                        
                                                        <p class="form-control-static opportunity-part-total-price readonly-control"></p>
                                                                    
                                                    </td>
                                                    <td style="text-align:right">
                                                        <button class="btn btn-xs btn-primary add-opp-part" disabled="true" onclick="addPrefProductPart()">Add</button>
                                                    </td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                                                         
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="3">&nbsp;</td>
                                                    <td>Total</td>
                                                    <td id="totalProductAmount">-</td>
                                                    <td></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <br/>
                            <div class="form-group col-sm-12">                        
                              <label class="control-label">{!$Label.Position_ARContact}</label>
                              <textarea class="form-control position"></textarea>
                            </div>                
                        </div>
        
                        
                        <div class="row">
                            &emsp;<label class="control-label" style="color:red; font-weight:500">Competitor information can be added in this section</label>
                            <div class="col-sm-12 form-group">
                                  <label class="control-label">{!$Label.CS_Disposables}</label>
                                  <div class="disposables" id="disposablesSummernote">
                                  </div>
                            </div>
                            
                            <div class="col-sm-12 form-group">
                                <label class="control-label">{!$Label.Sutures_ARContact}</label>
                                  <div class="sutures" id="suturesSummernote">
                                  </div>
                            </div>
                            
                            <div class="col-sm-12 form-group">
                                <label class="control-label">{!$Label.Medications_ARContact}</label>
                                  <div class="medications" id="medicationsSummernote">
                                  </div>
                            </div>
                            
                            <div class="col-sm-12 form-group">
                                <label class="control-label">{!$Label.Equipment_ARContact}</label>
                                  <div class="equipment" id="equipmentSummernote">
                                  </div>
                            </div>
                            
                            <div class="col-sm-12 form-group">
                                <label class="control-label">{!$Label.Equipment_Notes_ARContact}</label>
                                  <div class="equipment-notes" id="equipment-notesSummernote">
                                  </div>
                            </div>
                            
                        </div>
                      
                    </div>
                    </apex:form>
        
        
                  </div>
                  <div class="modal-footer">
                    <span class="text-danger save-error"></span>
                    <button type="button" style="display:none" class="pull-left btn btn-warning btn-delete-prefcard">Delete</button>
                                    
                    <button type="button" class="btn btn-default btn-cancel-new-prefcard">{!$Label.CS_Close}</button>
                    <button type="button" class="btn btn-primary btn-save-prefcard">{!$Label.CS_Save}</button>
                  </div>
                </div><!-- /.modal-content -->
              </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
            
            <!-- SP code for Delete Warning/Confirmation on Pref Card  -->
    
            <!-- modal for delete Preference Card -->
            <div class="modal fade  modal-authrex" id="delete-preference-modal" data-backdrop="static" tabindex="-1" role="dialog">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.ARSurgeon_PrefCardModal}</h4>
                  </div>
        
                  <div class="modal-body">
        
                    <div class="row">
                      <div class="col-sm-8">
                        <div class="form-group">
               <label>Are you sure you want to delete the Preference Card?</label>
                        </div>                
                      </div>
                    </div>
                  </div>
        
                  <div class="modal-footer">
                    <span class="text-danger save-error"></span>&nbsp;&nbsp;
                    <button type="button" class="btn btn-primary btn-delete-preference-card">{!$Label.CS_Yes}</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_No}</button>
                    
                  </div>
                </div><!-- /.modal-content -->
              </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
            
            <div id="generate-pdf-modal" class="modal fade modal-authrex" role="dialog" data-backdrop="static" tabindex="-1" >
                <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title">{!$Label.ARSurgeon_GeneratePDF}</h4>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-xs-12 form-group">
                                            <label for="card-name" class="control-label">{!$Label.ARSurgeon_PrefCardNamePDF}</label>
                                            <p id="card-name" class="form-control-static card-name readonly-control"></p>
                                        </div>
                                    </div>
                                    <div class="row">                                     
                                        <div class="col-xs-4 form-group">
                                            <label>
                                                <input type="checkbox" id="implants-chkbx" /> {!$Label.ARSurgeon_ImplantsPDF}
                                            </label>
                                        </div>
                                        
                                         <div class="col-xs-8 form-group">
                                            <label>
                                                <input type="checkbox" id="pricing-chkbx" /> {!$Label.ARSurgeon_IncludePricingPDF}
                                            </label>
                                        </div>
                                    </div>
                                    <div class="row">                                         
                                        <div class="col-xs-12 form-group">
                                            <label>
                                                <input type="checkbox" id="instrument-chkbx" /> {!$Label.ARSurgeon_InstrumentsPDF}
                                            </label>
                                        </div>
                                        <div class="col-xs-12 form-group">
                                            <label>
                                                <input type="checkbox" id="notes-chkbx" /> {!$Label.ARSurgeon_Notes}
                                            </label>
                                        </div>
                                    </div>  <!-- end of row -->
                                    
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <p class="disclaimerFooter">
                                                {!$Label.ARSurgeon_DisclaimerPDF}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <span class="text-danger save-error" id="generatePdfErrors"></span>
                                     
                                    <button type="button" class="btn btn-default generatePdf-cancel-btn" data-dismiss="modal">Cancel</button>
                                    <button type="button" class="btn btn-primary generatePdf-save-btn"> {!$Label.ARSurgeon_GeneratePDF} </button>
                                </div>
                            </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
            
            <!-- Code Changes by Mimansha Samal ends on 14th March 2017 in Release 3.2 for Preference Card  -->
    
            <!--CID - 000177/Mimansha Samal/April/11/2017/New/Edit Preference Card warning modal -->
            <div class="modal fade  modal-authrex" id="cancel-new-prefcard-modal" data-backdrop="static" tabindex="-1" role="dialog" >
           
                <div class="modal-dialog" style="width:450px">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.ARSurgeon_PrefCardModal}</h4>
                        </div>
        
                        <div class="modal-body">
                            <div class="row">
                                <div>
                               
                                  <label>Do you want to save the changes you made for the Preference Card? </label>
                                              
                                </div>
                            </div>
                        </div>
        
                        <div class="modal-footer">
                            <span class="text-danger save-error"></span>
                           
                            <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Yes}</button>
                            <button type="button" class="btn btn-primary btn-cancel-pref-card">{!$Label.CS_No}</button>
                            
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal --> 
            
            <!--CID - 000177/Mimansha Samal/April/11/2017/New/Edit Preference Card warning modal -->
            
            <!--CID - 000177/Mimansha Samal/April/13/2017/Account Affiliation Save Warning Modal -->
            <div class="modal fade  modal-authrex" id="cancel-add-account-affiliation-modal" data-backdrop="static" tabindex="-1" role="dialog" >
   
                <div class="modal-dialog" style="width:450px">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Account Affiliation</h4>
                        </div>

                        <div class="modal-body">
                            <div class="row">
                                <div>
                       
                                    <label>Do you want to save the changes you made for the Account Affiliation? </label>
                                      
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <span class="text-danger save-error"></span>
                   
                            <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Yes}</button>
                            <button type="button" class="btn btn-primary btn-cancel-account-affiliation-warning">{!$Label.CS_No}</button>
                    
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->         
            
            <!--CID - 000177/Mimansha Samal/April/13/2017/Account Affiliation Save Warning Modal -->
            
            <!--CID - 000177/Mimansha Samal/April/13/2017/Edit Surgeon Bio Save Warning Modal -->
            <div class="modal fade  modal-authrex" id="cancel-surgeon-bio-modal" data-backdrop="static" tabindex="-1" role="dialog" >
   
                <div class="modal-dialog" style="width:450px">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Edit Surgeon Bio</h4>
                        </div>

                        <div class="modal-body">
                            <div class="row">
                                <div>
                       
                                    <label>Do you want to save the changes you made for the Surgeon Biography? </label>
                                      
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <span class="text-danger save-error"></span>
                   
                            <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Yes}</button>
                            <button type="button" class="btn btn-primary btn-close-surgeon-bio-warning">{!$Label.CS_No}</button>
                    
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->         
            
            <!--CID - 000177/Mimansha Samal/April/13/2017/Edit Surgeon Bio Save Warning Modal -->
            
            <!--CID - 000177/Mimansha Samal/April/14/2017/Provider Contact Save Warning Modal -->
            <div class="modal fade  modal-authrex" id="cancel-provider-contact-modal" data-backdrop="static" tabindex="-1" role="dialog" >
   
                <div class="modal-dialog" style="width:450px">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Contact</h4>
                        </div>

                        <div class="modal-body">
                            <div class="row">
                                <div>
                       
                                    <label>Do you want to save the changes you made for the Related Contact? </label>
                                      
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <span class="text-danger save-error"></span>
                   
                            <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Yes}</button>
                            <button type="button" class="btn btn-primary btn-close-provider-contact-warning">{!$Label.CS_No}</button>
                    
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
            
            <!--CID - 000177/Mimansha Samal/April/17/2017/ Add/Edit Account Notes Save warning modal -->
            <div class="modal fade  modal-authrex" id="cancel-account-notes-modal" data-backdrop="static" tabindex="-1" role="dialog" >
           
                <div class="modal-dialog" style="width:450px">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp; Notes</h4>
                        </div>
        
                        <div class="modal-body">
                            <div class="row">
                                <div>
                               
                                  <label>Do you want to save the changes you made for the  Notes? </label>
                                              
                                </div>
                            </div>
                        </div>
        
                        <div class="modal-footer">
                            <span class="text-danger save-error"></span>
                           
                            <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Yes}</button>
                            <button type="button" class="btn btn-primary btn-cancel-account-notes-warning">{!$Label.CS_No}</button>
                            
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal --> 
            
            <!--CID - 000177/Mimansha Samal/April/17/2017/ Add/Edit Account Notes Save warning modal -->         
            
            <!-- modal for delete Contact -->
                <div class="modal fade  modal-authrex" id="delete-contact-modal" data-backdrop="static" tabindex="-1" role="dialog">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.AROpportunity_Contact}</h4>
                      </div>
            
                      <div class="modal-body">
            
                        <div class="row">
                          <div class="col-sm-8">
                            <div class="form-group">
                               <label>Are you sure you want to delete the Contact?</label>
                            </div>                
                          </div>
                        </div>
                      </div>
            
                      <div class="modal-footer">
                        <span class="text-danger save-error"></span>&nbsp;&nbsp;
                        <button type="button" class="btn btn-primary btn-delete-contact">{!$Label.CS_Yes}</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_No}</button>
                        
                      </div>
                    </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                
                <!-- modal for delete Account -->
                <div class="modal fade  modal-authrex" id="delete-account-modal" data-backdrop="static" tabindex="-1" role="dialog">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Account</h4>
                      </div>
            
                      <div class="modal-body">
            
                        <div class="row">
                          <div class="col-sm-8">
                            <div class="form-group">
                               <label>Are you sure you want to delete the Account?</label>
                            </div>                
                          </div>
                        </div>
                      </div>
            
                      <div class="modal-footer">
                        <span class="text-danger save-error"></span>&nbsp;&nbsp;
                        <button type="button" class="btn btn-primary btn-delete-surgeon">{!$Label.CS_Yes}</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_No}</button>
                        
                      </div>
                    </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->    
                
                <!-- modal for delete Photoes -->
                <div class="modal fade  modal-authrex" id="delete-photo-modal" data-backdrop="static" tabindex="-1" role="dialog">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Surgeon</h4>
                      </div>
            
                      <div class="modal-body">
            
                        <div class="row">
                          <div class="col-sm-8">
                            <div class="form-group">
                               <label>Are you sure you want to delete the Photo?</label>
                            </div>                
                          </div>
                        </div>
                      </div>
            
                      <div class="modal-footer">
                        <span class="text-danger save-error"></span>&nbsp;&nbsp;
                        <button type="button" class="btn btn-primary btn-delete-photo">Yes</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
                        
                      </div>
                    </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                
            <!--CID - 000177/Mimansha Samal/May/5/2017/ Profile Photo Save warning modal -->
            <div class="modal fade  modal-authrex" id="cancel-upload-surgeon-profile-pic-modal" data-backdrop="static" tabindex="-1" role="dialog" >
           
                <div class="modal-dialog" style="width:450px">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp; Upload Profile Photo</h4>
                        </div>
        
                        <div class="modal-body">
                            <div class="row">
                                <div>
                               
                                  <label>Do you want to save the changes you made for the Profile Photo? </label>
                                              
                                </div>
                            </div>
                        </div>
        
                        <div class="modal-footer">
                            <span class="text-danger save-error"></span>
                           
                            <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Yes}</button>
                            <button type="button" class="btn btn-primary btn-cancel-profile-pic-warning">{!$Label.CS_No}</button>
                            
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal --> 
            
            <!--CID - 000177/Mimansha Samal/April/17/2017/ Add/Edit Account Notes Save warning modal -->
            
            <!-- added by chad -->
            <!-- create task modal -->      
            <div id="task-edit-modal" class="modal fade modal-authrex" role="dialog" data-backdrop="static" tabindex="-1" >
                    <div class="modal-dialog modal-lg">
                
                        <!-- Modal content-->
                        <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title create" id="task-edit-modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Create Task</h4>
                            <h4 class="modal-title edit" id="task-modal-title" style="display:none"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Edit Task</h4>
                        </div>
                        
                        <div class="modal-body" >
                            <p/> 
                            <div class="row">
                              <div class="form-group col-sm-12">
                                <div class="form-horizontal">
                                    <div class="form-group col-sm-6">
                                        
                                        <div class="form-group col-sm-12">
                                            <label for="priority" class="control-label">  Priority </label> 
                                            <select id="priority" class="form-control priority clear-on-close">
                                                <!-- <option value="0">- {!$Label.CS_Select} -</option> -->
                                            </select> 
                                        </div>
                                        <div class="form-group col-sm-12">
                                            <label for="status" class="control-label"> Status</label> 
                                            <select id="status" class="form-control status clear-on-close">
                                                <!-- <option value="0">- {!$Label.CS_Select} -</option> -->
                                            </select>
                                        </div>
                                        
                                    </div>
                                    
                                    <div class="form-group col-sm-6"> 
                                        
                                        
                                        <div class="form-group col-sm-12">
                                            <label for="dueDate" class="control-label"> Due Date </label>
                                            <div class="input-group date dueDate-container">
                                                <input id="dueDate" class="form-control dueDate clear-on-close" type="text" />
                                                <span class="input-group-addon">
                                                    <span class="glyphicon glyphicon-calendar"></span>
                                                </span>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group col-sm-12">
                                            <label for="task-owner" class="control-label">  Task Owner </label>
                                            <select class="form-control task-owner clear-on-close"></select>
                                            
                                        </div>
                                        <div class="form-group col-sm-12">
                                            <label for="createdBy" class="control-label">Created By</label>
                                            <span class="form-control" id="createdBy" readonly="true"  disabled ="true">{!$User.FirstName} {!$User.LastName}</span>  
                                        </div>
                                    </div> 
                                    <div class="form-group col-sm-12">
                                      <label for="taskDetails" class="control-label">Task Subject</label>
                                      <input type="text" class="form-control subject clear-on-close"/>
                                       
                                    </div>
                                    <div class="form-group col-sm-12">
                                      <label for="taskNotes" class="control-label">Task Description</label> 
                                      <textarea class="form-control description clear-on-close" rows="3" id="taskNotes" style="min-width: 100%"></textarea> 
                                    </div>
                                   </div>
                                </div> 
                            </div> <!-- End of row div --> 
                        </div>
                        <div class="modal-footer">
                            
                            <span class="text-danger task-edit-modal-error"></span>
                            <button type="button" class="btn btn-default cancel" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-primary save">Save</button>
                            
                        </div>
                        </div>
                
                    </div>
                </div>
                <!-- end added by Chad -->
                <!--Author:Ansu Routray   Release:4.3   Date Modified :22/08/2017    Component Id:CID-000463 Purpose:Add modal for orthoilustrtated details for surgeon -->
                    
                <div id="ortho-add-modal" class="modal fade modal-authrex" role="dialog" data-backdrop="static" tabindex="-1" >
                     <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <!-- Modified on 13/10/2017 for close ICON issue by Santosh Release:4.4-->
                                <!-- <button type="button" class="close opportunity-type-cancel-btn" aria-label="Close"><span aria-hidden="true">&times;</span></button>-->
                                <button type="button" class="close ortho-cancel-btn" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">
                                    <i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;
                                    <span class="modal-title-txt">New OrthoIllustrated</span>
                                </h4>
                            </div>
                            <div class="modal-body ModalOverflow" >
                                <div class="row">
                                    <div class="form-group col-sm-6">
                                         <div class="form-group col-sm-12">
                                             <label for="website" class="control-label"><span class="text-danger">*</span> OI Website </label>
                                             <input  id="website" class="form-control website" type="text" />
                                         </div>
                                         <div class="form-group col-sm-12">
                                             <label for="website" class="control-label"><span class="text-danger">*</span> OI Prefix</label>
                                             <select  id="prefix" class="form-control OI-Prefix"> <option value="">- {!$Label.CS_Select} -</option> </select>
                                         </div>
                                        <div class="form-group col-sm-12">
                                            <label for="full-name" class="control-label"><span class="text-danger">*</span> OI First Name </label>
                                            <input  id="full-name" class="form-control OI-FirstName"  type="text"></input>
                                            <input type="hidden" id="hidden-opportunity-name" name="hidden-opportunity-name" />
                                            <input type="hidden" id="opportunityId" name="hidden-opportunity-id" /> 
                                         </div>
                                         <div class="form-group col-sm-12">
                                         <!-- Modified on 13/10/2017 by Santosh :Removed Required icon Release:4.4-->
                                            <label for="full-name" class="control-label"> OI Middle Name </label>
                                            <input  id="full-name" class="form-control OI-MiddleName"  type="text"></input>
                                            <input type="hidden" id="hidden-opportunity-name" name="hidden-opportunity-name" />
                                            <input type="hidden" id="opportunityId" name="hidden-opportunity-id" /> 
                                         </div>
                                         <div class="form-group col-sm-12">
                                            <label for="full-name" class="control-label"><span class="text-danger">*</span> OI Last Name </label>
                                            <input  id="full-name" class="form-control OI-LastName"  type="text"></input>
                                            <input type="hidden" id="hidden-opportunity-name" name="hidden-opportunity-name" />
                                            <input type="hidden" id="opportunityId" name="hidden-opportunity-id" /> 
                                         </div>
                                         <div class="form-group col-sm-12">
                                         <!-- Modified on 13/10/2017 by Santosh :Removed Required icon Release:4.4-->
                                            <label for="full-name" class="control-label"> OI Suffix </label>
                                            <select  id="full-name" class="form-control OI-Suffix"  type="text"> <option value="">- {!$Label.CS_Select} -</option></select>
                                             
                                         </div>
                                          
                                         <div class="form-group col-sm-12">
                                             <label for="surgeon" class="control-label"><span class="text-danger">*</span> OI Phone <i class="surgeon-busy fa fa-refresh fa-spin" style="display:none"></i></label>
                                             <input  id="phone" class="form-control phone" type="text" onkeypress='return isNumberCommaDot(event)' maxlength="10" />                                             
                                         </div> 
                                         <div class="form-group col-sm-12">
                                            <label for="statelicense" class="control-label"><span class="text-danger">*</span> State License <i class="owner-busy fa fa-refresh fa-spin" style="display:none"></i></label>
                                            <input  id="statelicense" class="form-control statelicense" type="text" />
                                         </div>
                                        
                                    </div>
                                    <div class="form-group col-sm-6" >
                                        <div class="form-group col-sm-12"  id="divAccountTeam" style="display:none">
                                            <label for="createdBy" class="control-label">Team</label>
                                            <span class="form-control" id="account-team" readonly="true"  disabled ="true"></span>  
                                        </div>
                                        <div class="form-group col-sm-12" id ="divOpportunityTeam">
                                            <label for="practicename" class="control-label" style="display: block;">
                                                <span class="text-danger">*</span> OI Practice Name<i class="owner-busy fa fa-refresh fa-spin" style="display:none"></i>
                                            </label>
                                            <input  id="practicename" class="form-control practicename" type="text" />
                                        </div>
                                        <div class="form-group col-sm-12"><!-- Modified on 3/10/2017 -->
                                             <label for="OI-Country" class="control-label"><span class="text-danger">*</span> OI Country <i class="account-busy fa fa-refresh fa-spin" style="display:none"></i></label>
                                             <select  id="OI-Country" class="form-control country"> <option value="">- {!$Label.CS_Select} -</option> </select>
                                        </div>
                                        <div class="form-group col-sm-12">
                                             <label for="OI-Street" class="control-label"><span class="text-danger">*</span> OI Street <i class="account-busy fa fa-refresh fa-spin" style="display:none"></i></label>
                                             <input  id="OI-Street" class="form-control street" type="text" />
                                        </div>
                                        
                                        <div class="form-group col-sm-12">
                                             <label for="OI-City" class="control-label"><span class="text-danger">*</span> OI City <i class="account-busy fa fa-refresh fa-spin" style="display:none"></i></label>
                                             <input  id="OI-City" class="form-control city" type="text" />
                                        </div>
                                        <div class="form-group col-sm-12">
                                             <label for="OI-State" class="control-label"><span class="text-danger">*</span> OI State<i class="account-busy fa fa-refresh fa-spin" style="display:none"></i></label>
                                             <select  id="OI-State" class="form-control state"><option value="">- {!$Label.CS_Select} -</option>  </select>
                                        </div>
                                        <div class="form-group col-sm-12">
                                             <label for="OI-ZipCode" class="control-label"><span class="text-danger">*</span> OI Zip Code <i class="account-busy fa fa-refresh fa-spin" style="display:none"></i></label>
                                             <input  id="OI-ZipCode" class="form-control zipcode" type="text" />
                                        </div>
                                        
                                        <div class="form-group col-sm-12"> 
                                             <label for="email" class="control-label"><span class="text-danger">*</span> OI Email </label>
                                             <select  id="email" class="form-control email" ></select>
                                        </div>
                                         <div class="form-group col-sm-12">
                                            <label for="specialties" class="control-label"><span class="text-danger">*</span>OI Specialties<i class="owner-busy fa fa-refresh fa-spin" style="display:none"></i></label>
                                            <select  id="specialties" class="form-control specialties multi-select" >
                                              <option value="">- {!$Label.CS_Select} -</option>
                                            </select>
                                            <div id="multi-specialty" class="ctag-list"></div>
                                            <input type="hidden" id="hidden-productCategory" name="hidden-productCategory" />
                                         </div>                                       
                                         
                                    </div>
                                    </div>  <!-- end of row -->
                                    <hr/>
                                    
                                    <div class="row" id="divOpportunityLineItems" >
                            <div class="col-xs-12">
                                <div class="table-responsive" style="overflow: visible">
                                <caption><h3>OI Course Data </h3><label class="control-label" style="color:red; font-weight:500">If you add course data, all fields below are mandatory</label></caption>
                                    <table class="table table-condensed course-parts related-table" style="margin-bottom:0px; overflow: visible">
                                        
                                        <thead>
                                            <tr> <!--Removed mandatory icon for all Course fields by Santosh Talasu on 31/10/2017 Release 4.4-->
                                                <th style="width:20%">Course Name<!--<span class="text-danger">*</span>--></th>
                                                <th style="width:18%">Course Type<!--<span class="text-danger">*</span>--></th>
                                                <th style="width:17%">Course Date<!--<span class="text-danger">*</span>--></th>
                                                <th style="width:15">Location<!--<span class="text-danger">*</span>--></th>
                                                <th style="width:16%">Product Teams<!--<span class="text-danger">*</span>--></th>
                                                <th style="width:15%">&nbsp;</th>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <input type="text" class="form-control course-name"/>
                                                </td>
                                                <td>
                                                    <select  id="course-type" class="form-control course-type">
                                                        <option value="">- {!$Label.CS_Select} -</option>
                                                    </select>
                                                </td>
                                                <td>
                                                    <div class="input-group date course-Date-container">
                                                        <input id="course-date" class="form-control courseDate clear-on-close" type="text" />
                                                            <span class="input-group-addon">
                                                                <span class="glyphicon glyphicon-calendar"></span>
                                                        </span>
                                                    </div>
                                                </td>
                                                <td>
                                                    <input type="text" class="form-control course-location"/>
<!--                                                            <p class="form-control-static opportunity-part-unit-price"></p>
 -->                                                        </td>
                                                <td id="multi-program">
                                                    <select  id="program-type" class="form-control program-type multi-select">
                                                        <option value="0">- {!$Label.CS_Select} -</option>
                                                    </select>
                                                    <div class="ctag-list" id="product-terms"></div>
                                                </td>
                                                <td style="vertical-align:middle;text-align:right">
                                                    <button class="btn btn-xs btn-primary add-course-part"  onclick="addCourse()">Add</button>
                                                </td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                                         
                                        </tbody>
                                        
                                    </table>
                                </div>
                            </div>
                        </div>  <!-- End of course Row -->  
                                
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="pull-left btn btn-warning ortho-delete-btn" onclick="deleteOrthoConfirm()">Delete</button>
                                <span class="text-danger save-error" id="newOrthoErrors"></span>
                                 
                              <button type="button" class="btn btn-default ortho-cancel-btn">Cancel</button>
                              <button type="button" class="btn btn-primary ortho-save-btn" > Save</button> 
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                <!-- End of orthoillustrated add modal -->
                <!--Author:Ansu Routray   Release:4.3   Date Modified :22/08/2017    Component Id:CID-000463 Purpose:CANCEL modal for orthoilustrtated details for surgeon -->
                <div class="modal fade  modal-authrex" id="cancel-ortho-modal" data-backdrop="static" tabindex="-1" role="dialog" >
       
                    <div class="modal-dialog" style="width:450px">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Orthoillustrated</h4>
                            </div>
    
                            <div class="modal-body">
                                <div class="row">
                                    <div>
                                        <label>Do you want to save the changes you made for the orthoillustrated? </label> 
                                    </div>
                                </div>
                            </div> 
                            <div class="modal-footer">
                                <span class="text-danger save-error"></span>
                                <button type="button" class="btn btn-default" data-dismiss="modal">Yes</button>
                                <button type="button" class="btn btn-primary btn-cancel-ortho">No</button>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->  
                <!--CID - 000463/Ansu /30.8.2017/ New ortho modal-->
                <!--Author:Ansu Routray   Release:4.3   Date Modified :22/08/2017    Component Id:CID-000463 Purpose:Delete modal for orthoilustrtated details for surgeon -->
                <div class="modal fade  modal-authrex" id="delete-ortho-modal" data-backdrop="static" tabindex="-1" role="dialog" >
       
                    <div class="modal-dialog" style="width:450px">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Delete Surgeon from OI</h4>
                            </div>
    
                            <div class="modal-body">
                                <div class="row">
                                    <div>
                                        <label>Are you sure you want to delete this surgeon from OI? </label> 
                                    </div>
                                </div>
                            </div> 
                            <div class="modal-footer">
                                <span class="text-danger save-error"></span>
                                <button type="button" class="btn btn-default btn-delete-ortho" >Yes</button>
                                <button type="button" class="btn btn-primary" data-dismiss="modal">No</button>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal --> 
                <!--Author:Ansu Routray   Release:4.3   Date Modified :22/08/2017    Component Id:CID-000463 Purpose:Delete confimr modal for orthoilustrtated details for surgeon -->
                <div class="modal fade  modal-authrex" id="delete-course-modal" data-backdrop="static" tabindex="-1" role="dialog" >
       
                    <div class="modal-dialog" style="width:450px">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Delete OI Course</h4>
                            </div>
    
                            <div class="modal-body">
                                <div class="row">
                                    <div>
                                        <label>Are you sure you want to delete this course from OI? </label> 
                                    </div>
                                </div>
                            </div> 
                            <div class="modal-footer">
                                <span class="text-danger save-error"></span>
                                <button type="button" class="btn btn-default btn-delete-course" onclick="deleteCourse();" >Yes</button>
                                <button type="button" class="btn btn-primary" data-dismiss="modal">No</button>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal --> 
                <!--CID - 000463/Ansu /30.8.2017/ New ortho modal-->                
        </apex:define>                              
    </apex:composition>
</apex:page>