<apex:page id="thePage" applyBodyTag="false" applyHtmlTag="false" showChat="false" showHeader="false" sidebar="false" showQuickActionVfHeader="false" standardStylesheets="false" controller="CS_ARAccountsCC"  extensions="CS_ARCCExtension" docType="html-5.0">
    <apex:composition template="ARtemplate">
        <apex:define name="bodyContent"> 
        
        <style>
        
            .border_top_2{
               border-top-width: 2px; 
            }
           
            .border_top_none{
                border-top-width: 0px; 
            }
            
            .light_border_top_bottom{
                border-top: thin solid lightgrey;
                border-bottom: thin solid lightgrey;
            }
            
            .grey_border_right{
                border-right: thin solid grey;
            }
            
            .menu_btn{
                width: 100px;
            }
            
            .font-large {
                font-size: large;
            }
             
            .ibox_border{
                border: 1px solid lightgrey;
            }
             
            .fa-2x {
            
                width: 50px;
                text-align: center;
            }
            
            
            .muted_label{
                padding-top: 0px;
                color: #9c9a9a; /*lightgrey;*/
                min-height: 25px !important;
            }
            
            .detail_div{
                margin-bottom: 25px !important;
            }
            
            .GGrid-content {
                border-top: solid 1px #D3D3D3 !important;
                //height: inherit !important;
            }
            
            .subsection_header{
                font-size: 15px;
                margin-left: 5px;
                word-wrap:break-word;
            }
            
            .fa-border{
                background-color: #545454;
            }
            .fa-meeting-background{
                background-color: #a94442 !important;
            }
            .fa-meeting-task{
                background-color: #3c763d !important;
                font-size: 1.5em;
            }
            .fa-meeting-surgicalcase{
                background-color: #337ab7 !important;
                font-size: 1.5em;
            }
            .fa-meeting-note{
                background-color: #ed5565 !important;
                font-size: 1.5em;
            }
            .fa-meeting-log{
                background-color: #f8ac59 !important;
                font-size: 1.5em;
            }
            
            
            .nav-tabs { border-bottom: 2px solid #DDD; }
            .nav-tabs > li.active > a, .nav-tabs > li.active > a:focus, .nav-tabs > li.active > a:hover { border-width: 0; }
            .nav-tabs > li > a { border: none; color: #666; }
                .nav-tabs > li.active > a, .nav-tabs > li > a:hover { border: none; color: #4285F4 !important; background: transparent; }
                .nav-tabs > li > a::after { content: ""; background: #4285F4; height: 2px; position: absolute; width: 100%; left: 0px; bottom: -1px; transition: all 250ms ease 0s; transform: scale(0); }
            .nav-tabs > li.active > a::after, .nav-tabs > li:hover > a::after { transform: scale(1); }
            .tab-nav > li > a::after { background: #21527d none repeat scroll 0% 0%; color: #fff; }
            .tab-pane { padding: 15px 0; }
            .tab-content{padding:0px}
            .ag-header-cell-menu-button{
                    opacity:1 !important;
                }
            .GGrid-content {
                    border-top: solid 1px #D3D3D3 !important;
                    //height: inherit !important;
                }
            .grey_border_right{
                    border-right: thin solid grey;
                }
                
                .menu_btn{
                    width: 100px;
                }
                
                .font-large {
                    font-size: large;
                }
            
                .chart_table {
                    //border-top: thin solid lightgrey;
                }
                .ibox_border{
                    border: 1px solid lightgrey;
                }
                
                .ct-series-a .ct-bar {
                      /* Colour of your bars 
                      stroke: teal;*/
                      /* The width of your bars */
                      stroke-width: 20px;
                } 
                .filterable {
                    margin-top: 15px;
                }
                .filterable .panel-heading .pull-right {
                    margin-top: -20px;
                }
                .filterable .filters input[disabled] {
                    background-color: transparent;
                    border: none;
                    cursor: auto;
                    box-shadow: none;
                    padding: 0;
                    padding-top: 11px;
                    height: auto;
                }
                .filterable .filters input[disabled]::-webkit-input-placeholder {
                    color: #333;
                }
                .filterable .filters input[disabled]::-moz-placeholder {
                    color: #333;
                }
                .filterable .filters input[disabled]:-ms-input-placeholder {
                    color: #333;
                }
                .header-left{
                    text-align: left;
                    background-color: lightgray;
                }
                
                .muted_label{
                    padding-top: 0px;
                    color: #9c9a9a; /*lightgrey;*/
                    min-height: 25px !important;
                }
                
                .related-table{
                border: thin solid lightgrey;
                 }
                    
                 .related-table td, .related-table th {
                    border:none
                 }
                    
                 .related-table caption{
                    padding-bottom: 0px;
                    padding-top: 20px;
                 }
                 
                .ibox-table td, .ibox-table tr, .ibox-table th{
                     border: none !important;
                     //padding: 0px !important;            
                 }
                 .fa-line-chart {
                    font-size: 1.4em;
                  }
                  
                 .expired-prod{
                     display : inline;
                     font-weight: bolder;
                     font-size: large;
                     font-stretch: expanded;
                     color: red;
                 } 
                 .disclaimerFooter {
                  text-align: center;
                  margin: 0 auto;                 
                }
                .axis-grid-cell-href {
                    cursor: pointer;
                    color: #3A9DDB ;
                    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; 
                    font-size: 13px; 
                }
                .ag-header-cell {
                    text-align: left !important;
                    padding-left:2px;
                }
                .hyprlink{
                    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; 
                    font-size: 13px;
                }
                .axis-detail-pg-data-href {
                    padding-top: 0px;
                    padding-bottom: 0px;
                    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif ;
                
                }
                .axis-detail-pg-field-label{
                    padding-top: 0px;
                    padding-bottom: 0px;
                }
                .ibox{
                    margin-bottom: 0px;
                }
                .form-control-static{
                    min-height:34px;
                    padding-top:7px;
                    padding-bottom:7px;
                    margin-bottom:0px;
                }
                .invtable{
                    padding-left:10%;
                }
                
               
        </style>
        <script>
              var accountId = GetURLParameter('id');
              var desc;
              var part;
              var currenUserTZ = "{! currentUserTimeZone}";
              //moment.tz.setDefault(currenUserTZ);
              $(document).ready(function() {
                   //currenUserTZ = "{! currentUserTimeZone}";
                   moment.tz.setDefault(currenUserTZ);
                   $('#account').addClass('active');
                   $("#accListBtn").show();
                   retrieveAccountData();
                   $("h2.title-icon-container i").removeClass().addClass("fa fa-hospital-o");
                   displayProviderDetail(accountId );
                   populateOpportunityDetailsView(accountId );

                    // added by chad for 4.1
                    // setup a delegated click handler for this activity
                    // refactor the call of linkactivity from inline click handler to jquery delegated event so
                    // we can avoid the complex string escape on the notes field and just pass the opp directly
                    $("#tab-accountActivity").on("click", ".activity-link", function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        var thisRecordId = $(this).parent().prop("id");
                        linkActivity(window.acctActivities[thisRecordId]);                    

                    });


                   $("#divAccountSummaries i[id$='toggle']").on('click', function(event){
                       console.log('toggle clicked==');
                        targetDiv = $(this).attr('data-target');
                        $("#"+targetDiv).collapse('toggle');
                        
                        if($(this).hasClass('fa-chevron-up')){
                            $(this).removeClass('fa-chevron-up');
                            $(this).addClass('fa-chevron-down');
                        } else {
                            $(this).removeClass('fa-chevron-down');
                            $(this).addClass('fa-chevron-up');
                        }
                   });
                   $("#divImplantsAndDisposables i[id$='toggle']").on('click', function(event){
                       
                        targetDiv = $(this).attr('data-target');
                        $("#"+targetDiv).collapse('toggle');
                        
                        if($(this).hasClass('fa-chevron-up')){
                            $(this).removeClass('fa-chevron-up');
                            $(this).addClass('fa-chevron-down');
                        } else {
                            $(this).removeClass('fa-chevron-down');
                            $(this).addClass('fa-chevron-up');
                        }
                   });
                    $("#divInstrumentsAndEquipment i[id$='toggle']").on('click', function(event){
                       
                        targetDiv = $(this).attr('data-target');
                        $("#"+targetDiv).collapse('toggle');
                        
                        if($(this).hasClass('fa-chevron-up')){
                            $(this).removeClass('fa-chevron-up');
                            $(this).addClass('fa-chevron-down');
                        } else {
                            $(this).removeClass('fa-chevron-down');
                            $(this).addClass('fa-chevron-up');
                        }
                   }); 
                    $("#divNotes i[id$='toggle']").on('click', function(event){
                       
                        targetDiv = $(this).attr('data-target');
                        $("#"+targetDiv).collapse('toggle');
                        
                        if($(this).hasClass('fa-chevron-up')){
                            $(this).removeClass('fa-chevron-up');
                            $(this).addClass('fa-chevron-down');
                        } else {
                            $(this).removeClass('fa-chevron-down');
                            $(this).addClass('fa-chevron-up');
                        }
                   }); 
                   $("#divactivity i[id$='toggle']").on('click', function(event){
                       
                        targetDiv = $(this).attr('data-target');
                        $("#"+targetDiv).collapse('toggle');
                        
                        if($(this).hasClass('fa-chevron-up')){
                            $(this).removeClass('fa-chevron-up');
                            $(this).addClass('fa-chevron-down');
                        } else {
                            $(this).removeClass('fa-chevron-down');
                            $(this).addClass('fa-chevron-up');
                        }
                   });
                   
                   
                    Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveBusinessHourValues}",
                    function(result, event) { 
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#account-detail-modal select.businessHourStartTime").append("<option value='"+txt+"'>"+txt+"</option>");
                        $("#account-detail-modal select.businessHourEndTime").append("<option value='"+txt+"'>"+txt+"</option>");
                      }      
                    }); 
                    Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveSterileProcessingHourValues}",
                    function(result, event) { 
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#account-detail-modal select.SterileProcessingHourStartTime").append("<option value='"+txt+"'>"+txt+"</option>");
                        $("#account-detail-modal select.SterileProcessingHourEndTime").append("<option value='"+txt+"'>"+txt+"</option>");
                      }      
                    });
                    Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveFiscalYearDayValues}",
                    function(result, event) {
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#account-detail-modal select.AccountFiscalYearEndDay").append("<option value='"+txt+"'>"+txt+"</option>");
                        $("#account-detail-modal select.AccountFiscalYearStartDay").append("<option value='"+txt+"'>"+txt+"</option>");
                      }      
                    });
                    Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveFiscalYearMonthValues}",
                    function(result, event) { 
                      for ( var i=0; i < result.length; i++) {
                        var txt = globalDecodeEntities(result[i]);
                        $("#account-detail-modal select.AccountFiscalYearEndMonth").append("<option value='"+txt+"'>"+txt+"</option>");
                        $("#account-detail-modal select.AccountFiscalYearStartMonth").append("<option value='"+txt+"'>"+txt+"</option>");
                      }      
                    });
                               
                    $("#provider-detail button.edit-accountDetail-btn").on("click", function() {
           
               
                           var strpos=($("#tab-account-details div.SterileProcessingHours")).text().search("-");
                           var busstrpos=($("#tab-account-details div.time")).text().search("-");
                           var yrpos=($("#tab-account-details div.AccountFiscalYear")).text().search("-");
                           var yrstrtdate=($("#tab-account-details div.AccountFiscalYear").text().substring(0, yrpos));
                           var yrenddate=($("#tab-account-details div.AccountFiscalYear").text().substring(yrpos+1));
                           var yrstrtstrpos=yrstrtdate.trim().search(" ");
                           var yrendstrpos=yrenddate.trim().search(" ");
                           bsHourStrtTime=($("#tab-account-details div.time")).text().split("-");
                           SterilHourStrtTime=($("#tab-account-details div.SterileProcessingHours")).text().split("-");
                           //console.log('bsHourStrtTime=='+bsHourStrtTime+'SterilHourStrtTime=='+SterilHourStrtTime+'strpos=='+strpos+'busstrpos=='+busstrpos+'yrendstrpos=='+yrendstrpos);
                           //console.log('bsHourStrtTime=='+( (bsHourStrtTime!=" "? bsHourStrtTime[1].trim() : " "))+'SterilHourStrtTime=='+( (SterilHourStrtTime!=" "?SterilHourStrtTime[1].trim() : " " )) );
                         
                        // populate the fields from the detail
                          $("#account-detail-modal input.credentialcompany").val( $("#tab-account-details div.credentialcompany").text() );
                          $("#account-detail-modal input.SignInLocation").val( $("#tab-account-details div.SignInLocation").text() );
                          $("#account-detail-modal input.RepresentativeParking").val( $("#tab-account-details div.RepresentativeParking").text() );
                          $("#account-detail-modal select.SterileProcessingHourStartTime").val((SterilHourStrtTime!=" "?(SterilHourStrtTime[0].trim()!=""?SterilHourStrtTime[0].trim():" ") : " " ));
                          $("#account-detail-modal select.SterileProcessingHourEndTime").val((SterilHourStrtTime!=" "?(SterilHourStrtTime[1].trim()!=""?SterilHourStrtTime[1].trim():" ") : " " ));
                          $("#account-detail-modal select.businessHourStartTime").val( (bsHourStrtTime !=" "? (bsHourStrtTime[0].trim() !=""?bsHourStrtTime[0].trim():" ") : " "));
                          $("#account-detail-modal select.businessHourEndTime").val( (bsHourStrtTime !=" "? (bsHourStrtTime[1].trim() !=""?bsHourStrtTime[1].trim():" ") : " "));
                          $("#account-detail-modal select.AccountFiscalYearStartDay").val( yrstrtdate.trim().substring(yrstrtstrpos+1) || " ");
                          $("#account-detail-modal select.AccountFiscalYearStartMonth").val( yrstrtdate.trim().substring(0, yrstrtstrpos) || " ");
                          $("#account-detail-modal select.AccountFiscalYearEndDay").val( yrenddate.trim().substring(yrendstrpos+1) || " ");
                          $("#account-detail-modal select.AccountFiscalYearEndMonth").val( yrenddate.trim().substring(0, yrendstrpos) || " ");
                          
                          $("#account-detail-modal input.OtherAttireNotes").val( $("#tab-account-details div.OtherAttireNotes").text() );
                          $("#account-detail-modal input.OperatingRoomLocation").val( $("#tab-account-details div.OperatingRoomLocation").text() );
                          $("#account-detail-modal input.SterileProcessingLocation").val( $("#tab-account-details div.SterileProcessingLocation").text() );
                          $("#account-detail-modal select.RequiredtoChangeScrubs").val( $("#tab-account-details div.RequiredtoChangeScrubs").text() );
                          $("#account-detail-modal input.nickname").val( $("#tab-account-details div.nickname").text() );
                          $("#account-detail-modal input.assignedTo").val( $("#tab-account-details div.AssignedTo").text() );
                          $("#account-detail-modal input.workphone").val( $("#tab-account-details div.workfax").text() );
                          $("#account-detail-modal input.phone").val( $("#tab-account-details div.workphone").text() );
                          $("#account-detail-modal input.accountnumber").val( $("#tab-account-details div.accountnumber").text() );
                          $("#account-detail-modal input.SAPName").val( $("#tab-account-details div.SAPName").text() );
                          $("#account-detail-modal input.website").val( $("#tab-account-details a.website").text() );
                          $("#account-detail-modal input.shippingstreet").val( shipstreet );
                          $("#account-detail-modal input.shippingcity").val(shipcity );
                          $("#account-detail-modal input.shippingstate").val( shipstate  );
                          $("#account-detail-modal input.shippingzipcode").val( shipzip  );
            
                          // replace '<br/>' with newlines for display in textarea
                          //var address = $("#provider-detail p.address").html().replace(/\<br\>/g, "\n").replace(/\<br \/\>/g, "\n")
                          //$("#edit-provider-detail-modal textarea.address").val( address );
            
                          // clear any old errors before we bring up the modal
                          $("#account-detail-modal .error").text("");
            
                            $("#account-detail-modal").modal("show");
                            
                            $("#provider-detail i.edit-busy").hide();
                        });
                        
                        $("button.new-contact").on("click", function(e) {
                             $("#add-surgeon-affiliation-modal span.save-error").text("");
                          });
                        
                        /*
                        //Cancel Add surgeon Affiliation Modal
                        $("#add-surgeon-affiliation-modal button.btn-cancel").on("click", function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            
                            $("#add-surgeon-affiliation-modal input").val("");
                            //$("#add-surgeon-affiliation-modal").attr("data-account-id", "");
                            $("#add-surgeon-affiliation-modal").attr("data-record-id", "");
                
                            $("#add-surgeon-affiliation-modal button.btn-delete").hide();
                            var accountId = $("#add-surgeon-affiliation-modal").attr("data-account-id");
                            console.log('account ID in Close--'+accountId );
                            displayProviderRelatedSurgeons(accountId);
                            $("#add-surgeon-affiliation-modal #affiliationErrors").html('');
                            $("#add-surgeon-affiliation-modal").modal("hide");
                
                        });
                        */ 
                        
                        $('#add-surgeon-affiliation-modal').on('hidden.bs.modal', function (e) {
                                        $('#add-surgeon-affiliation-modal input.clear-on-close').val('');
                                        $('#add-surgeon-affiliation-modal select.clear-on-close').val('');
                                        $("#add-surgeon-affiliation-modal button.btn-delete").hide();
                                        $("#add-surgeon-affiliation-modal button.btn-save").show();
                                        $("#add-surgeon-affiliation-modal #affiliationErrors").html('');
                                        $("#add-surgeon-affiliation-modal div.ctag-list.surgeon").empty();
                                        $("#add-surgeon-affiliation-modal input").removeAttr("disabled");
                                        
                                        //Added all Cancel button actions here
                                        $("#add-surgeon-affiliation-modal input").val("");
                                        //$("#add-surgeon-affiliation-modal").attr("data-account-id", "");
                                        $("#add-surgeon-affiliation-modal").attr("data-record-id", "");
                
                                        $("#add-surgeon-affiliation-modal button.btn-delete").hide();
                                        var accountId = $("#add-surgeon-affiliation-modal").attr("data-account-id");
                                        console.log('account ID in Close--'+accountId );
                                        displayProviderRelatedSurgeons(accountId);
                                        $("#add-surgeon-affiliation-modal #affiliationErrors").html('');
                                        $("#add-surgeon-affiliation-modal").modal("hide");
                                       
                        });                        
                        
                       
                        
                        $("#add-surgeon-affiliation-modal button.btn-save").on("click", function() {
                            console.log('enter save');
                            $('#add-surgeon-affiliation-modal #affiliationErrors').html('');
                            var invalidSurgeon = false;
                            var surgeons = [];
                            var surgeonAlreadyExistsError = false;
                            populateSurgeons();
                            var accountId = $("#add-surgeon-affiliation-modal").attr("data-account-id");
                            
                            $("#add-surgeon-affiliation-modal div.surgeon").children().each(function() {
                                var surgeonId =$(this).attr("data-record-id");
                                                                
                                    console.log('surgeonId =='+accountId +'=='+surgeonId );
                                    if($('#surgeonsTag').children('div[data-surgeon-id='+surgeonId+']' ).length != 0){
                                        surgeonAlreadyExistsError = true;
                                    }else{
                                        if($(this).attr("data-record-id")!=" " && $(this).attr("data-record-id")!=null ){
                                        surgeons.push($(this).attr("data-record-id"));
                                        }                                        
                                        
                                    }
                                                        
                             });
                             console.log('types===='+$("#add-surgeon-affiliation-modal input.surgeon-typeahead").val());
                             if (surgeons.length <= 0 && $("#add-surgeon-affiliation-modal input.surgeon-typeahead").val()!="")
                             {
                                 invalidSurgeon =true;
                             }
                             
                            console.log('surgeons===='+surgeons.length);
                            if(surgeonAlreadyExistsError){
                                $("#add-surgeon-affiliation-modal #affiliationErrors").html('Surgeon already exists. Please add a different surgeon.');
                            }else if (! surgeons.length == 0 ){
                               var btnTxt = $("#add-surgeon-affiliation-modal button.btn-save").text();
                               $("#add-surgeon-affiliation-modal button.btn-save").text("Saving...");
                               $("#add-surgeon-affiliation-modal button").attr("disabled",true);
                               Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.saveSurgeonAffiliations}",
                                    accountId,
                                    surgeons,
                                    function(result, event) {  
                                        
                                    if(event.statusCode == 200){
                                
                                        $('#add-surgeon-affiliation-modal').modal('hide');
                                        $("#add-surgeon-affiliation-modal button.btn-save").text(btnTxt);
                                        $("#add-surgeon-affiliation-modal button").removeAttr("disabled"); 
                                        displayProviderRelatedSurgeons(accountId);
                                       
                                    } else{
                                        $("#add-surgeon-affiliation-modal #affiliationErrors").html('Unexpected error. Please try again.');
                                    }
                                  });   //  end of remote call
                                
                            } else{
                                console.log('enters save null error22222');  
                                if( invalidSurgeon == false)
                                {
                                    $("#add-surgeon-affiliation-modal #affiliationErrors").html('Please select atleast one surgeon.');
                                }
                                else
                                {
                                    invalidSurgeon = false;
                                    $("#add-surgeon-affiliation-modal #affiliationErrors").html('Surgeon not found, please select a valid surgeon.');                                    
                                }
                            } 
                        
                    }); //  end of surgeon add type modal.save click   
                      //Code added by Ansu ends 
                    // Delete surgeon affiliation for account
                      $("#add-surgeon-affiliation-modal button.btn-delete").on("click", function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('delete clicked');
                        $("#delete-surgeon-modal").modal('show');
                      });
                      
                      //Added By Mimansha(4/17/2017) for Component CID-000177 for save warning modal on Surgeon Affiliations
                      $("#cancel-add-surgeon-affiliation-modal button.btn-cancel-surgeon-affiliation-warning").on("click", function(e) {                     
                          $("#cancel-add-surgeon-affiliation-modal").modal('hide');
                          $("#add-surgeon-affiliation-modal").modal('hide');
                      }); //  end of Cancel surgeon Affiliation modal.cancel click
                    
                      $("#add-surgeon-affiliation-modal button.surgeon-affiliation-cancel-btn").on("click", function() {
                          
                          if(!($('#add-surgeon-affiliation-modal #delete-btn-surgeon').is(':visible')))                          
                          {
                              $("#cancel-add-surgeon-affiliation-modal").modal("show");     
                          }
                          
                          else{
                              
                              $("#add-surgeon-affiliation-modal").modal("hide");
                          }            
                      }); //  end of Surgeon Affiliation modal.cancel click
                      
                      // --------------------  Mimansha Code Ends  -------------------------------
                      
                      // cancel new contact for a provider 
                      //$("#provider-contact-modal button.btn-cancel").on("click", function(e) {
                      $('#provider-contact-modal').on('hidden.bs.modal', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        $("#provider-contact-modal input").val("");
                        $("#provider-contact-modal textarea").val("");
                        $("#provider-contact-modal select").val("");
                        $("#provider-contact-modal span.save-error").text("");
                        $("#provider-contact-modal").attr("data-account-id", "");
                        $("#provider-contact-modal").attr("data-record-id", "");
            
                        $("#provider-contact-modal button.btn-delete").hide();
                        
            
                        //$("#provider-contact-modal").modal("hide");
            
                      });
                      
                      //Added By Mimansha(4/17/2017) for Component CID-000177 for save warning modal on Related Contact
                      $("#cancel-provider-contact-modal button.btn-close-provider-contact-warning").on("click", function(e) {                     
                          $("#cancel-provider-contact-modal").modal('hide');
                          $("#provider-contact-modal").modal('hide');
                      }); //  end of Cancel Provider Contact modal.cancel click
                    
                      $("#provider-contact-modal button.provider-contact-close-btn").on("click", function() {
               
                          $("#cancel-provider-contact-modal").modal("show");                   
                      }); //  end of Provider Contact modal.cancel click
                      
                      // --------------------  Mimansha Code Ends  -------------------------------
                      
                      // delete new contact for a provider
                      $("#provider-contact-modal button.btn-delete").on("click", function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        $("#delete-contact-modal").modal("show");
                        
            
                      });
                      
                      $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                            //console.log('e.target: ' + e.target); // newly activated tab
                            //console.log('e.relatedTarget: '+ e.relatedTarget); // previous active tab
                            if(e.target.id == 'accountActivity'){
                                $("#tab-accountActivity select#activityFilter").val('All Activities');
                                loadAccountActivities('All Activities');
                            }
                            if(e.target.id == 'surgeons'){
                                displayProviderRelatedSurgeons(accountId);
                            }
                            if(e.target.id == 'contacts'){
                                displayProviderRelatedContacts(accountId);
                            }
                            if(e.target.id == 'accountInventory'){
                                displayProviderInventory(accountId);
                            }
                        });
                        
                      $("button.new-contact").on("click", function(e) {
                        $("#spnPhone").html("validated").hide();
                        $("#spnMobilePhone").html("validated").hide();
                        $("#provider-contact-modal span.save-error").text("");
                      });
                      
                      // saving a new contact for a provider
                      $("#provider-contact-modal button.btn-save").on("click", function(e) {
                            var isValidPhone = true;
                           
                            // Release 2.2 /CID - 000057/Swetha P/Dec/9/2016/Phone validation
                            var phoneValue ="'"+document.getElementById('Phone').value+"'";
                                var onlyNumPhone =phoneValue?phoneValue.replace(/[^0-9]/g, ""):"";
                                console.log('onlyNumPhone1==='+onlyNumPhone);
                            if(onlyNumPhone.length>0 && onlyNumPhone.length!=10){
                                
                                $("#spnPhone").html("Invalid entry").show().css("color", "red").css("font-size", "12px");
                                    isValidPhone = false;  
                                         
                            }else{
                                $("#spnPhone").html("validated").hide();
                            }
                            
                            // Mobile Phone Validation
                            phoneValue = "'"+document.getElementById('contactMobilePhone').value+"'";
                            onlyNumPhone = phoneValue?phoneValue.replace(/[^0-9]/g, ""):"";
                            if(onlyNumPhone.length>0 && onlyNumPhone.length!=10){
                               $("#spnMobilePhone").html("Invalid entry").show().css("color", "red").css("font-size", "12px");
                                isValidPhone = false;
                            }else{
                                $("#spnMobilePhone").html("validated").hide();
                            }
                                           
                               // Release 2.2 /CID - 000057/Swetha P/Dec/9/2016/Phone validation
                               
                        e.preventDefault();
                        e.stopPropagation();
                        
                        var id = $("#provider-contact-modal").attr("data-record-id");
                        //var accountId = $("#provider-contact-modal").attr("data-account-id");
                        var firstName = $("#provider-contact-modal input.firstName").val();
                        var lastName = $("#provider-contact-modal input.lastName").val();
                        var title = $("#provider-contact-modal input.title").val();
                        var email = $("#provider-contact-modal input.email").val();
                        var phone = $("#provider-contact-modal input.phone").val();
                        var mobile = $("#provider-contact-modal input.mobile").val();
                        var street = $("#provider-contact-modal input.street").val();
                        var city = $("#provider-contact-modal input.city").val();
                        var state = $("#provider-contact-modal select.state").val();
                        var zip = $("#provider-contact-modal input.zip").val();
                        var notes = $("#provider-contact-modal textarea.notes").val();          
            
                        var hasMissingField = false;
                        if ( firstName.length === 0 ) { hasMissingField = true; }
                        if ( lastName.length === 0 ) { hasMissingField = true; }
                        //if ( email.length === 0 ) { hasMissingField = true; }
                        //if ( phone.length === 0 ) { hasMissingField = true; }
                       
                        var inValidEmail = false;
                        
                        if(!validateEmail(email)){
                            inValidEmail = true;
                        }
                           // Release 2.2 /CID - 000057/Swetha P/Dec/9/2016/Phone validation
                           
                        if ( hasMissingField ) {
                          // at least one required field is missing
            
                          $("#provider-contact-modal span.save-error").text("Missing required fields");
            
                        } else if ( !isValidPhone ) {
                                return false;
                        } else if(inValidEmail){
                        
                            $("#provider-contact-modal span.save-error").text("Please provide a valid email");
                        }else {
                          // validation passed
                          
                         // Release 2.2 /CID - 000057/Swetha P/Dec/9/2016/Phone validation
                         
                           
                          var contact = {
                            id: id,
                            accountId: accountId,
                            firstName: firstName,
                            lastName: lastName,
                            email: email,
                            title: title,
                            phone: phone,
                            mobile: mobile,
                            city: city,
                            state: state,
                            street: street,
                            zip: zip,
                            notes: notes
                          };
            
                          var btnTxt = $("#provider-contact-modal button.btn-save").text();
                          $("#provider-contact-modal button.btn-save").text("Saving...");
                          $("#provider-contact-modal span.save-error").text("");
                          $("#provider-contact-modal button").attr("disabled",true);
                          Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.saveContact}", 
                            contact, function(result, event) {
            
            
                                $("#provider-contact-modal button.btn-save").text(btnTxt);
                                $("#provider-contact-modal button").removeAttr("disabled");
            
                                $("#provider-contact-modal input").val("");
                                $("#provider-contact-modal textarea").val("");
                                $("#provider-contact-modal select").val("");
                                $("#provider-contact-modal save-error").text("");
                                $("#provider-contact-modal button.btn-delete").hide();
            
                                $("#provider-contact-modal").attr("data-record-id", "");
                                $("#provider-contact-modal").attr("data-account-id", "");
            
                                displayProviderRelatedContacts(accountId);
            
                                $("#provider-contact-modal").modal("hide");
                                
            
                          });
            
                        }
            
                      }); 
                      $("#account-detail-modal button.btn-save").on("click", function() {
                            console.log('enter save');
                              var detail = {
                              id: accountId,
                              credentialcompany: $("#account-detail-modal input.credentialcompany").val(),
                              SignInLocation: $("#account-detail-modal input.SignInLocation").val(),
                              RepresentativeParking: $("#account-detail-modal input.RepresentativeParking").val(),
                              OperatingRoomLocation: $("#account-detail-modal input.OperatingRoomLocation").val(),
                              SterileProcessingLocation: $("#account-detail-modal input.SterileProcessingLocation").val(),
                              RequiredtoChangeScrubs: $("#account-detail-modal select.RequiredtoChangeScrubs").val(),
                              SignInLocation: $("#account-detail-modal input.SignInLocation").val(),
                              OtherAttireNotes: $("#account-detail-modal input.OtherAttireNotes").val(),
                              AccountFiscalYear: $("#account-detail-modal input.AccountFiscalYear").val(),
                              SterileProcessingHourStartTime: $("#account-detail-modal select.SterileProcessingHourStartTime").val(),
                              SterileProcessingHourEndTime: $("#account-detail-modal select.SterileProcessingHourEndTime").val(),
                              SterileProcessingHourTime: ($("#account-detail-modal select.SterileProcessingHourStartTime").val()!=" " ||  $("#account-detail-modal select.SterileProcessingHourEndTime").val()!=" ") ? globalDecodeEntities($("#account-detail-modal select.SterileProcessingHourStartTime").val()+ ' - ' +  $("#account-detail-modal select.SterileProcessingHourEndTime").val()) : " ",
                              //AccountFiscalYearStartDay: $("#account-detail-modal select.AccountFiscalYearStartDay").val(),
                              //AccountFiscalYearStartMonth: $("#account-detail-modal select.AccountFiscalYearStartMonth").val(),
                              AccountFiscalYearEndDay: $("#account-detail-modal select.AccountFiscalYearEndDay").val(),
                              AccountFiscalYearEndMonth: $("#account-detail-modal select.AccountFiscalYearEndMonth").val(),              
                              AccountFiscalYear: ($("#account-detail-modal select.AccountFiscalYearEndDay").val()!=" " || $("#account-detail-modal select.AccountFiscalYearEndMonth").val()!=" ") ? globalDecodeEntities( $("#account-detail-modal select.AccountFiscalYearEndMonth").val() + ' ' + $("#account-detail-modal select.AccountFiscalYearEndDay").val()) : " ", 
                              website: $("#account-detail-modal input.website").val(),
                              businessHourStartTime: $("#account-detail-modal select.businessHourStartTime").val(),
                              businessHourEndTime: $("#account-detail-modal select.businessHourEndTime").val(),
                              businessTime: ($("#account-detail-modal select.businessHourStartTime").val()!=" " ||  $("#account-detail-modal select.businessHourEndTime").val()!=" ") ? globalDecodeEntities($("#account-detail-modal select.businessHourStartTime").val()+ ' - ' +  $("#account-detail-modal select.businessHourEndTime").val()) : " ",
                              nickname : $("#account-detail-modal input.nickname").val() || null 
                            };
                            console.log('strt time'+ $("#account-detail-modal select.SterileProcessingHourStartTime").val()+'detail var=='+detail.SterileProcessingHourStartTime);
                            var error = "";
                            
                           var currYear=new Date().getFullYear();
                           //var strtMonthSelected=getMonthFromString(detail.AccountFiscalYearStartMonth);
                           var endMonthSelected=getMonthFromString(detail.AccountFiscalYearEndMonth);
                           // console.log('currYear=='+currYear+'EndMonth='+endMonthSelected+'Day=='+detail.AccountFiscalYearEndDay);
                            if ((isValidDate(currYear,endMonthSelected,detail.AccountFiscalYearEndDay)==false))
                            {
                               error = "Invalid date.Please enter a valid Fiscal End Date";
                            }
                            if ((detail.SterileProcessingHourStartTime!=" "|| detail.SterileProcessingHourEndTime!=" ")&& (detail.SterileProcessingHourStartTime==" "|| detail.SterileProcessingHourEndTime==" "))
                            {
                               error = "Please enter both Start and End for Sterile Processing Hours";
                            }
                            if ((detail.businessHourStartTime!=" "|| detail.businessHourEndTime!=" ")&& (detail.businessHourStartTime==" "|| detail.businessHourEndTime==" "))
                            {
                               error = "Please enter both Start and End for Business Hours";
                            }
                            
                            
                            if ( error.length === 0 ) {
                              // no validation errors
                
                              var btnTxt = $("#account-detail-modal button.btn-save").text();
                              console.log('btnTxt =='+btnTxt );
                              $("#account-detail-modal button.btn-save").text("Saving...");
                              console.log('btnTxt =='+ $("#account-detail-modal button.btn-save").text() );
                              $("#account-detail-modal button").attr("disabled",true);
                              //$("#credentialcompany button").attr("disabled",true);
                              Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.updateProvider}",
                              detail, function(result, event) { 
                
                                  
                                  
                                  if ( event.status ) {
                                    // save successful, change the displayed nickname to the newly saved value
                                    // for both the detail screen and in the account list
                                   
                                    displayProviderDetail(accountId);
                                    
                                    $("#account-detail-modal").modal("hide");
                
                                  } else {
                                    // errors saving the update
                
                                    $("#account-detail-modal.error").text(result);
                
                                  }
                                  $("#account-detail-modal button.btn-save").text(btnTxt);
                                  $("#account-detail-modal button").removeAttr("disabled");
                
                              });
                
                            } else {
                            
                              $("#account-detail-modal #editAccDetailErrors").html(error);
                                            
                            }
                            
                            
                
                          });//code added by Ansu for saving account detail edit ends
                          
                          //code added by Mimansha for save warning modal
                          $("#cancel-account-detail-modal button.btn-close-edit-account-warning").on("click", function(e) {                     
                              $("#cancel-account-detail-modal").modal('hide');
                              $("#account-detail-modal").modal('hide');
                          }); //  end of Cancel Provider Contact modal.cancel click
                    
                          $("#account-detail-modal button.edit-account-close-btn").on("click", function() {
               
                              $("#cancel-account-detail-modal").modal("show");                   
                          }); //  end of Provider Contact modal.cancel click
                      
                      //Code added by Ansu ends 
                      $("#tab-account-inventory button.btn-pdf-pref-card").on("click", function(e) {
                            console.log('pdf====='+accountId);
                            $("#generate-pdf-modal button.generatePdf-save-btn").attr("data-record-id", accountId);           
                            $("#generate-pdf-modal #card-name").text(globalDecodeEntities($('.sap-name').text()));
                            $('#generate-pdf-modal input[type="checkbox"]').prop('checked', true);
                            $("#generate-pdf-modal").modal("show");
                    
                       });
                      
                      //edit pref card button clicked 
                      $("#tab-account-inventory button.btn-edit-pref-card").on("click", function(e) {
                          console.log('Inside Edit modal------');
                          var prefCardId = $(this).attr("data-record-id");
                          console.log('Inside Edit modal------Account ID-----'+ accountId);
                         
                          if(!accountId){
                            //alert('prefCardId: '+prefCardId);
                            return false;
                          }
                          $("#new-prefcard-modal .opportunity-part-quantity").attr("disabled",false);
                          $("#new-prefcard-modal .opportunity-part-unit-price").attr("disabled",false);
                          $("#new-prefcard-modal .opportunity-part-total-price").attr("disabled",false);
                          $("#new-prefcard-modal .opportunity-part-serial-number").attr("disabled",false);
                          $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("disabled",false);
                          $("#new-prefcard-modal .opportunity-part-description-typeahead").attr("disabled",false);
                          $("#new-prefcard-modal .opportunity-part-quantity").val("");
                          $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                          $("#new-prefcard-modal .opportunity-part-total-price").val("");
                          $("#new-prefcard-modal .opportunity-part-serial-number").val("");
                          $("#new-prefcard-modal .opportunity-part-number-typeahead").val("");
                          $("#new-prefcard-modal .opportunity-part-description-typeahead").val("");
                          $("#new-prefcard-modal .btn-save-prefcard").removeAttr('disabled');
                          $("#new-prefcard-modal div.disposables.rte").summernote('enable');
                          $("#new-prefcard-modal div.sutures.rte").summernote('enable');
                          $("#new-prefcard-modal div.medications.rte").summernote('enable');
                          $("#new-prefcard-modal div.equipment.rte").summernote('enable');
                          $("#new-prefcard-modal div.equipment-notes.rte").summernote('enable');
                     
                          $("i.edit-pref-card-busy").show();
                          Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveAccountInventory}",
                                accountId, function(prefCardProducts, event) {
        
                                  $("i.edit-pref-card-busy").hide();
                                  //console.log('Inside Edit modal------'+prefCardProducts[0].Product__r.Name+'Disposables__c~~~~~~~'+prefCardProducts[0].Disposables__c);
                                  
                                  $("#new-prefcard-modal").attr("data-record-id", accountId);
                                  $("#new-prefcard-modal input.prefCardName").val(globalDecodeEntities($("#provider-detail div.sap-name").text()));
        
                                  
                                     $("#new-prefcard-modal .product-parts tbody").empty();
                                     $.each(prefCardProducts, function(i,v){
                                          var row_id = v.Product__r.Id;
                                          $("#new-prefcard-modal .product-parts tbody").append('<tr data-part-id="'+v.Product__r.Id+'" product-group-type="'+ v.Product__r.Material_Group_Type__c +'"><td><p class="form-control-static">'+v.Product__r.Material_Number__c+'</p></td><td><p class="form-control-static">'+v.Product__r.Name+'</p></td><td class="quantity-marker"><p class="form-control-static part-quantity">'+(typeof v.Quantity__c==="undefined"?" ":v.Quantity__c)+'</p></td><td class="unitprice-marker"><p class="form-control-static part-unitprice">'+(typeof v.Low_Par__c==="undefined"?" ":v.Low_Par__c)+'</p></td><td class="totalprice-marker" id="total" ><p class="form-control-static part-totalprice">'+(typeof v.High_Par__c==="undefined"?" ":v.High_Par__c)+'</p></td><td class="serialnumber-marker"><p class="form-control-static part-serialnumber">'+(typeof v.Serial_Number__c==="undefined"?" ":v.Serial_Number__c)+'</p></td><td class="pull-right" style="padding-left:15px"><button type="button"  class="btn btn-xs btn-primary pt-edit-btn" onclick="editPart(\''+row_id+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger pt-del-btn" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                                          
                                      }); //  end of for-each product
                                 
                                      $("#new-prefcard-modal").on("shown.bs.modal", function() {
                                          
                                          
                                          var disposables = $('<div/>').html(disposableNte || "").text();
                                          var sutures = $('<div/>').html(sutureNte || "").text();
                                          var medications =$('<div/>').html(biologicsNte || "").text();
                                          var equipment =$('<div/>').html(equipmentNte || "").text();
                                          var equipmentNotes =$('<div/>').html(addInfoNte || "").text();
                                          
                                              $("#new-prefcard-modal div.disposables.rte").summernote('code',disposables );
                                              $("#new-prefcard-modal div.sutures.rte").summernote('code',sutures);
                                              $("#new-prefcard-modal div.medications.rte").summernote('code',medications);
                                              $("#new-prefcard-modal div.equipment.rte").summernote('code',equipment);
                                              $("#new-prefcard-modal div.equipment-notes.rte").summernote('code',equipmentNotes);
                                              
            
                                     });
                                 
                                 
        
                                 $("#new-prefcard-modal button.btn-delete-prefcard").show();
        
                                 $("#new-prefcard-modal span.save-error").text("");
                                 console.log('Inside Edit modal------before show');
                                 $("#new-prefcard-modal").modal("show");
                          
        
                            });  
                          
                    
                        });
                        
                          // added by chad for 4.1 - Task Support

                          // saving a task
                          $("#task-modal button.save").on("click", function(e) {
                              e.stopPropagation();
                              e.preventDefault();

                              var taskId = $("#task-modal").attr("data-record-id");

                              // always use hte free-form text box - chad 2017-06-22
                              // var subjectStr = $("#task-modal select.subject").val();
                              var subjectStr = 'other';

                              if ( subjectStr == 'other' ) { 
                                  subjectStr = $("#task-modal input.other-subject").val();
                              }

                              var task = {
                                  id: taskId,
                                  priority: $("#task-modal button.priority.btn-primary").attr("data-value"),
                                  status: $("#task-modal button.status.btn-primary").attr("data-value"),
                                  dueDate: $("#task-modal input.dueDate").val(),
                                  subject: subjectStr,
                                  description: $("#task-modal textarea.description").val(),
                                  ownerId: $("#task-modal select.task-owner").val()                            
                              };

                              var whatIds = [];
                              var whatId = $("#task-modal input.associated-object").attr("data-record-id");
                              if ( typeof whatId != "undefined" && whatId.length > 0 ) {
                                  whatIds.push(whatId);
                              }

                              var whoIds = [];
                              $("#task-modal div.ctag-list.surgeon").children().each(function() {
                                  if ( $(this).attr("data-record-id") ) {
                                      whoIds.push($(this).attr("data-record-id"));
                                  }
                                  
                              });

                              $(this).attr("disabled", true);
                              $("#task-modal .save-busy").show();
                              Visualforce.remoting.Manager.invokeAction("CS_ARAccountsCC.saveSFTask",whatIds, whoIds, task,
                              function(result, event) {
                                  $("#task-modal .save-busy").hide();
                                  if ( event.status ) {
                                      
                                      $("div.detail_div[data-record-id="+taskId+"]").find("span.notes").text(result.subject);                                                               

                                      $("#task-modal").modal("hide");
                                      $("span.task-modal-error").text("");

                                      
                                  } else {

                                      $("#task-modal span.task-modal-error").text(event.message);

                                  }
                                  $("#task-modal button.save").removeAttr("disabled");
                                  
                              });                   
                              
                          });

                          // deleting a task just set's its status to completed
                          $("#task-modal button.delete").on("click", function(e) {
                              e.stopPropagation();
                              e.preventDefault();
                              $(this).attr("disabled", true);

                              var taskId = $("#task-modal").attr("data-record-id");

                              $("#task-modal .delete-busy").show();
                              Visualforce.remoting.Manager.invokeAction("CS_ARAccountsCC.updateTaskStatus", taskId, "Cancelled",
                              function(result, event) {
                                  $("#task-modal .delete-busy").hide();
                                  if ( event.status ) {

                                      $("div.detail_div[data-record-id="+taskId+"]").remove();
                                      
                                      $("#task-modal").modal("hide");
                                      $("span.task-modal-error").text("");

                                      
                                  } else {

                                      $("#task-modal span.task-modal-error").text(event.message);

                                  }

                                  $("#task-modal button.delete").removeAttr("disabled");
                                  
                              });
                          });

                          // end added by chad for 4.1 - Task Support                        
                       
                       $("div.rte").summernote({
                            height: 150,
                            minHeight: null,
                            maxHeight: null,
                            //shortcuts: false,
                           //focus: true
                           /*toolbar: [
                               ['style', ['bold', 'italic', 'underline']],
                                  ['font', ['strikethrough', 'superscript', 'subscript']],
                                      ['para', ['ul', 'ol']],
                           ]*/
                           //g summernote
                        });
                        
                        
                        $("#new-prefcard-modal button.btn-save-prefcard").on("click", function(e) {
                             // saves a new preference card
            
                             e.preventDefault();
                             e.stopPropagation();                       
                             
                          
                             
                              var products = [];
                              $("#new-prefcard-modal .product-parts tbody tr").each(function(){
                                    products.push({'Account__c' :accountId,
                                                    'Product__c': $(this).attr("data-part-id"),
                                                    'Quantity__c' : $(this).find("p.part-quantity").text() || null,
                                                    'Low_Par__c' : $(this).find("p.part-unitprice").text() || null,
                                                    'High_Par__c' : $(this).find("p.part-totalprice").text() || null,
                                                    'Serial_Number__c' : $(this).find("p.part-serialnumber").text()});
                              });
                              
                              //console.log('products!!!!!!!!!!!'+products[0].Product__c);
                              var disposablesData = $("#new-prefcard-modal div.disposables.rte").summernote('code');
                              var suturesData = $("#new-prefcard-modal div.sutures.rte").summernote('code');
                              var medicationsData = $("#new-prefcard-modal div.medications.rte").summernote('code');
                              var equipmentData = $("#new-prefcard-modal div.equipment.rte").summernote('code');
                              var equipmentNotesData = $("#new-prefcard-modal div.equipment-notes.rte").summernote('code');            
                
                              // Save the preference card
                
                              var btnTxt = $("#new-prefcard-modal button.btn-save-prefcard").text();
                              $("#new-prefcard-modal button.btn-save-prefcard").text("Saving...");
                              $("#new-prefcard-modal button").attr("disabled",true);
                              
                              
                              var accountId =GetURLParameter('id');
                              console.log('accountId save!!!!!!'+accountId);
                              Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.csaveAccountInventory}",
                                      accountId,                                 
                                      disposablesData, 
                                      equipmentData, 
                                      equipmentNotesData,
                                      medicationsData, 
                                      suturesData,
                                      products, 
                                       function(result, event) {
                                        
                                        console.log('##--practitioner proc save result: '+ JSON.stringify(result)+ 'disposablesData~~~~'+disposablesData);
                                        if(event.status) {
                                            $("#new-prefcard-modal button.btn-save-prefcard").text(btnTxt);
                                            $("#new-prefcard-modal button").removeAttr("disabled");
                                            $("#new-prefcard-modal div.disposables.rte").summernote('reset');
                                            $("#new-prefcard-modal div.sutures.rte").summernote('reset');
                                            $("#new-prefcard-modal div.medications.rte").summernote('reset');
                                            $("#new-prefcard-modal div.equipment.rte").summernote('reset');
                                            $("#new-prefcard-modal div.equipment-notes.rte").summernote('reset');
                                            
                                            // hide the delete button in case this was an edit
                                            $("#new-prefcard-modal button.btn-delete-prefcard").hide();
                                            
                                            //enable the edit button
                                            $("#surgeon-detail button.btn-edit-pref-card").removeAttr("disabled");
                                            $("#surgeon-detail button.btn-pdf-pref-card").removeAttr("disabled");
                                            console.log('disposablesData======'+$("#new-prefcard-modal div.disposables.rte").summernote().text());
                                            disposableNte =  $("#new-prefcard-modal div.disposables.rte").summernote();
                                            equipmentNte = equipmentData;
                                            biologicsNte = medicationsData;
                                            addInfoNte = equipmentNotesData;
                                            sutureNte = suturesData;
                                            displayProviderInventory(accountId);
                                            $("#new-prefcard-modal").modal("hide");
                                        }
                                         else if (event.type === 'exception')
                                            {
                                                if((event.message).includes('STRING_TOO_LONG, Disposables')){
                                                    console.log('The exception message is----'+event.message);
                                                    console.log('The exception message ends----');
                                                    $("#new-prefcard-modal span.save-error").text("Disposables exceeds the maximum character limit.");
                                                }
                                                else if((event.message).includes('STRING_TOO_LONG, Sutures'))
                                                {
                                                    console.log('The exception message is----'+event.message);
                                                    console.log('The exception message ends----');
                                                    $("#new-prefcard-modal span.save-error").text("Sutures exceeds the maximum character limit.");
                                                }
                                                else if((event.message).includes('STRING_TOO_LONG, Biologics'))
                                                {
                                                    console.log('The exception message is----'+event.message);
                                                    console.log('The exception message ends----');
                                                    $("#new-prefcard-modal span.save-error").text("Biologics exceeds the maximum character limit.");
                                                }
                                                else if((event.message).includes('STRING_TOO_LONG, Equipment: data value too large'))
                                                {
                                                    console.log('The exception message is----'+event.message);
                                                    console.log('The exception message ends----');
                                                    $("#new-prefcard-modal span.save-error").text("Equipment exceeds the maximum character limit.");
                                                }
                                                else if((event.message).includes('STRING_TOO_LONG, Equipment Notes'))
                                                {
                                                    console.log('The exception message is----'+event.message);
                                                    console.log('The exception message ends----');
                                                    $("#new-prefcard-modal span.save-error").text("Additional Information exceeds the maximum character limit.");
                                                }
                                                                                    
                                                $("#new-prefcard-modal button.btn-save-prefcard").text(btnTxt);
                                                $("#new-prefcard-modal button").removeAttr("disabled");
                                            }
                
                                     });                     
            
                            });
                        
                       //Code added by Mimansha(4/17/2017) for Component CID 000177(Save Warning Modal) in Account Inventory and Notes   
                       $("#cancel-new-prefcard-modal button.btn-cancel-account-inventory-warning").on("click", function(e) {                     
                           $("#cancel-new-prefcard-modal").modal('hide');
                           $("#new-prefcard-modal").modal('hide');
                       }); //  end of cancel new pref card modal.cancel click
                
                       $("#new-prefcard-modal button.account-inventory-cancel-btn").on("click", function() {
               
                           $("#cancel-new-prefcard-modal").modal("show");                                              
                       }); //  end of new pref card modal.cancel click
                       
                       $("#new-prefcard-modal").on('hidden.bs.modal', function (e) { 
                            $("div.note-popover").css('display', 'none');  
                       });
                       
                       $("#cancel-account-notes-modal button.btn-cancel-account-notes-warning").on("click", function(e) {                     
                           $("#cancel-account-notes-modal").modal('hide');
                           $("#account-notes-modal").modal('hide');
                       }); //  end of cancel account notes modal.cancel click
                
                       $("#account-notes-modal button.account-notes-cancel-btn").on("click", function() {
               
                           $("#cancel-account-notes-modal").modal("show");                   
                       }); //  end of Account Notes modal.cancel click
                       
                       // ----------------------------Mimansha Code Ends  -------------------------
                         
                      $("#delete-Note-modal button.btn-delete-Note").on("click", function(e) {
                           var btntxt=$("#account-notes-modal button.btn-delete").text();
                            $("#account-notes-modal button.btn-delete").text('Deleting...');
                            $("#account-notes-modal button").attr("disabled",true);
                            $("#delete-Note-modal button").attr("disabled",true);
                           Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.deleteNote}",
                                   noteId,
                                   function(result, event) {
                                       if(event.statusCode == 200){
                                          console.log('deleted~~~~');
                                          var filterVal=$("#activityFilter").val();
                                          loadAccountActivities(filterVal);
                                          NoteId="";
                                       }
                                       $("#account-notes-modal button.btn-delete").text(btntxt);
                                       $("#delete-Note-modal button").removeAttr("disabled");
                                       $("#account-notes-modal button").removeAttr("disabled");
                               }); //  end of remote call to delete note 
                           $("#delete-Note-modal").modal("hide");    
                           $("#account-notes-modal").modal("hide");
                      });
                       $("#delete-contact-modal button.btn-delete-contact").on("click", function(e) {
                           var contactId = $("#provider-contact-modal").attr("data-record-id");
                          
                              
                            var btnTxt = $("#provider-contact-modal button.btn-delete").text();
                            $("#provider-contact-modal button.btn-delete").text("Deleting...");
                            $("#provider-contact-modal button").attr("disabled",true);
                            $("#delete-contact-modal button").attr("disabled",true);
                            Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.deleteProviderContact}", 
                              contactId, function(result, event) {
                
                
                                  $("#provider-contact-modal button.btn-delete").text(btnTxt);
                                  $("#provider-contact-modal button").removeAttr("disabled");
                                  $("#delete-contact-modal button").removeAttr("disabled");
                                  $("#provider-contact-modal input").val("");
                                  $("#provider-contact-modal textarea").val("");
                                  $("#provider-contact-modal select").val("");
                                  $("#provider-contact-modal save-error").text("");
                
                                  $("#provider-contact-modal").attr("data-record-id", "");
                                  $("#provider-contact-modal").attr("data-account-id", "");
                
                                  displayProviderRelatedContacts(accountId);
                
                                  $("#provider-contact-modal").modal("hide");
                                  $("#delete-contact-modal").modal("hide");                  
                
                            });
                      });
                       $("#delete-surgeon-modal button.btn-delete-surgeon").on("click", function(e) {
                       
                            var affiliationId = $("#add-surgeon-affiliation-modal").attr("data-record-id");
                            var accountId = $("#add-surgeon-affiliation-modal").attr("data-account-id");
                            
                            console.log('Affiliation ID to be deleted----'+affiliationId+'accountId =='+accountId );
                            
                            var btnTxt = $("#add-surgeon-affiliation-modal button.btn-delete").text();
                            $("#add-surgeon-affiliation-modal #affiliationErrors").text("");
                            $("#add-surgeon-affiliation-modal button.btn-delete").text("Deleting...");
                            $("#add-surgeon-affiliation-modal button").attr("disabled",true);
                            $("#delete-surgeon-modal button").attr("disabled",true);
                            Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.deleteSurgeonAffiliation}", 
                              affiliationId, function(result, event) {
                
                              if(event.statusCode == 200){   
                                  $("#add-surgeon-affiliation-modal button.btn-delete").text(btnTxt);
                                  $("#add-surgeon-affiliation-modal button").removeAttr("disabled");
                                  $("#delete-surgeon-modal button").removeAttr("disabled");
                                  $("#add-surgeon-affiliation-modal input").val("");                  
                                  $("#add-surgeon-affiliation-modal save-error").text("");
                
                                  $("#add-surgeon-affiliation-modal").attr("data-record-id", "");
                                  $("#add-surgeon-affiliation-modal").attr("data-surgeon-id", "");
                
                                  displayProviderRelatedSurgeons(accountId);
                
                                  $("#add-surgeon-affiliation-modal").modal("hide");
                                  $("#delete-surgeon-modal").modal("hide");
                              }
                              else{
                                  $("#add-surgeon-affiliation-modal #affiliationErrors").html('Unexpected error. Please try again.');
                                  $("#add-surgeon-affiliation-modal button.btn-delete").text(btnTxt);
                                  $("#add-surgeon-affiliation-modal button").removeAttr("disabled");
                              }                  
                
                            });    
                      });
                       
                       $(".ctag-list").on("click","[data-role=remove-tag]", function() {
                          // removes tags from the tag-list
                          $(this).parent().remove();              
                          
                      }); 
                      
                       $(".opportunity-part-unit-price").on('keypress', function (event) {
                            var regex = new RegExp("^[0-9\b]+$");
                            var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
                            if (!regex.test(key)) {
                               event.preventDefault();
                               return false;
                            }
                            console.log('add disable?'+$("#new-prefcard-modal button.add-opp-part").is(':disabled'));
                            if($("#new-prefcard-modal button.add-opp-part").is(':disabled') && $("#new-prefcard-modal .opportunity-part-number-typeahead").attr('data-part-id')!=undefined )
                            {
                               $("#new-prefcard-modal button.add-opp-part").attr('disabled', false);
                               $("#new-prefcard-modal .opportunity-part-number-typeahead").val(part);
                                $("#new-prefcard-modal .opportunity-part-description-typeahead").val(desc); 
                            }
                        });
                      
                       $(".opportunity-part-total-price").on('keypress', function (event) {
                            var regex = new RegExp("^[0-9\b]+$");
                            var regex2 = new RegExp("^[0]");
                            var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
                            console.log('key ===='+key+'~~~'+regex.test(key))
                            if (!regex.test(key) || (regex2.test(key) && $(".opportunity-part-total-price").val()=="" )  ) {
                               event.preventDefault();
                               
                               return false;
                            }
                            if($("#new-prefcard-modal button.add-opp-part").is(':disabled') && $("#new-prefcard-modal .opportunity-part-number-typeahead").attr('data-part-id')!=undefined  )
                            {
                               $("#new-prefcard-modal button.add-opp-part").attr('disabled', false);
                               $("#new-prefcard-modal .opportunity-part-number-typeahead").val(part);
                                $("#new-prefcard-modal .opportunity-part-description-typeahead").val(desc); 
                            }
                        });
                       
                       $(".opportunity-part-quantity").on('keypress', function (event) {
                            var regex = new RegExp("^[0-9]+$");
                            var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
                            if (!regex.test(key)) {
                               event.preventDefault();
                               return false;
                            }
                        });
                        
                      $('#generate-pdf-modal').on('hidden.bs.modal', function (e) {
                        $('#generate-pdf-modal p.card-name').text('');
                        $('#generate-pdf-modal #generatePdfErrors').html('');
                        $('#generate-pdf-modal input[type="checkbox"]').attr('checked', true);
                        
                         }); 
                        
                     // Generate pdf button clicked
                       $("#generate-pdf-modal button.generatePdf-save-btn").on("click", function(e) {            
                            
                            var prefCardId = $(this).attr("data-record-id");
                            $("#generate-pdf-modal #generatePdfErrors").html('');
                            $("#generate-pdf-modal button").attr("disabled","true");
                            $("#generate-pdf-modal .primary-role").attr("disabled","true");
                            
                            var implants = false;
                            var instrument = false;
                            var notes = false;
                            var pricing = false;
                            
                            if(!($("#generate-pdf-modal #implants-chkbx").is(':checked'))
                                && !($("#generate-pdf-modal #instrument-chkbx").is(':checked'))
                                    && !($("#generate-pdf-modal #notes-chkbx").is(':checked')))
                            {
                                $("#generate-pdf-modal #generatePdfErrors").html('Please select PDF sections to continue.');
                                $("#generate-pdf-modal button").removeAttr('disabled');
                                $("#generate-pdf-modal .primary-role").removeAttr('disabled');
                            }
                            
                            else
                            {
                                if($("#generate-pdf-modal #implants-chkbx").is(':checked')){                        
                                    implants = true;                               
                                }
                            
                                if($("#generate-pdf-modal #instrument-chkbx").is(':checked')){                        
                                    instrument = true;                               
                                }
                            
                                if($("#generate-pdf-modal #notes-chkbx").is(':checked')){                        
                                    notes = true;                               
                                }
                                $("#generate-pdf-modal").modal("hide");
                                //$('body').removeClass('modal-open');
                                //$('.modal-backdrop').remove();
                                var urlPrefix=String( "");
                                console.log('urlPrefix==='+urlPrefix);
                                //window.open('/ARInventoryPDF?accid='+accountId+'&imp='+ implants + '&inst='+instrument+'&note='+ notes, '_blank', 'toolbar=0,location=0,menubar=0');
                                //window.open('apex/TestPDFFooter?id=0015B00000Ec3u7', '_blank', 'toolbar=0,location=0,menubar=0');
                                //window.location = '/TestPDFFooter?accid='+accountId+'&imp='+ implants + '&inst='+instrument+'&note='+ notes;
                                window.open({!$Label.Inventory_PDF_URL}+'/ARInventoryPDF?accid='+accountId+'&imp='+ implants + '&inst='+instrument+'&note='+ notes, '_blank', 'toolbar=0,location=0,menubar=0');
                                $("#generate-pdf-modal button").removeAttr('disabled');
                                $("#generate-pdf-modal .primary-role").removeAttr('disabled');
                                $("#generate-pdf-modal").removeClass('in');
                                
                            }
                        });
                                      
               });
               function editPart(row_id){
            
                        console.log('##--row_id for part edit: ' + row_id);
                        $.each($("#new-prefcard-modal .product-parts tbody tr"), function(i, v) {
                             console.log('##--Inside tr loop product part id ' + $(v).attr("data-part-id"));
                            if ($(v).attr("data-part-id") == row_id) {
                                 
                                 var product_type = $(v).attr("product-group-type");
                                 console.log('##--product Group Type: '+ product_type );
                                 
                                 
                                 $("td.pull-right", v).remove();
                                 $(this).append('<td class="pull-right" style="padding-left:10px"><button type="button" class="btn btn-xs btn-primary pt-save-btn" onclick="savePart(\''+row_id+'\')">Save</button>&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                                 
                                 /*
                                 var part_number = $("td.product-marker", v).text();
                                 console.log('##--product number: '+ part_number );
                                 $("#new-prefcard-modal .opportunity-part-number-typeahead").val(part_number);
                                 $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id", row_id);
                                 $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type", product_type);
                                  
                                 var description = $("td.description-marker", v).text();
                                 console.log('##--product description: '+ description );
                                 $("#new-prefcard-modal .opportunity-part-description").val(description);
                                
                                 var quantity = $("td.quantity-marker", v).text();
                                 console.log('##--product quantity: '+ quantity );
                                 $("#new-prefcard-modal .opportunity-part-quantity").val(quantity );
                                 */
                                 
                                 
                                 if (product_type == "Implants" || product_type == "Disposable" )
                                 {    
                                     var unit_price = $("td.unitprice-marker", v).text();
                                     $("td.unitprice-marker p", v).remove();
                                     $("td.unitprice-marker", v).append('<input type="text" id="edit-lowpar" class="form-control edit-pt-unitprice" onkeypress="return OnlyNum(event)" />');
                                     $("td.unitprice-marker input", v).val( unit_price);
                                     
                                     var total_price = $("td.totalprice-marker", v).text();
                                     $("td.totalprice-marker p", v).remove();
                                     $("td.totalprice-marker", v).append('<input type="text" id="edit-highpar" class="form-control edit-pt-totalprice" onkeypress="return OnlyNonZeroNum(event)"  />');
                                     $("td.totalprice-marker input", v).val(total_price);
                                     /*
                                     var unit_price = $("td.unitprice-marker", v).text().replace('$', "").replace(',', "");
                                     console.log('##--product unit price: '+ unit_price );
                                     $("#new-prefcard-modal .opportunity-part-unit-price").val("$" + unit_price );
                                     $("#new-prefcard-modal .opportunity-part-unit-price").attr("data-unit-price", unit_price);
                                 
                                     var total_price = $("td.totalprice-marker", v).text();
                                     console.log('##--product total price: '+ total_price );
                                     $("#new-prefcard-modal .opportunity-part-total-price").text( total_price );
                                     */
                                 }
                                 else{
                                     var quantity = $("td.quantity-marker", v).text();
                                     console.log('##--product quantity: '+ quantity );
                                     $("td.quantity-marker p", v).remove();
                                     $("td.quantity-marker", v).append('<input type="text" id="edit-quantity" class="form-control edit-pt-quantity" onkeypress="return OnlyNum(event)" />');
                                     $("td.quantity-marker input", v).val(quantity);
                                     
                                     var serialnumber= $("td.serialnumber-marker", v).text();
                                     console.log('##--product serialnumber: '+ serialnumber);
                                     $("td.serialnumber-marker p", v).remove();
                                     $("td.serialnumber-marker", v).append('<input type="text" id="edit-serialnumber" class="form-control edit-pt-serialnumber" />');
                                     $("td.serialnumber-marker input", v).val(serialnumber);
                                 }
                                 
                                 /*
                                 else {
                                     
                                     
                                   $("#new-prefcard-modal .opportunity-part-unit-price").attr("disabled", true);    
                                 }
                                 
                                 $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-description").attr("disabled", true);
                                 $("#new-prefcard-modal button.add-opp-part").removeAttr('disabled');
                                 */
                                 
                                 //Disable all Edit buttons for rest of the added products and modal save button 
                                 $(".product-parts .pt-edit-btn").attr("disabled", true);
                                 $(".product-parts .delete-product-part").attr("disabled", true);                         
                                 $("#new-prefcard-modal .btn-delete-prefcard").attr("disabled", true);
                                 $("#new-prefcard-modal .btn-save-prefcard").attr("disabled", true);
                                 $(".product-parts .pt-del-btn").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-unit-price").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-description").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-quantity").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-serial-number").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-total-price").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-unit-price").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-description").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-quantity").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-serial-number").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-total-price").attr("disabled", true);
                                 $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                                 $("#new-prefcard-modal .opportunity-part-description").val("");
                                 $("#new-prefcard-modal .opportunity-part-number-typeahead").val("");
                                 $("#new-prefcard-modal .opportunity-part-quantity").val("");
                                 $("#new-prefcard-modal .opportunity-part-serial-number").val("");
                                 $("#new-prefcard-modal .opportunity-part-total-price").val("");
                                 $("#new-prefcard-modal button.add-opp-part").attr('disabled', 'disabled');
                                 
                                 $("#new-prefcard-modal div.disposables.rte").summernote('disable');
                                 $("#new-prefcard-modal div.sutures.rte").summernote('disable');
                                 $("#new-prefcard-modal div.medications.rte").summernote('disable');
                                 $("#new-prefcard-modal div.equipment.rte").summernote('disable');
                                 $("#new-prefcard-modal div.equipment-notes.rte").summernote('disable');
                                                         
                                 //$(this).remove();
                                 // $(this).append('<td class="product-marker"><p class="form-control-static">'+ description +'</p></td><td></td><td></td><td></td><td></td>');
                                  
                                  
                                 
                            }   //  end of outer IF
                        }); //  end of for-each tr
                    }
                    
                    
                    function savePart(row_id){
                    
                        console.log('##--row_id for part save: ' + row_id);
                        $("#new-prefcard-modal span.save-error").text("");
                        $.each($("#new-prefcard-modal .product-parts tbody tr"), function(i, v) {
                             console.log('##--Inside tr loop product save part id ' + $(v).attr("data-part-id"));
                            if ($(v).attr("data-part-id") == row_id) {
                                 
                                 var product_type = $(v).attr("product-group-type");
                                 console.log('##--product Group Type: '+ product_type );
                                 var qty = parseInt($(".product-parts #edit-quantity").val());
                                 var lowpar = parseInt($(".product-parts #edit-lowpar").val());
                                 var highpar = parseInt($(".product-parts #edit-highpar").val());
                                 var serialnumber = globalDecodeEntities($(".product-parts #edit-serialnumber").val())|| "";
                                 
                                 if((lowpar >= highpar) && (!isNaN(highpar) && !isNaN(lowpar)))
                                 {
                                     $("#new-prefcard-modal span.save-error").text("Low Par should not exceed High Par");
                                 }
                                 else
                                 {
                                     $("td.pull-right", v).remove();
                                     $(this).append('<td class="pull-right" style="padding-left:15px"><button type="button"  class="btn btn-xs btn-primary pt-edit-btn" onclick="editPart(\''+row_id+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                                     
                                     $(".product-parts .pt-edit-btn").removeAttr('disabled');
                                     $("#new-prefcard-modal .btn-save-prefcard").removeAttr('disabled');
                                     $(".product-parts .delete-product-part").removeAttr('disabled');
                                     $(".product-parts .pt-del-btn").removeAttr('disabled');
                                     $("#new-prefcard-modal .opportunity-part-unit-price").removeAttr('disabled');
                                     $("#new-prefcard-modal .opportunity-part-description").removeAttr('disabled');
                                     $("#new-prefcard-modal .opportunity-part-number-typeahead").removeAttr('disabled');
                                     $("#new-prefcard-modal .opportunity-part-quantity").removeAttr('disabled');
                                     $("#new-prefcard-modal .opportunity-part-serial-number").removeAttr('disabled');
                                     $("#new-prefcard-modal .opportunity-part-total-price").removeAttr('disabled');
                                     
                                     $("#new-prefcard-modal div.disposables.rte").summernote('enable');
                                     $("#new-prefcard-modal div.sutures.rte").summernote('enable');
                                     $("#new-prefcard-modal div.medications.rte").summernote('enable');
                                     $("#new-prefcard-modal div.equipment.rte").summernote('enable');
                                     $("#new-prefcard-modal div.equipment-notes.rte").summernote('enable');
                                                           
                                     
                                    
                                     console.log('##--product save quantity: '+ qty);
                                     $("td.quantity-marker input", v).remove();
                                     $("td.serialnumber-marker input", v).remove();
                                     $("td.unitprice-marker input", v).remove();
                                     $("td.totalprice-marker input", v).remove();
                                     
                                     
                                     
                                     if (product_type == "Implants" || product_type == "Disposable" )
                                     {    
                                         if(!isNaN(lowpar))
                                         {
                                             $("td.unitprice-marker", v).append('<p class="form-control-static part-unitprice">'+ lowpar+'</p>');
                                         }
                                         if(!isNaN(highpar))
                                         {
                                             $("td.totalprice-marker", v).append('<p class="form-control-static part-totalprice">'+ highpar+'</p>');
                                         }
                                     }
                                     else
                                     {
                                         if(!isNaN(qty))
                                         {
                                             $("td.quantity-marker", v).append('<p class="form-control-static part-quantity">'+ qty +'</p>');
                                         }
                                         
                                             $("td.serialnumber-marker", v).append('<p class="form-control-static part-serialnumber">'+ serialnumber +'</p>');
                                         
                                     }
                                  }  
                            }
                        });
                    }
                  //Function to call for textbox that ONLY NUMERIC will accept
              function OnlyNum(evt) {
                        evt = (evt) ? evt : window.event;
                        var charCode = (evt.which) ? evt.which : evt.keyCode;
                        if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                            return false;
                        }
                        return true;
                    }
              function OnlyNonZeroNum(evt){
                    var regex = new RegExp("^[0-9\b]+$");
                            var regex2 = new RegExp("^[0]");
                            var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
                            console.log('key ===='+key+'~~~'+$(".edit-pt-totalprice").val()+'===')
                            if (!regex.test(key) || (regex2.test(key) && $(".edit-pt-totalprice").val()=="" ) ) {
                               event.preventDefault();
                               return false;
                            }
                    }
              /*var selectedText="";      
              function nonZero(evt){                   
                   if (typeof window.getSelection != "undefined") {
                    selectedText= window.getSelection().toString();
                    }
                    return true;
                    }  */
                   
              function validateEmail(email) {
                        if(email!="" && email!=null)  
                        {
                        var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                        
                        return re.test(email);
                        }
                        else return true;
                      }
              // Function for Phone number validation - do not allow to enter characters in phone number field
              function isNumberCommaDot(evt) {
                         var theEvent = evt || window.event;
                         var key = theEvent.keyCode || theEvent.which;
                    
                         if (key === 9 ) { //TAB was pressed
                         phoneFormate($('#pPersonMobilePhone').val(),theEvent );
                         init();
                            return;
                         }
                    
                         key = String.fromCharCode(key);
                         if (key.length == 0) return;
                         var regex = /^[0-9,\9\b]*\.?[0-9]*$/;
                         if (!regex.test(key)) {
                             theEvent.returnValue = false;
                             if (theEvent.preventDefault) theEvent.preventDefault();
                         }
                }
               <!--CID - 000057/Swetha P/Dec/9/2016/Validation on phone number field--> 
              function GetURLParameter(sParam){
                                var sPageURL = window.location.search.substring(1);
                                var sURLVariables = sPageURL.split('&');
                                for (var i = 0; i < sURLVariables.length; i++){
                                    var sParameterName = sURLVariables[i].split('=');
                                    if (sParameterName[0] == sParam){
                                        return sParameterName[1];
                                    }
                                }
                            } // end of GetURLParameter
              function formatAddress(streetStr, cityStr, stateStr, zipStr, countryStr) {
    
                var address = "";
                var street = streetStr || "";
                var city = cityStr || "";
                var zip = zipStr || "";
                var state = stateStr || "";
                var country = countryStr || "";
    
                if ( street.length > 0 ) {
                  address = street+"<br/>";
                }
    
                if ( city.length > 0 ) {
                  address += city+", ";
                }
                address +=  state+" "+zip;
    
                if ( address.length > 0 ) { address += " "; }
                address += country;
    
                return address;
              }              
              var shipstreet ;
              var shipcity;
              var shipzip ;
              var shipstate;
              var shipcountry ; 
              var disposableNte;
              var sutureNte;
              var biologicsNte;
              var addInfoNte;
              var equipmentNte;             
              function displayProviderDetail(accountId) {
                        $("#provider-detail").show();       
                        $("i.divdetails-busy").show();
                    
                    Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveProvider}",
                      accountId,     
                            function(result, event) {
                              $("i.detail-busy").hide();
                             
                              disposableNte=result.Disposables__c;
                              sutureNte=result.Sutures__c;
                              biologicsNte=result.Biologics__c;
                              addInfoNte=result.Equipment_Notes__c;
                              equipmentNte=result.Equipment__c;
                              console.log('disposableNte disp det==='+disposableNte);
                              $("#edit-provider-detail-modal").attr("data-record-id", result.Id);
                              
                              if(result.Preferred_Name__c != undefined && result.Preferred_Name__c != ''){
                                  $("#provider-detail div.nickname").text(globalDecodeEntities(result.Preferred_Name__c));
                              }else{
                                  $("#provider-detail div.nickname").text(globalDecodeEntities(result.Name));                           
                              }
                              $("#provider-detail a.website").text(globalDecodeEntities(result.Website) || "");
                              $("#provider-detail div.sap-name").text(globalDecodeEntities(result.Name) || "None");
                              $("#provider-detail div.number").text(result.Customer_Number__c|| "");
                              $("#provider-detail div.phone").text(result.Phone || "");
                              $("#provider-detail div.fax").text(result.Fax || "None");
                              //$("#provider-detail a.phone").append( "<button type="button" class="pull right btn btn-primary btn-xs" style="text-decoration: none; color:white;"><i class="fa fa-phone"></i></button>");
                              
                              shipstreet = globalDecodeEntities(result.ShippingStreet) || "";
                              shipcity = globalDecodeEntities(result.ShippingCity) || "";
                              shipzip = result.ShippingPostalCode || "";
                              shipstate = result.ShippingState || "";
                              shipcountry = result.ShippingCountryCode || "";
            
                              var address = formatAddress(shipstreet, shipcity, shipstate, shipzip, shipcountry);
            
                              //$("#provider-detail p.address").html(address);
                              
                              var Credentialing_Company = result.Credentialing_Company__c ? $("<div/>").html(result.Credentialing_Company__c ).text() : "";
                              var SignInLocation = result.Sign_In_Location__c? $("<div/>").html(result.Sign_In_Location__c).text() : "";
                              var RepresentativeParking= result.Representative_Parking__c? $("<div/>").html(result.Representative_Parking__c).text() : "";
                              var OperatingRoomLocation= result.Operating_Room_Location__c? $("<div/>").html(result.Operating_Room_Location__c).text() : "";
                              var SterileProcessingLocation= result.Sterile_Processing_Location__c? $("<div/>").html(result.Sterile_Processing_Location__c).text() : "";
                              var RequiredtoChangeScrubs= result.Required_to_Change_Scrubs__c? $("<div/>").html(result.Required_to_Change_Scrubs__c).text() : " ";
                              var OtherAttireNotes= result.Other_Attire_Notes__c ? $("<div/>").html(result.Other_Attire_Notes__c ).text() : "";
                              var SterileProcessingHours= (result.Sterile_Processing_Hours_Start__c || result.Sterile_Processing_Hours_End__c ) ? $("<div/>").html(globalDecodeEntities((result.Sterile_Processing_Hours_Start__c || " ")+ '-' +(result.Sterile_Processing_Hours_End__c || " "))).text() : " ";
                              var time= (result.Business_Hours_Start__c || result.Business_Hours_End__c)? $("<div/>").html(globalDecodeEntities((result.Business_Hours_Start__c || " ")+ '-' +(result.Business_Hours_End__c || " "))).text() : " ";
                              var AccountFiscalYear = (result.Account_Fiscal_Year_End_Day__c && result.Account_Fiscal_Year_End_Month__c)? $("<div/>").html(globalDecodeEntities(result.Account_Fiscal_Year_End_Month__c+ ' ' +result.Account_Fiscal_Year_End_Day__c)).text() : " ";
                              //var AccountFiscalYearEnd = result.Account_Fiscal_Year_End_Day__c? $("<div/>").html(globalDecodeEntities(result.Account_Fiscal_Year_End_Day__c+ ' ' +result.Account_Fiscal_Year_End_Month__c)).text() : " ";
                              var nickname = result.Preferred_Name__c ? $("<div/>").html(result.Preferred_Name__c ).text() : $("<div/>").html(result.Name).text();
                              var website  = result.Website ? $("<div/>").html(result.Website ).text() : "";
                              var SAPName = result.Name ? $("<div/>").html(result.Name ).text() : "";
                              var workphone = result.Phone ? $("<div/>").html(result.Phone ).text() : "";
                              var workfax = result.Fax ? $("<div/>").html(result.Fax ).text() : "";
                              //var address = result.ShippingCountry? $("<div/>").html(globalDecodeEntities((result.ShippingStreet|| " ")+ '<br>' +(result.ShippingCity|| " ")+' '+(result.ShippingState || " ")+ '<br>' +(result.ShippingCountry || " ")+ '-' +(result.ShippingPostalCode|| " "))).text() : ""; 
                              var accountnumber = result.Customer_Number__c ? $("<div/>").html(result.Customer_Number__c).text() : "";  
                              
                              $("#tab-account-details div.credentialcompany").text(Credentialing_Company.replace(/;/g, ", "));
                              $("#tab-account-details div.SignInLocation").text(SignInLocation.replace(/;/g, ", "));
                              $("#tab-account-details div.RepresentativeParking").text(RepresentativeParking.replace(/;/g, ", "));
                              $("#tab-account-details div.OperatingRoomLocation").text(OperatingRoomLocation.replace(/;/g, ", "));
                              $("#tab-account-details div.SterileProcessingLocation").text(SterileProcessingLocation.replace(/;/g, ", "));
                              $("#tab-account-details div.RequiredtoChangeScrubs").text(RequiredtoChangeScrubs.replace(/;/g, ", "));
                              $("#tab-account-details div.OtherAttireNotes").text(OtherAttireNotes.replace(/;/g, ", "));
                              $("#tab-account-details div.SterileProcessingHours").text(SterileProcessingHours.replace(/;/g, ", "));                 
                              $("#tab-account-details div.time").text(time.replace(/;/g, ", "));                 
                              $("#tab-account-details div.AccountFiscalYear").text(AccountFiscalYear.replace(/;/g, ", "));                 
                              //$("#tab-account-details div.AccountFiscalYearEnd").text(AccountFiscalYearEnd.replace(/;/g, ", "));                 
                              $("#tab-account-details div.nickname").text(nickname.replace(/;/g, ", ")); 
                              $("#tab-account-details div.SAPName").text(SAPName.replace(/;/g, ", ")); 
                              $("#tab-account-details div.workphone").text(workphone.replace(/;/g, ", ")); 
                              $("#tab-account-details div.workfax").text(workfax.replace(/;/g, ", ")); 
                              $("#tab-account-details div.address").html(address); 
                              $("#tab-account-details a.website").text(website.replace(/;/g, ", ")); 
                              $("#tab-account-details div.accountnumber").text(accountnumber.replace(/;/g, ", ")); 
                              Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveTerritoryForPractitioner}",
                              accountId, function(result, event) {
                                console.log('HCPId in territory-----------------'+accountId+'result--'+result);
                                var assignedTo = '';               
                                if( result.length > 0 )
                                {
                                    for ( var i=0; i < result.length; i++) {
                                    
                                        assignedTo += ", " + globalDecodeEntities(result[i]).replace(/,/g , "");                        
                                    }
                                }
                                
                                console.log('assignedTo =='+assignedTo );                   
                                $("#tab-account-details div.AssignedTo").text( assignedTo.substring(2) || "None" ); 
            
                             }); 
                             
                             //Code by Ansu ends
                                
                            });
                            
                            $("i.divdetails-busy").hide(); 
            
                      } // End of displayProviderDetail
                      
                      var surgeonGridOptions = {
                            //rowHeight: '100px',
                            rowSelection: 'single',
                            suppressRowClickSelection: false,
                            enableColResize : true,
                            enableFilter: true,
                            sizeColumnsToFit: true,
                            enableSorting: true,
                            //debug: true,
                            getRowHeight: function(params) {                       
                        
                                console.log('##--height: '+params.data.rowHeight);
                                return params.data.rowHeight;
                                
                               //return 40 * ((params.data.match(/,/g) || []).length);
                            },
                            icons: { 
                                    menu: '<i class="fa fa-sort-desc" ></i>' 
                            }
                            
                            //autoSizeColumns: true
                        };
                        
                       var contactGridOptions = {
                            rowHeight: '100px',
                            rowSelection: 'single',
                            suppressRowClickSelection: false,
                            enableFilter: true,
                            enableColResize : true,
                            sizeColumnsToFit: true,
                            enableSorting: true,
                            debug: true,
                            pagination: true,
                            suppressPaginationPanel: true,
                            paginationPageSize: 10,
                            icons: { 
                                    menu: '<i class="fa fa-sort-desc" ></i>' 
                            }
                            //autoSizeColumns: true
                        };  
                        
                        function onPageSizeChanged(newPageSize) {
                            this.surgeonGridOptions.paginationPageSize = new Number(newPageSize);
                            createNewDatasource();
                        }
                        
                        // when json gets loaded, it's put here, and  the datasource reads in from here.
                        // in a real application, the page will be got from the server.
                        
                        var allOfTheData;
                            
                        function createNewDatasource(tabtype) {
                            if (!allOfTheData) {
                                // in case user selected 'onPageSizeChanged()' before the json was loaded
                                return;
                            }
                        
                            var dataSource = {
                                //rowCount: ???, - not setting the row count, infinite paging will be used
                                getRows: function (params) {
                                    // this code should contact the server for rows. however for the purposes of the demo,
                                    // the data is generated locally, a timer is used to give the experience of
                                    // an asynchronous call
                                    console.log('asking for ' + params.startRow + ' to ' + params.endRow);
                                    setTimeout( function() {
                                        // take a chunk of the array, matching the start and finish times
                                        var rowsThisPage = allOfTheData.slice(params.startRow, params.endRow);
                                        // see if we have come to the last page. if we have, set lastRow to
                                        // the very last row of the last page. if you are getting data from
                                        // a server, lastRow could be returned separately if the lastRow
                                        // is not in the current page.
                                        var lastRow = -1;
                                        if (allOfTheData.length <= params.endRow) {
                                            lastRow = allOfTheData.length;
                                        }
                                        params.successCallback(rowsThisPage, lastRow);
                                    }, 50);
                                }
                            };
                            if(tabtype=='surgeon')
                            {
                            surgeonGridOptions.api.setDatasource(dataSource);
                            }
                            else if(tabtype=='contact')
                            {
                            contactGridOptions.api.setDatasource(dataSource);
                            }
                        }
                        function setRowData(rowData,tabtype) {
                            allOfTheData = rowData;
                            createNewDatasource(tabtype);
                        }
                        
                        function onSelectionChanged(){
                            var surgnodeDetails = surgeonGridOptions.api.getSelectedNodes();
                            var surgRowDetails = surgeonGridOptions.api.getSelectedRows();
                            console.log('in slection changed==========='+surgRowDetails+'surgRowDetails==='+surgRowDetails[0]);
                            if(surgRowDetails[0]==undefined)
                            {   console.log('no row detected===========');
                                //surgnodeDetails[0].setSelected(false);
                            }
                            else if(surgRowDetails[0].editable==false){
                                console.log('non editable row detected===========');
                                surgnodeDetails[0].setSelected(false);
                            }
                        }
                        
                       var initialsurgeonloadflag=false;  
                       var initialcontactloadflag=false; 
                       var cellloadflag=false;
                      function displayProviderRelatedContacts(accountId) {
            
                        $("#provider-contact-modal").attr("data-account-id", accountId);
            
                        $("i.contact-busy").show();   
                          Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveProviderContacts}",
                          accountId,
                          function(results, event) {
            
            
                              var rows = [];
                              for ( var i=0; i < results.length; i++) {                                
                                var formattedPhone= formatPhone(results[i].Phone);
                                console.log('formattedPhone==='+formattedPhone);                               
                                rows.push({
                                  Id: results[i].Id,
                                  name: globalDecodeEntities(results[i].LastName)+", "+globalDecodeEntities(results[i].FirstName),
                                  title: globalDecodeEntities(results[i].Title) || "",
                                  email: results[i].Email || "",
                                  phone: formattedPhone || "",
                                  contact: results[i]
                                });
            
                              }
                                
                                var contactGridColDef = [
                                    {headerName: "Name", field: "name",  headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell'],cellRenderer: contactCellHeight },
                                    {headerName: "Title", field: "title", headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell'],cellRenderer: contactCellHeight},
                                    {headerName: "Email", field: "email", headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell-href'],cellRenderer: contactCellHeight}, 
                                    {headerName: "Phone", field: "phone", headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell-href'],cellRenderer: contactCellHeight}
                                   
                                ];
                              
                              //ag-grid table
                              if(initialsurgeonloadflag==true)
                               {
                                contactGridOptions.api.destroy();
                               }
                                new agGrid.Grid(document.querySelector('#contactGrid'), contactGridOptions);
                               contactGridOptions.rowHeight = 40;
                               contactGridOptions.api.setColumnDefs(contactGridColDef);
                                
                               contactGridOptions.api.setRowData(rows,'contact');
                               contactGridOptions.api.addEventListener("rowSelected", displayRelatedContactModal);
                               contactGridOptions.api.sizeColumnsToFit();
                               initialsurgeonloadflag=true;
                          
                            $("i.contact-busy").hide();
                        });
                      }// End of displayProviderRelatedContacts
                      
                      function displayProviderRelatedSurgeons(accountId) {
                        
                        //Display typeahead for surgeon affliations                
                         populateSurgeons();    
                        $("#add-surgeon-affiliation-modal").attr("data-account-id", accountId);
                        $("#provider-contact-modal").attr("data-account-id", accountId);
                        console.log('affiliation tab');
                        $("i.surgDetail-busy").show();   
                          Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveSurgeonAffiliationsByAccount}",
                          accountId,
                          function(results, event) {
            
                              //console.log('resultsSur==='+results[0]+'accountId=='+accountId+'team======='+results[0].team);
                              var rows = [];
                              var practitionerId;                              
                              
                              var htm="";
                              //for ( var i=0; i < results.length; i++) {
                               
                              // htm += "<div id='"+results[i].Id+"' data-surgeon-id='"+results[i].surgeonAffiliation.Account_p__c+"'></div>";
                                        
                               
                              //}
                              $("#surgeonsTag").html(htm);
                              var surgeonGridColDef = [
                                    {headerName: "Full Name", field: "surgeonAffiliation.Full_Name__c", colId: "name", headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell-href'],cellRenderer: cellHeight},
                                    {headerName: "Designation", field: "surgeonAffiliation.Account_p__r.Designation__pc",colId: "designation", filter: 'text', headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell'],cellRenderer: cellHeight},
                                    {headerName: "Practice Name", field: "surgeonAffiliation.Account_p__r.Practice_Name__c", colId: "type", headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell'],cellRenderer: cellHeight},
                                    {headerName: "Email", field: "surgeonAffiliation.Account_p__r.PersonEmail", colId: "email", headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell-href'],cellRenderer: cellHeight}, 
                                    {headerName: "Practice Phone", field: "surgeonAffiliation.Account_p__r.Phone", colId: "phone", headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell-href'],cellRenderer: cellHeight}, 
                                    {headerName: "Teams", field: "team", colId: "teams", headerClass: ['axis-grid-header'],cellClass: ['axis-grid-cell'],
                                        cellRenderer: function(params){
                                        //return '<span style="line-height: 25px">'+ globalDecodeEntities(params.value).replace(/,/g, "<br/>") +'</span>'; 
                                            if(params.value != undefined){
                                                return '<span style="line-height: 25px">'+ (params.value).replace(/, /g, "<br/>") +'</span>';
                                            }else{
                                                return '';
                                            }
                                        }  
                                    }
                                   
                                ];
                              
                              //ag-grid table
                              if(initialcontactloadflag==true)
                               {
                                surgeonGridOptions.api.destroy();
                                }
                                new agGrid.Grid(document.querySelector('#surgeonGrid'), surgeonGridOptions);
                                results.forEach( function(dataItem, index) { 
                                    dataItem.rowHeight = 40;
                                    console.log('##--dataItem.teams: '+dataItem.team + 'length: '+ dataItem.team.length);
                                    console.log('##--count of teams: '+ (dataItem.team.match(/,/g) || []).length);
                                    if(dataItem.team != undefined){
                                           dataItem.rowHeight = (((dataItem.team.match(/,/g) || []).length) * 25) + 40;
                                    }
                                });
                                surgeonGridOptions.api.setColumnDefs(surgeonGridColDef);
                                
                                surgeonGridOptions.api.setRowData(results,'surgeon');
                                surgeonGridOptions.api.sizeColumnsToFit();
                                initialcontactloadflag=true;
                                //surgeonGridOptions.api.addEventListener("selectionChanged", onSelectionChanged);
                                surgeonGridOptions.api.addEventListener("rowSelected", displayAddSurgeonModal);
                                
                                console.log('Size columns to fit========');
                                cellloadflag=true;
                                                     
            
                            
                            
                            $("i.surgDetail-busy").hide();
                        });
                        
                      }// End of displayProviderRelatedSurgeons
                         
                      
                      function cellHeight(params){
                      
                        console.log('params.data.editable====='+params.data.editable);
                        if(params.data.editable==true)
                        {
                            return '<span style="line-height: 25px">'+ (params.value) ? globalDecodeEntities(params.value)  : "" +'</span>';
                        }
                        else
                        {
                        
                            if(params.value!=undefined)
                            {
                                return '<span style="color:#676a6c;font-size: 13px;cursor: default" >'+ params.value +'</span>';
                            }
                            else
                            {
                                return '';
                            }
                            
                        }
                        
                      }
                      function contactCellHeight(params){
                        console.log('params.value====='+params.value);
                        return '<span style="line-height: 25px">'+ (params.value) ? globalDecodeEntities(params.value)  : "" +'</span>';
                        
                        
                      }
                      
                     function formatPhone(phNumber)
                     {
                         var phone=phNumber || "";
                         var numOnlyPhone=phone.replace(/[^0-9]/g, "");
                         var formattedPhone=phone==""?"":"("+ numOnlyPhone.slice(0, 3) + ") " + numOnlyPhone.slice(3,6)+"-"+numOnlyPhone.slice(6);
                         return formattedPhone;       
                     
                     } 
                     function displayProviderInventory (accountId){
                          $("i.inventory-busy").show();
                          console.log('inventory tab clicked!!!!!!!!!!'+accountId);
                           Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveAccountInventory}",
                              accountId, function(results, event) {
                    
                                console.log('inventory tab clicked!!!!!!!!!!'+results[0]);
                                $("#tab-account-inventory table.product-parts tbody").empty();
                                $("#tab-account-inventory table.product-parts1 tbody").empty();
                                $("#tab-account-inventory div.disposables").empty();
                                $("#tab-account-inventory div.medications").empty();
                                $("#tab-account-inventory div.equipment").empty();
                                $("#tab-account-inventory div.equipment-notes").empty();
                                $("#tab-account-inventory div.sutures").empty();
                                $.each(results, function(i,result){
                                  var variablecol1;//=result[i].Low_Par__c || " ";
                                  var variablecol2;//=result[i].High_Par__c || " ";
                                 // console.log('charat 2~~~~~~~'+(result[i].Product__r.Material_Group_Number__c).charAt(1)+'account details!'+result[0].Account__r.Disposables__c);
                                  if(result.Product__r.Material_Group_Type__c=="Implants" || result.Product__r.Material_Group_Type__c=="Disposables")
                                  {
                                      variablecol1=result.Low_Par__c || " ";
                                      variablecol2=result.High_Par__c || " ";
                                      console.log('variablecol1~~~~'+variablecol1);
                                  }
                                  else if(result.Product__r.Material_Group_Type__c=="Equipment")
                                  {
                                      variablecol1=result.Quantity__c || " ";
                                      variablecol2=result.Serial_Number__c || " ";
                                      console.log('variablecol2~~~~'+variablecol2);
                                  }
                                  console.log('Product Material Group Desc' + result.Product__r.Material_Group_Type__c);
                                    var productId = result.Product__r.Id;
                                    
                                    Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.checkIfProductActive}",
                                         productId, function(pricebookentry, event) {
                                    
                                        var activeFlag = pricebookentry[0].IsActive;
                                        var productType = result.Product__r.Material_Group_Type__c;
                                        console.log('Product Type----'+ productType );
                                        console.log('Product Active Flag----'+ activeFlag );
                                      if(activeFlag)
                                        {  
                                              var row = "<tr>";
                                              row += "<td>"                                              
                                              var productCode = result.Product__r.Material_Number__c || "N/A";
                                              row += "<p class='form-control-static'>";
                                              // row += "<a href='http://www.arthrex.com/products/'"+productCode+"target='_blank'> "+productCode+"</a>"; 
                                              row += ""+productCode+""; 
                                  
                                              row += "</p> </td>";
                                              row += "<td>";
                                              row += "<p class='form-control-static'>"+globalDecodeEntities(result.Product__r.Name)+"</p></td>";
                                              row += "<td>";
                                              row += "<p class='form-control-static invtable'>"+globalDecodeEntities(variablecol1)+"</p></td>";
                                              row += "<td>";
                                               
                                              if(result.Product__r.Material_Group_Type__c=="Implants" || result.Product__r.Material_Group_Type__c=="Disposables")
                                              {                        
                                                  row += "<p class='form-control-static invtable'>"+globalDecodeEntities(variablecol2)+"</p></td>";
                                                  row += "</tr>"
                                                  $("#tab-account-inventory table.product-parts tbody").append(row);
                                              }
                                              else if(result.Product__r.Material_Group_Type__c=="Equipment")
                                              {                        
                                                  row += "<p class='form-control-static'>"+globalDecodeEntities(variablecol2)+"</p></td>";
                                                  row += "</tr>"
                                                  $("#tab-account-inventory table.product-parts1 tbody").append(row);
                                              }
                                          }
                                      else
                                      {
                                          var parttitle= "Part Number "  + result.Product__r.Material_Number__c +  " has been discontinued.";
                                          var row = "<tr>";
                                              row += "<td>";
                                              row += "<p class='form-control-static'>"
                                              row += "<label class='expired-prod' title=' "+parttitle+"'>"; 
                                              row +="!&nbsp;" ; 
                                              row += "</label>";                                              
                                              var productCode = result.Product__r.Material_Number__c || "N/A";
                                  
                                              // row += "<a href='http://www.arthrex.com/products/'"+productCode+"target='_blank'> "+productCode+"</a>"; 
                                              row += ""+productCode+""; 
                                              row += "</p>";
                                              row += "</td>";
                                              row += "<td>";
                                              row += "<p class='form-control-static'>"+globalDecodeEntities(result.Product__r.Name)+" </p></td>";
                                              row += "<td>";
                                              row += "<p class='form-control-static invtable'>"+globalDecodeEntities(variablecol1)+" </p></td>";
                                              row += "<td>";
                                               
                                              if(result.Product__r.Material_Group_Type__c=="Implants" || result.Product__r.Material_Group_Type__c=="Disposables")
                                              {                        
                                                  row += "<p class='form-control-static invtable'>"+globalDecodeEntities(variablecol2)+" </p></td>";
                                                  row += "</tr>"
                                                  $("#tab-account-inventory table.product-parts tbody").append(row);
                                              }
                                              else if(result.Product__r.Material_Group_Type__c=="Equipment")
                                              {                        
                                                  row += "<p class='form-control-static'>"+globalDecodeEntities(variablecol2)+" </p></td>";
                                                  row += "</tr>"
                                                  $("#tab-account-inventory table.product-parts1 tbody").append(row);
                                              }
                                          }    
                                      });
                                   });
                                    Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveProvider}",
                                    accountId, function(acc, event) { 
                                         console.log('acc result==='+acc);
                                          $("#tab-account-inventory div.disposables").html( $('<div/>').html(acc.Disposables__c).text());
                                          $("#tab-account-inventory div.medications").html( $('<div/>').html(acc.Biologics__c).text());
                                          $("#tab-account-inventory div.equipment").html( $('<div/>').html(acc.Equipment__c).text());
                                          $("#tab-account-inventory div.equipment-notes").html( $('<div/>').html(acc.Equipment_Notes__c).text());
                                          $("#tab-account-inventory div.sutures").html( $('<div/>').html(acc.Sutures__c).text());
                                          disposableNte=acc.Disposables__c;
                                          sutureNte=acc.Sutures__c;
                                          biologicsNte=acc.Biologics__c;
                                          addInfoNte=acc.Equipment_Notes__c;
                                          equipmentNte=acc.Equipment__c;
                                    });
                                
                            $("i.inventory-busy").hide();
                            }); 
                       assignProductPartsTypeahead();
                       assignProductPartDescriptionTypeahead();
                       
                     }
                      
                     //var flagcount=0;                      
                     function displayAddSurgeonModal(){
                            //surgeonGridOptions.api.addEventListener("cellclicked", displayAddSurgeonModal);
                            var surgDetails = surgeonGridOptions.api.getSelectedRows();
                            var cellDetails = surgeonGridOptions.api.getFocusedCell();
                            var surgnodeDetails = surgeonGridOptions.api.getSelectedNodes();
                            //console.log('surgeon row clicked-'+surgDetails[0].editable+'surgeon name-----'+surgDetails[0].name+'length-----'+surgDetails.length+'surgDetails[0].surgeonAffiliation ======='+surgDetails[0].surgeonAffiliation.Id);
                            if(surgDetails.length==1)
                            {   
                                 
                                console.log('enters if for surgeon =======');
                                cellDetails = surgeonGridOptions.api.getFocusedCell();
                                if(cellDetails.column.colId=="name" || cellDetails.column.colId=="email" || cellDetails.column.colId=="phone")
                                {
                                    if(cellDetails.column.colId=="name" && surgDetails[0].editable==true)                                
                                    {
                                        window.location = "/ARSurgeonDetail?id=" + surgDetails[0].surgeonAffiliation.Account_p__c ;
                                    }
                                    else if(cellDetails.column.colId=="email" && surgDetails[0].surgeonAffiliation.Account_p__r.PersonEmail!=" " && surgDetails[0].editable==true)                                
                                    {
                                        console.log('email for surgeon ======='+surgDetails[0].surgeonAffiliation.Account_p__r.PersonEmail);
                                        window.location = "mailto:"+surgDetails[0].surgeonAffiliation.Account_p__r.PersonEmail;
                                        surgnodeDetails[0].setSelected(false);
                                    }
                                    else if(cellDetails.column.colId=="phone" && surgDetails[0].surgeonAffiliation.Account_p__r.Phone!="" && surgDetails[0].editable==true)                                
                                    {
                                         window.location = "tel:"+surgDetails[0].surgeonAffiliation.Account_p__r.Phone;
                                         surgnodeDetails[0].setSelected(false);
                                    }
                                    else{
                                         surgnodeDetails[0].setSelected(false);
                                    }
                                }
                                else
                                {
                                  if( surgDetails.length==1 && surgDetails[0]!=undefined && surgDetails[0].editable==true ){  
                                  
                                    console.log('surgDetails[0].surgeonAffiliation.id ======='+surgDetails[0].surgeonAffiliation.Id);
                                    $("#add-surgeon-affiliation-modal span.save-error").text("");
                                    $("#add-surgeon-affiliation-modal").attr("data-record-id", surgDetails[0].surgeonAffiliation.Id );
                                    $("#add-surgeon-affiliation-modal input.surgeon-typeahead").val(surgDetails[0].surgeonAffiliation.Account_p__r.Name);
                                    $("#add-surgeon-affiliation-modal").attr("data-surgeon-id", surgDetails[0].surgeonAffiliation.Account_p__c);
                                    $(this).attr("data-surgeon-id", surgDetails[0].surgeonAffiliation.Account_p__c);
                                    $("#add-surgeon-affiliation-modal button.btn-delete").show();
                                    $("#add-surgeon-affiliation-modal button.btn-save").hide();                    
                                    $("#add-surgeon-affiliation-modal").modal("show");
                                    $("#add-surgeon-affiliation-modal input").attr("disabled",true);
                                    surgnodeDetails[0].setSelected(false);
                                    //flagcount+=1;
                                  }
                                  
                                  
                                }
                              }
                                
                            
                     }     
                     
                     
                     function displayRelatedContactModal(){
                         console.log('contact row clicked-');
                            contactGridOptions.api.addEventListener("cellClicked", displayRelatedContactModal);
                            var conDetails = contactGridOptions.api.getSelectedRows();
                            console.log('contact row clicked-'+conDetails[0].contact.FirstName);
                            var cellDetails = contactGridOptions.api.getFocusedCell();
                            if(conDetails.length==1)
                            {
                                if(cellDetails.column.colId=="email" || cellDetails.column.colId=="phone")
                                {
                                    if(cellDetails.column.colId=="email" && conDetails[0].email!="")                                
                                    {
                                        window.location = "mailto:"+conDetails[0].email;
                                    }
                                    else if(cellDetails.column.colId=="phone" && conDetails[0].phone!="")                                
                                    {
                                         console.log('contact phone clicked-'+conDetails[0].phone);
                                         window.location = "tel:"+conDetails[0].phone;
                                    }
                                }
                                else
                                {
                                    var mobPhone=formatPhone(conDetails[0].contact.MobilePhone);
                                    $("#spnPhone").html("validated").hide();
                                    $("#spnMobilePhone").html("validated").hide();
                                      
                                    $("#provider-contact-modal").attr("data-record-id", conDetails[0].contact.Id);
                                      
                                      
                                    $("#provider-contact-modal input.firstName").val(conDetails[0].contact.FirstName);
                                    $("#provider-contact-modal input.lastName").val(conDetails[0].contact.LastName);
                                    $("#provider-contact-modal input.title").val(conDetails[0].contact.Title);
                                    $("#provider-contact-modal input.email").val(conDetails[0].contact.Email);
                                    $("#provider-contact-modal input.phone").val(conDetails[0].phone);
                                    $("#provider-contact-modal input.mobile").val(mobPhone);
                                    $("#provider-contact-modal input.street").val(conDetails[0].contact.MailingStreet);
                                    $("#provider-contact-modal input.city").val(conDetails[0].contact.MailingCity);
                                    $("#provider-contact-modal select.state").val(conDetails[0].contact.MailingState);
                                    $("#provider-contact-modal input.zip").val(conDetails[0].contact.MailingPostalCode);
                                    $("#provider-contact-modal textarea.notes").val(conDetails[0].contact.Description); 
            
            
                                    $("#provider-contact-modal button.btn-delete").show();
                                    $("#provider-contact-modal").modal("show");
                                }
                              }
                     }                  
                     
                     
                     function retrieveAccountData(){
                            $("i.caseDetail-busy").show();
                            Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveProvider}",
                                accountId,
                                function(accObj, event) {
                                    console.log('result======='+accObj);
                                    if(event.statusCode == 200){
                                        
                                        createMapForAccount(accObj);
                                        
                                    } else {
                                        console.error('Unable to retrieve account: ' + JSON.stringify(event));
                                    }
                                    $("i.caseDetail-busy").hide();
                                }); //  end of remote call to get the Case Data
                        }   //  end of retrieveCaseData
                       
                      function createMapForAccount(accObj){
                                $('#divMap').height($('#divMapSibling').height());
                                $('#divMap').width($('#divMapSibling').width());
                                            
                                var myCenter = new google.maps.LatLng(accObj.ShippingLatitude, accObj.ShippingLongitude);
                                var mapCanvas = document.getElementById("divMap");
                                var mapOptions = {center: myCenter, zoom: 10};
                                var map = new google.maps.Map(mapCanvas, mapOptions);
                                var marker = new google.maps.Marker({position:myCenter});
                                var content = accObj.Name;
                                if(globalDecodeEntities(accObj.ShippingStreet)){
                                    content +="<br/>" + globalDecodeEntities(accObj.ShippingStreet);
                                }
                                if(globalDecodeEntities(accObj.ShippingCity)){
                                    content +="<br/>" + globalDecodeEntities(accObj.ShippingCity);
                                }
                                if(globalDecodeEntities(accObj.ShippingState)){
                                    content +="<br/>" + globalDecodeEntities(accObj.ShippingState);
                                }
                                if(globalDecodeEntities(accObj.ShippingCountry)){
                                    content +="<br/>" + globalDecodeEntities(accObj.ShippingCountry);
                                }
                                if(globalDecodeEntities(accObj.ShippingPostalCode)){
                                    content +="<br/>" + globalDecodeEntities(accObj.ShippingPostalCode);
                                } 
                                marker.setMap(map);
                                
                                google.maps.event.addListener(marker,'click',function() {
                                    map.setZoom(9);
                                    map.setCenter(marker.getPosition());
                                    var infowindow = new google.maps.InfoWindow({
                                        content: content
                                    });
                                    
                                    infowindow.open(map,marker);
                                });
                                
                            }   //  end of createMapForAccount
                      
                      function switchAccountView(eleType){
                                
                                if(eleType == "ListView"){
                                    
                                    window.location = "/ARAccounts";
                                    
                                } 
                            }   //  end of switchOpportunityView
                            
                      function populateOpportunityDetailsView(accountId){
                        
                        Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retrieveOpportunitiesByAccountId}",
                        accountId,
                        function(result, event){ 
                            
                                    console.log('##--opportunities: ' + JSON.stringify(result));
                                    if(result.length>0){
                                        $("#divOpenOpportunities p.remove-when-present").hide();
                                        $("#divOpenOpportunities").empty();
                                        $.each(result, function(i, v){
                                            $("#divOpenOpportunities").append("<div id='"+v.Id+"' data-linked-opp-id='"+v.Id+"'><dl><dt>"+v.Type+"</dt><dd><a href='#' style='color:#3A9DDB;word-wrap:break-word;' onclick='oppPage(\""+v.Id+"\")'>"+v.Name+"</a></dd></dl></div>");
                                        });
                                    }
                                                         
                                    
                                }); //  end of remote call
                                 
                    }
                    
                      function oppPage(oppId){
                           window.location = "/AROpportunityDetail?id="+oppId;
                       }
                   
                    
                    //Code added by Ansu for release 3.2 adding surgeon affliations 
                       function populateSurgeons(){
                          $("#add-surgeon-affiliation-modal i.surgeon-busy").show();
                          Visualforce.remoting.Manager.invokeAction("CS_ARAccountsCC.retrievePractitioners",
                          function(result, event) {
                               console.log('sur typeahead=='+result[0].Name);
                              // setup the account type ahead options object
                              var surgeonTypeAheadOptions = {
                                  minLength: 1,
                                  items: 50,
                                  source: result,
                                  showHintOnFocus: false,
                                  displayText: function(item) {
                                      return globalDecodeEntities(item.Name);
                                  },              
                                  afterSelect: function(item) {
                                      $("#add-surgeon-affiliation-modal input.surgeon").val(globalDecodeEntities(item.Name));
                                      $("#add-surgeon-affiliation-modal input.surgeon").attr("data-record-id", item.Id);
                                      var practId = item.Id;
                    
                                                    if ( $("#add-surgeon-affiliation-modal span[data-record-id="+item.Id+"].ctag").length === 0)
                                                         {
                                                        // no duplicates and can't add yourself
                                                        $("#add-surgeon-affiliation-modal div.ctag-list.surgeon").append(obj2ctag(item));
                                                    } 
                                                    $("#add-surgeon-affiliation-modal .surgeon-typeahead").val("");  
                                  }
                                  
                              };
                              //console.log('dr====='+$("#add-surgeon-affiliation-modal div.surgeon").attr("data-record-id")+"===="+item.Id);
                              // init the provider type ahead
                              $("#add-surgeon-affiliation-modal input.surgeon-typeahead").typeahead(surgeonTypeAheadOptions);  
                             
                              $("#add-surgeon-affiliation-modal i.surgeon-busy").hide();
                          });
                      }
                      
                      function obj2ctag(obj) {
                                        var label = globalDecodeEntities(obj.Name);
                                        var id = obj.Id;
                            
                                        var ctag = '<span class="ctag alert alert-info" data-record-id="'+id+'">';
                                        ctag += label
                                        ctag += '&nbsp;<span data-role="remove-tag"></span></span>';
                                        
                                        return ctag;
                                    }
                      function isValidDate(year, month, day) {
                                var d = new Date(year, month, day);
                                if ((d.getFullYear() == year && d.getMonth() == month && d.getDate() == day)||(month == -1 && day.trim() == "") ){ 
                                    return true;
                                    }
                                return false;
                            }
                            
                      function getMonthFromString(mon){
                
                               var d = Date.parse(mon + "1, 2012");
                               if(!isNaN(d)){
                                  return new Date(d).getMonth();
                               }
                           return -1;
                         }       
                        //Code added by Ansu ends
                      function loadAccountActivities(activityType){
                       console.log('##--activityType:'+ activityType);
                       console.log('##--loadAccActivities.accId:'+ accountId);

                        // added by chad for 4.1
                        // store activities in a global object to make setting up the links much easier
                        window.acctActivities = {};

                       $("i.divNextSteps-busy").show();
                       $("i.divCompletedSteps-busy").show();
                       Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.retreiveActivities}",
                               activityType,//'All Activities',
                               accountId,
                               function(result, event) {
                                   if(event.statusCode == 200){
                                       // clear the existing activities
                                       $("#divNextSteps").empty();
                                       $("#divCompletedSteps").empty();
                                       
                                       $.each(result, function(i, v){
                                           
                                           acctActivities[v.acc.recId] = v.acc;

                                           htm = constructActivity(v);
                                           
                                           if(v.acc.activityType == 'OPPORTUNITY')
                                           {
                                               if(v.acc.stage=='Closed - Won' || v.acc.stage=='Closed - Lost' || v.acc.stage=='Cancelled')
                                               {
                                                   $("#divCompletedSteps").append(htm);
                                               }
                                               else
                                               {    
                                                   $("#divNextSteps").append(htm);
                                               }
                                           }
                                           else
                                           {
                                               if(moment(v.acc.logDate).isSameOrBefore(moment())){ //  moment().startOf('day')
                                                  //console.log('iff----'+v.acc.logDate);
                                                   $("#divCompletedSteps").append(htm);
                                               } else{
                                               console.log('else----'+v.acc.logDate);
                                                   $("#divNextSteps").append(htm);
                                               }
                                            }   
                                           
                                       }); //  end of for-each activity
                                       $("i.divNextSteps-busy").hide();
                                       $("i.divCompletedSteps-busy").hide();
                                   }
                           }); //  end of remote call to get the existing Activites
                      }   //  end of loadAccountActivities
                      function showAddNotes(){
                        $("#account-notes-modal span#addNoteErrors").html('');
                        $("#account-notes-modal #accNoteDate").html(dateFormatter(moment()));
                        $("#account-notes-modal #accNotes").val('');
                        $("#account-notes-modal").modal('show');                        
                        $("#account-notes-modal button.btn-delete" ).hide();
                    }   //  end of showAddNotes
                    
                    // added by chad for 4.1 - Task Support
                    function editTask(taskId){
                        // editing a task
                        $("h4.modal-title.create").hide();
                        $("h4.modal-title.edit").show();
                        
                        Visualforce.remoting.Manager.invokeAction("CS_ARAccountsCC.retrieveMyTaskDetail", taskId,
                        function(t, event) {
                            $(".task-busy").hide();
                            if ( event.status ) {
                                $("#task-modal .modal-title.create").hide();
                                $("#task-modal .hide-on-create").show();
                                $("#task-modal .modal-title.edit").show();
                                $("#task-modal .delete").show();

                                $("#task-modal select.task-type").attr("disabled",true);
                                
                                $("#task-modal").attr("data-record-id", taskId);
                                
                                // priority button
                                $("#task-modal button.priority").each(function() {
                                    if ( $(this).attr("data-value") == t.priority ) {
                                        $(this).removeClass("btn-default").addClass("btn-primary");
                                    } else if ( $(this).hasClass("btn-primary") ) {
                                        $(this).removeClass("btn-primary").addClass("btn-default");
                                    }
                                });

                                // status button
                                $("#task-modal button.status").each(function() {
                                    if ( $(this).attr("data-value") == t.status ) {
                                        $(this).removeClass("btn-default").addClass("btn-primary");
                                    } else if ( $(this).hasClass("btn-primary") ) {
                                        $(this).removeClass("btn-primary").addClass("btn-default");
                                    }
                                });

                                // subject picklist or freeform text
                                // always use the free-form input by not populating the select pull down - chad 2017-06-22
                                var found = false;
                                $("#task-modal select.subject option").each(function() {
                                    
                                    var optionVal = $(this).val();

                                    /*
                                    if ( t.subject == optionVal ) {
                                        $(this).attr("selected",true);
                                        found = true;
                                    } else {
                                        $(this).removeAttr("selected");
                                    }
                                    */
                                    
                                    

                                });

                                if ( !found && typeof t.subject !== 'undefined' && t.subject.length > 0 ) {
                                    // subject wasn't in picklist but it does exist show it in the freeform text
                                    $("#task-modal select.subject").hide();
                                    $("#task-modal .other-subject").show();
                                    $("#task-modal input.other-subject").val( globalDecodeEntities(t.subject));
                                }

                                $("#task-modal .association-label").text(t.taskType);
                                
                                var taskTypeValue = t.taskType.toLowerCase();
                                if ( taskTypeValue == "surgical case") { taskTypeValue = "case"; }
                                $("#task-modal select.task-type").val( taskTypeValue );

                                // set the task modal header
                                var taskTypeLabel = $("#task-modal select.task-type").find("option:selected").text();
                                $("#task-modal .task-type-label").text( taskTypeLabel );

                                    var recordId = t.sourceId;
                                    var name = t.source;                           

                                    $("#task-modal .associated-object").val(name);
                                    $("#task-modal .associated-object").attr("data-record-id", recordId);                         
                                    $("#task-modal .association-container").show();
                                    $("#task-modal button.association-button").hide();
                                                                       

                                if ( t.teamId ) {
                                    
                                    // set the team and trigger change to update the task owner list

                                    $("#treeTaskTeam").one("team.tree.created", function() {

                                        // put this at the end of the task queue to try and further reduce race conditions
                                        window.setTimeout(function() {
                                            DDTEAMTREE=true;
                                            $("#task-modal #taskTeamButton").closest("div.dropdown").find("input[value='"+t.teamId+"']").click(); 
                                        });

                                    });

                                }

                                // the other misc inputs
                                $("#task-modal input.dueDate").val(t.s_dueDate);
                                $("#task-modal textarea.description").val(globalDecodeEntities(t.description));
                                $("#task-modal span.createdBy").text(globalDecodeEntities(t.createdBy));
                            
                                // the task owner list is built using a remoting call, we need to wait until it's finished
                                // before setting the owner
                                $("#task-modal #taskTeamButton").one("task.team.changed", function() {
                                    $("#task-modal select.task-owner").val(t.taskOwnerId).change();
                                });                             

                                $("#task-modal").modal("show");
                                
                            } else {

                                $("span.my-task-error").text(" - "+event.message);
                            }
                        });
                        
                    } 
                    // end added by chad for 4.1 - Task Support

                    function deleteNote(){
                      $("#delete-Note-modal").modal("show");                       
                       
                    }
                    function linkActivity(act){

                      var type = act.activityType;
                      var recId = act.recId;
                      
                      console.log('##--linkActivity.act:'+ JSON.stringify(act));
                      console.log('##--linkActivity.type:'+ type);

                     if(type=='EVENT')
                     {
                         window.location="/AREventsDetail?id="+recId;
                     }
                     if(type=='NOTE')
                     {    
                        //editNote(recId,type,owner,notes); 
                        editNote(act); //updated by srinivas sattoor 8.10.2017
                                               
                     }
                     if(type=='OPPORTUNITY')
                     {
                         window.location ="/AROpportunityDetail?id="+recId;
                     }
                     if(type=='TASK')
                     {                        
                        editTask(recId);                         
                     }                     
                    }  
                    
                    // added case Task - chad for 4.1 Task Support
                    function getUIClassForActivity(type){
                        switch(type){
                            case "LOG":
                                return "fa fa-folder-open-o fa-1x fa-inverse fa-border fa-meeting-log";
                            case "EVENT":
                                return "fa fa-calendar fa-1x fa-inverse fa-border fa-meeting-surgicalcase";
                            case "NOTE":
                                return "fa fa-pencil-square-o fa-1x fa-inverse fa-border fa-meeting-note";
                            case "TASK":
                                return "fa fa-tasks fa-rotate-180 fa-1x fa-inverse fa-border fa-meeting-task";    
                            case "OPPORTUNITY":
                                return "fa fa-pencil-square-o fa-1x fa-inverse fa-border fa-line-chart";    
                            
                        }   //  end of switch
                        
                        //fa fa-calendar fa-2x fa-inverse fa-border fa-meeting-background
                    }   //  end of getUIClassForActivity
                        
                      function constructActivity(v){
                           var notes;
                           var link;
                           var username=$('.uname').text();
                           var iconStyle="";

                           console.log(v);

                           var notesparam= (v.acc.notes);
                            if ( typeof notesparam === "undefined" ) { 
                                 notesparam = ""; 
                            } else {
                                 notesparam = globalDecodeEntities(notesparam);
                            }
                              
                            var styleStr = "";        
                            if(v.acc.activityType=='EVENT' || v.acc.activityType=='OPPORTUNITY' || (v.acc.activityType=='NOTE' && v.acc.logOwner==username) || v.acc.activityType=='TASK') {                           
                    
                                if(v.acc.activityType =='OPPORTUNITY') {
                                  iconStyle='style="background-color:#800080 !important"';  
                                }

                                styleStr = "style='cursor:pointer;color:#3A9DDB;padding-left:0px;'";

                            } else {
                                  link ='style="padding-left:0px"'; 
                                  styleStr = 'style="padding-left:0px"'; 
                            }
                           
                           /*
                           // commented out by chad for 4.2, left here for safety since i'm making changes quickly. Once 4.2 is deployed this can be removed
                           if(v.acc.activityType=='SURGICAL CASE' || v.acc.activityType=='OPPORTUNITY' || v.acc.activityType=='TASK' || (v.acc.activityType=='NOTE' && v.acc.logOwner==username))                           
                           {
                               console.log('~~~~~~'+v.acc.activityType)  

                               // task notes should be sub - chad for 4.1 - Task Support
                               if ( v.acc.activityType=='TASK' ) {
                                  v.acc.notes = v.acc.subj;
                               }

                               var notesparam= (v.acc.notes);
                               //var noteformat=  notesparam.substring(1,notesparam.length()-1) ;
                               //var noteescapeapos= notesparam.replace(/&#39;/g, "\\'");
                               var noteescapequot= notesparam.replace(/&quot/g, '\\y~');  
                               console.log(noteescapequot);                     
                               link ="style='cursor:pointer;color:#3A9DDB;padding-left:0px;' onclick='linkActivity(\""+v.acc.recId+"\",\""+v.acc.activityType+"\",\""+v.acc.logOwner+"\",\""+noteescapequot+"\");'";
                               if(v.acc.activityType =='OPPORTUNITY')
                               {
                                 iconStyle='style="background-color:#800080 !important"';  
                               }
                           }                           
                           else {link ='style="padding-left:0px"';}
                           
                           // added data-record-id and <span class="notes">.. - chad for 4.1 - Task Support
                           htm = '<div class="col-sm-12 form-group detail_div" data-record-id="'+v.acc.recId+'"> '+
                                 '     <div class="col-sm-1 form-group detail_div axis-detail-pg-data-href" style="margin-bottom:5px !important">  '+
                                 '         <i class="'+getUIClassForActivity(v.acc.activityType)+'"  '+iconStyle+'  ></i> '+
                                 '     </div> '+
                                 '     <div id="'+v.acc.recId+'" class="col-sm-8 form-group detail_div"   style="word-break:break-all;padding:0 !important"> '+
                                 '         <div class="col-sm-12 form-group '+v.acc.activityType+'" data-type="textarea"   data-underline="false" '+link+' >'+ 
                                 '         '+v.acc.activityType+''+                                 
                                 '         </div> '+                                 
                                 '         <span class="notes">'+globalDecodeEntities(v.acc.notes)+'</span>'+ 
                                 '     </div> '+
                                 '     <div  class="col-sm-3 form-group detail_div" style="padding-left:0px;padding-right:0px;" > '+ 
                                 '         '+ v.acc.logOwner +' <br/> '+
                                 '         '+ dateFormatter(v.acc.logDate) +
                                 '     </div> '+                                 
                                 ' </div>';
                           return htm;
                            */

                           htm = '<div class="col-sm-12 form-group detail_div" data-record-id="'+v.acc.recId+'"> '+
                                   '     <div class="col-sm-1 form-group detail_div axis-detail-pg-data-href" style="margin-bottom:5px !important" >  '+
                                   '         <i class="'+getUIClassForActivity(v.acc.activityType)+'"  '+iconStyle+'  ></i> '+
                                   '     </div> '+
                                   '     <div id="'+v.acc.recId+'" class="col-sm-8 form-group detail_div" style="word-break:normal;padding:0 !important"> '+
                                   '         <div class="col-sm-12 form-group activity-link '+v.acc.activityType+'" '+styleStr+' data-type="textarea" >'+ 
                                   '         '+v.acc.activityType+''+                                 
                                   '         </div> '+                                 
                                   '         <span class="notes">'+notesparam + '</span>'+  
                                   '     </div> '+
                                   '     <div  class="col-sm-3 form-group detail_div" style="padding-left:0px;padding-right:0px;" > '+ 
                                   '         '+ v.acc.logOwner +' <br/> '+
                                   '         '+ dateFormatter(v.acc.logDate) +
                                   '     </div> '+                                 
                                   ' </div>';
                          return htm;                           
                     }   //  end of constructActivity 
                     function dateFormatter(val){
                        //return moment(val).format('M/D/YYYY');
                        return moment(val).format("MM-DD-YYYY h:mm A");//YYYY-MM-DD, hh:mm:ss);
                    }
                    
                    function addAccountNote(){
                        $("#account-notes-modal span#addNoteErrors").html('');
                        
                        note = $("#account-notes-modal #accNotes").val();
                        if(note == null || note == ''){
                            $("#account-notes-modal span#addNoteErrors").html('Please enter a note');
                            return false;
                        }
                        NoteId =$("#account-notes-modal").attr('data-rec-id');
                        
                        console.log('Noteid'+ NoteId );
                        if( NoteId  =="" || typeof NoteId =="undefined")
                        {
                            var btntxt=$("#account-notes-modal button.btn-save").text();
                            $("#account-notes-modal button.btn-save").text('Saving...');
                            $("#account-notes-modal button").attr("disabled",true);
                            //  if valid save the note
                            Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.createNote}",
                                accountId, note,
                                function(result, event) {
                                    if(event.statusCode == 200){
                                        
                                        //loadOpportunityActivities('All Activities');
                                        loadAccountActivities($("#tab-accountActivity select#activityFilter").val());
                                        $("#account-notes-modal button.btn-save").text(btntxt);
                                        $("#account-notes-modal button").removeAttr("disabled");
                                        $('#account-notes-modal').modal('hide');
                                    }
                            }); //  end of remote call to save linked acc
                         }
                         else
                         {
                             updateNote(NoteId,note );
                             NoteId="";
                         }   
                    }   //  end of addAccountNote
                    
                    var noteId;
                    
                    function editNote(act){

                        var recId = act.recId;
                        var activityType = act.activityType;
                        var notes = "";
                        console.log('##--editNote.notes: '+JSON.stringify(act));
                        if ( act.notes ) {
                            notes = act.notes;
                        }
                        var logOwner = act.logOwner;

                        var username=$('.uname').text(); 
                        console.log('##--editNote.notes: '+notes);
                        
                        if(logOwner!=username)
                        {
                            return;
                        }
                        else if(activityType=='NOTE' && logOwner==username)
                        {
                              $('#account-notes-modal').modal('show'); 
                              $("#account-notes-modal #accNoteDate").html(dateFormatter(moment()));
                              $('#account-notes-modal').attr('data-rec-id',recId) ;
                              notes=notes.replace(/y~;/g, '\"'); 
                              $("#account-notes-modal #accNotes").val(globalDecodeEntities(notes));
                              $("#account-notes-modal button.btn-delete" ).show();
                              noteId = recId;                       
                        }
                    
                    }
                    function updateNote(noteId,note) {
                        console.log('url save-----');
                        
                        Visualforce.remoting.Manager.invokeAction("{!$RemoteAction.CS_ARAccountsCC.updateNote}",
                            noteId, note,
                            function(result, event) {
                                if(event.statusCode == 200){
                                    
                                    loadAccountActivities($("#tab-accountActivity select#activityFilter").val());
                                    
                                    $('#account-notes-modal').modal('hide');
                                }
                        }); //  end of remote call to save linked acc
                        $('#account-notes-modal').attr('data-rec-id',"") 
                    }
                    
                    function makeCall(numtype) {
                        //var email =.text; 
                        var num="";
                        var link="";
                        var websiteLink="";
                        if(numtype=='web')
                        {
                            num = $('#provider-header a.website').text();
                            console.log('num =='+num );
                            if(num.toLowerCase().search( "https" )!=-1 || num.toLowerCase().search( "http" )!=-1)
                            {
                                link=num;  
                            }
                            else
                            {
                                link= "http://"+num;
                            }
                            
                           $("a.website").attr("href",link);                           
                           
                        }
                        else if (numtype=='mainSecWeb')
                        {
                            num = $('#tab-account-details a.website').text().replace("https://","");
                            if(num.toLowerCase().search( "https" )!=-1 || num.toLowerCase().search( "http" )!=-1)
                            {
                                link=num;  
                            }
                            else
                            {
                                link= "http://"+num;
                            }
                            console.log('link='+link);
                           $("a.website").attr("href",link);                           
                           
                        }
                        else
                        {
                            if(numtype=='phone')
                            {                       
                              num = $(".workphone").text();
                              link= "tel:"+num;
                            }
                            else if(numtype=='fax')
                            {
                                num = $(".workfax").text();
                                link= "tel:"+num;
                            }
                            
                            else if(numtype=='email')
                            {
                                num = $(".email").text();
                                link= "mailto:"+num;
                            }
                            
                            window.location = link;
                        }
                        console.log('call method=='+num+'numtype==='+numtype);                       
                        
                        
                        //alert(call);
                    } 
                    
                    function assignProductPartsTypeahead(){
                        $("#new-prefcard-modal input.opportunity-part-number-typeahead").typeahead({
                        // typeahead setup for case products
                        minLength: 3,
                        items: 50,
                        source: function(query, onSuccess) {
                            search(query, "CS_ARAccountsCC.searchProducts", onSuccess);                                    
                        },
                        displayText: function(item) {
                            return globalDecodeEntities( item.Product2.Material_Number__c + " ; " + item.Product2.Name);
                        },
                        afterSelect: function(item) {
                            
                            $("#new-prefcard-modal .opportunity-part-number-typeahead").val(item.Product2.Material_Number__c);
                            $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id", item.Product2.Id);         
                            $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type", item.Product2.Material_Group_Type__c);
                            $("#new-prefcard-modal .opportunity-part-description").val(item.Product2.Name);
                            $("#new-prefcard-modal .opportunity-part-quantity").val("1");
                            $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                            $("#new-prefcard-modal .opportunity-part-total-price").val(""); 
                            $("#new-prefcard-modal .opportunity-part-serial-number").val("");          
                            if((item.Product2.Material_Group_Type__c == "Implants") || (item.Product2.Material_Group_Type__c == "Disposable"))
                             {
                                 $("#new-prefcard-modal .opportunity-part-unit-price").removeAttr('disabled');
                                 $("#new-prefcard-modal .opportunity-part-total-price").removeAttr('disabled');
                                 $("#new-prefcard-modal .opportunity-part-quantity").val("");
                                 $("#new-prefcard-modal .opportunity-part-quantity").attr("disabled",true);
                                 $("#new-prefcard-modal .opportunity-part-serial-number").val("");
                                 $("#new-prefcard-modal .opportunity-part-serial-number").attr("disabled",true);
                             }
                             if((item.Product2.Material_Group_Type__c == "Equipment") )
                             {
                                 $("#new-prefcard-modal .opportunity-part-quantity").removeAttr('disabled');
                                 $("#new-prefcard-modal .opportunity-part-serial-number").removeAttr('disabled');                            
                                 $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                                 $("#new-prefcard-modal .opportunity-part-unit-price").attr("disabled",true);
                                 $("#new-prefcard-modal .opportunity-part-total-price").val("");
                                 $("#new-prefcard-modal .opportunity-part-total-price").attr("disabled",true);
                             } 
                            $("#new-prefcard-modal button.add-opp-part").removeAttr('disabled');
                            
                            //alert(item + " selected and need to add a row in table");
                        
                        }
                        });
                    }   //  end of assignProductPartsTypeahead
                    function assignProductPartDescriptionTypeahead(){
                        $("#new-prefcard-modal input.opportunity-part-description-typeahead").typeahead({
                        // typeahead setup for case products
                        minLength: 3,
                        items: 50,
                        source: function(query, onSuccess) {
                            search(query, "CS_ARAccountsCC.searchProducts", onSuccess);                                    
                        },
                        displayText: function(item) {
                            return globalDecodeEntities( item.Product2.Material_Number__c + " ; " + item.Product2.Name);
                        },
                        afterSelect: function(item) {
                            
                                     
                            $("#new-prefcard-modal .opportunity-part-number-typeahead").val(item.Product2.Material_Number__c);
                            $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id", item.Product2.Id);
                            $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type", item.Product2.Material_Group_Type__c);            
                            $("#new-prefcard-modal .opportunity-part-description").val(item.Product2.Name);
                            $("#new-prefcard-modal .opportunity-part-quantity").val("1");
                            $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                            $("#new-prefcard-modal .opportunity-part-total-price").val(""); 
                            $("#new-prefcard-modal .opportunity-part-serial-number").val(""); 
                                     
                            if((item.Product2.Material_Group_Type__c == "Implants") || (item.Product2.Material_Group_Type__c == "Disposable"))
                             {
                                 $("#new-prefcard-modal .opportunity-part-quantity").val("");
                                 $("#new-prefcard-modal .opportunity-part-quantity").attr("disabled",true);
                                 $("#new-prefcard-modal .opportunity-part-serial-number").val("");
                                 $("#new-prefcard-modal .opportunity-part-serial-number").attr("disabled",true);
                             }
                             
                            if((item.Product2.Material_Group_Type__c == "Equipment") )
                             {
                                 $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                                 $("#new-prefcard-modal .opportunity-part-unit-price").attr("disabled",true);
                                 $("#new-prefcard-modal .opportunity-part-total-price").val("");
                                 $("#new-prefcard-modal .opportunity-part-total-price").attr("disabled",true);
                             } 
                            $("#new-prefcard-modal button.add-opp-part").removeAttr('disabled');
                            //alert(item + " selected and need to add a row in table");
                        
                        }
                        });
                    }   //  end of assignProductPartDescriptionTypeahead
                    
                    function addPartInv(){  
                     console.log('in addpart====');                  
                     if($("#new-prefcard-modal button.add-opp-part").is(":disabled")){
                         console.log('in addpart if disabled====');  
                         return false;
                     }
                     $("#new-prefcard-modal span.save-error").text("");   
                     
                     var addFlag=false;
                     var lowpar = parseInt($("#new-prefcard-modal .opportunity-part-unit-price").val());
                     var highpar = parseInt($("#new-prefcard-modal .opportunity-part-total-price").val());
                     
                     
                     if(((lowpar>=highpar) && (!isNaN(highpar) && !isNaN(lowpar))))
                     {
                         addFlag=true;
                     }
                     
                     $("#new-prefcard-modal .opportunity-part-quantity").attr("disabled",false);
                     $("#new-prefcard-modal .opportunity-part-unit-price").attr("disabled",false);
                     $("#new-prefcard-modal .opportunity-part-total-price").attr("disabled",false);
                     $("#new-prefcard-modal .opportunity-part-serial-number").attr("disabled",false);
                     
                     
                         var eleFound=false;
                         $.each($("#new-prefcard-modal .product-parts tbody tr"), function(i, v){
                             if($(v).attr("data-part-id") == $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id")){
                                 eleFound=true;
                             }
                         });
                                
                         if(eleFound || addFlag ){
                             if(eleFound )
                             {
                                 console.log('in ele found');
                                 $("#new-prefcard-modal span.save-error").text("Part already selected. Edit the part");
                                 
                                 $("#new-prefcard-modal .opportunity-part-number-typeahead").val("");
                                 $("#new-prefcard-modal .opportunity-part-number-typeahead").removeAttr("data-part-id");
                                        
                                 $("#new-prefcard-modal .opportunity-part-description").val("");
                                 $("#new-prefcard-modal .opportunity-part-quantity").val("");
                                 $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                                 $("#new-prefcard-modal .opportunity-part-serial-number").val("");
                                 //$("#new-prefcard-modal .opportunity-part-unit-price").removeAttr("data-unit-price");
                                        
                                 $("#new-prefcard-modal .opportunity-part-total-price").val("");
                                 $("#new-prefcard-modal .opportunity-part-total-price").removeAttr("data-total-price");
                                        
                                 $("#new-prefcard-modal button.add-opp-part").attr('disabled', 'disabled');
                             }
                             else
                             {
                                 console.log('in addflag');
                                 desc=$("#new-prefcard-modal .opportunity-part-description-typeahead").val();
                                 part=$("#new-prefcard-modal .opportunity-part-number-typeahead").val();
                                 $("#new-prefcard-modal span.save-error").text("Low Par should not exceed High Par");
                                // var desc = $("#new-prefcard-modal .opportunity-part-description").val();
                                // $("#new-prefcard-modal .opportunity-part-description").val("'"+desc+"'");
                                // $("#new-prefcard-modal .opportunity-part-serial-number").val("");
                                 $("#new-prefcard-modal .opportunity-part-quantity").attr("disabled","disabled");
                                 $("#new-prefcard-modal .opportunity-part-serial-number").attr("disabled","disabled");       
                                 $("#new-prefcard-modal button.add-opp-part").attr('disabled', 'disabled');
                             }
                         } else if(!addFlag && !eleFound ) {
                             console.log('in else no error');
                             //var price =parseFloat($("#new-prefcard-modal .opportunity-part-unit-price").val().replace('$', "").replace(',', ""));
                             var row_id = $("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id");
                             //$("#opportunity-edit-modal .product-parts tbody").append('<tr data-part-id="'+$("#opportunity-edit-modal .opportunity-part-number-typeahead").attr("data-part-id")+'"><td><p class="form-control-static">'+$("#opportunity-edit-modal .opportunity-part-number-typeahead").val()+'</p></td><td><p class="form-control-static">'+$("#opportunity-edit-modal .opportunity-part-description").val()+'</p></td><td><p class="form-control-static part-quantity">'+$("#opportunity-edit-modal .opportunity-part-quantity").val()+'</p></td><td><p class="form-control-static">'+$("#opportunity-edit-modal .opportunity-part-unit-price").val()+'</p></td><td id="total" data-total="'+$("#opportunity-edit-modal .opportunity-part-total-price").attr("data-total-price")+'"><p class="form-control-static">'+$("#opportunity-edit-modal .opportunity-part-total-price").text()+'</p></td><td class="pull-right"><button class="btn btn-xs btn-primary" onclick="$(this).parent().parent().remove()">delete</button></td>');
                             $("#new-prefcard-modal .product-parts tbody").append('<tr data-part-id="'+$("#new-prefcard-modal .opportunity-part-number-typeahead").attr("data-part-id")+'" product-group-type="'+$("#new-prefcard-modal .opportunity-part-number-typeahead").attr("product-group-type")+'"><td><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-number-typeahead").val()+'</p></td><td class="description-marker"><p class="form-control-static">'+$("#new-prefcard-modal .opportunity-part-description").val()+'</p></td><td class="quantity-marker"><p class="form-control-static part-quantity">'+$("#new-prefcard-modal .opportunity-part-quantity").val()+'</p></td><td class="unitprice-marker"><p class="form-control-static part-unitprice">'+$("#new-prefcard-modal .opportunity-part-unit-price").val()+'</p></td ><td id="total" class="totalprice-marker"><p class="form-control-static part-totalprice">'+$("#new-prefcard-modal .opportunity-part-total-price").val()+'</p></td><td id="total" class="serialnumber-marker"><p class="form-control-static part-serialnumber">'+$("#new-prefcard-modal .opportunity-part-serial-number").val()+'</p></td><td class="pull-right" style="padding-left:15px"><button type="button" class="btn btn-xs btn-primary pt-edit-btn" onclick="editPart(\''+row_id+'\')">Edit</button>&nbsp;<button class="btn btn-xs btn-danger delete-product-part" onclick="$(this).parent().parent().remove()">Delete</button></td>');
                             
                             $("#new-prefcard-modal .opportunity-part-number-typeahead").val("");
                             $("#new-prefcard-modal .opportunity-part-number-typeahead").removeAttr("data-part-id");
                                    
                             $("#new-prefcard-modal .opportunity-part-description").val("");
                             $("#new-prefcard-modal .opportunity-part-quantity").val("");
                             $("#new-prefcard-modal .opportunity-part-unit-price").val("");
                             $("#new-prefcard-modal .opportunity-part-serial-number").val("");
                             //$("#new-prefcard-modal .opportunity-part-unit-price").removeAttr("data-unit-price");
                                    
                             $("#new-prefcard-modal .opportunity-part-total-price").val("");
                             $("#new-prefcard-modal .opportunity-part-total-price").removeAttr("data-total-price");
                                    
                             $("#new-prefcard-modal button.add-opp-part").attr('disabled', 'disabled');      
                         
                         }
                         
                                
                             
                         
                         
                                  
                }   //  end of addPart                            
               
                   
                    
                            
                     
         </script>
        
        <div class="wrapper wrapper-content">
             <div class="row">
                 <div class="col-xs-12">
                     <div class="ibox float-e-margins">
                         <div class="ibox-title">
                             <div class="clearfix">
                                 <div class="pull-left"> 
                                     <div id="detailHeader">
                                         <div class="text-pull-left">
                                            <h2>
                                                <b><span class="font-large">{!$Label.ARAccountDetail_View}</span></b>
                                                <i class="oppDetail-busy fa fa-refresh fa-spin" style="display:none"></i>
                                            </h2>   
                                        </div>   <!-- End of text-pull-left -->
                                    </div> <!-- End of detailHeader -->
                                </div> <!-- End of pull-left -->
                                <div class="pull-right"> 
                                    <button type="button" class="btn btn-primary menu_btn btnViewSwitch"  tabindex="-1" id="accListBtn" onclick="switchAccountView('ListView')"><i class="fa fa-list"></i> List View</button> 
                                </div> 
                            </div>  <!-- End of clearfix -->
                        </div> <!-- End of ibox-title --> 
                        <div id="provider-detail" style="background-color: white;">
                            <div class="row ibox">
                                <div id="provider-header" class="col-xs-12">
                                    <div class="ibox-content box border_top_none light_border_top_bottom">
                                        <div class="clearfix">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-sm-12" >
                                                            <p class="form-control-static axis-detail-pg-field-label"/>
                                                        </div>
                                                        <div class="col-sm-12" style="margin-bottom:0">
                                                          <b><div class="nickname axis-detail-pg-data" style="font-size:20px"></div></b>                                                                                                                        
                                                        </div>
                                                        <div class="col-sm-12" style="padding-top:10px">
                                                          
                                                                                                                                                                             
                                                        </div>
                                                        <div class="col-sm-3 form-group" style="margin-bottom:0;">
                                                            <p class="form-control-static axis-detail-pg-field-label ">{!$Label.ARContacts_SAPName}</p>
                                                            <div class="sap-name axis-detail-pg-data"></div>
                                                        </div>
                                                        <div class="col-sm-3 form-group" style="margin-bottom:0;">
                                                            <p class="form-control-static axis-detail-pg-field-label ">{!$Label.ARContacts_AccountNumber}</p>
                                                            <div class="number"></div>
                                                        </div>
                                                        <div class="col-sm-3 form-group" style="margin-bottom:0;">
                                                            <p class="form-control-static axis-detail-pg-field-label ">{!$Label.ARContacts_Phone}</p>
                                                            <div style="color:#3A9DDB; cursor:pointer;" class="phone axis-detail-pg-data-href" onclick="makeCall('phone');"></div>
                                                        </div>
                                                        <div class="col-sm-3 form-group" style="margin-bottom:0;">
                                                            <p class="form-control-static axis-detail-pg-field-label " >{!$Label.ARContacts_Website}</p>
                                                            <a href="" target="_blank" style="color:#3A9DDB; word-wrap:break-word;" onclick="makeCall('web');" class="website axis-detail-pg-data-href"></a>  
                                                        </div> 
                                                    </div>
                                                </div>
                                                
                                                
                                            </div>
                                        </div>  <!-- end of clear fix -->
                                    </div> <!-- end of border_top_none -->
                                </div> 
                            </div> <!-- end of row ibox -->
                            
                            <div class="row ibox">
                                <div class="col-md-12" >
                                    <div class="ibox-content box border_top_none">
                                        <div class="clearfix">
                                            <div class="tabs-container">
                                                <ul class="nav nav-tabs account">
                                                    <li class="active">                                     
                                                        <a id="details" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-account-details" aria-expanded="">{!$Label.CS_Contacts_Tab1}
                                                        </a>
                                                        <i class="surgeonDetail-busy tab-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                    </li>
                                                    <li class="">
                                                        <a id="contacts" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-related-contacts" aria-expanded="false">{!$Label.ARContacts_RelatedContact}</a>
                                                        <i class="contacts-busy tab-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                    </li>
                                                    <li class="">
                                                        <a id="surgeons" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-related-surgeons" aria-expanded="false">{!$Label.ARContact_SurgeonAffiliation}</a>
                                                        <i class="surgeons-busy tab-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                    </li>
                                                    <li class="">
                                                        <a id="accountInventory" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-account-inventory" aria-expanded="false">{!$Label.ARContact_Inventory}</a>
                                                        
                                                    </li>
                                                    <li class="">
                                                        <a id="accountActivity" class="tab-skinny" style="border: none" data-toggle="tab" href="#tab-accountActivity" aria-expanded="false">{!$Label.ARContact_Activity}</a>
                                                        <i class="accountActivity-busy tab-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                    </li>
                                                    
                                                </ul>
                                                <!-- account details tab -->
                                                 
                                                    <div class="tab-content">
                                                        <!-- Account Detail tab -->
                                                        <div id="tab-account-details" class="tab-pane active">
                                                            <div class="full-height-scroll">
                                                              <div class="clearfix">
                                                                    <div class="pull-left">
                                                                        <i class ="divdetails-busy  fa fa-refresh fa-spin" ></i>
                                                                    </div>
                                                                    <button class="btn btn-primary pull-right btn-xs edit-accountDetail-btn">
                                                                      <i class="fa fa-pencil-square-o"></i><i class="edit-busy fa fa-refresh fa-spin" style="display:none"></i> Edit
                                                                    </button>
                                                                <div class="row ibox detail_div">
                                                                  <div class="col-sm-6">
                                                                    <p class="form-control-static axis-detail-pg-field-label" >{!$Label.CS_AssignedTo} </p>
                                                                          <div class="AssignedTo axis-detail-pg-data" ></div>
                                                                          
                                                                   
                                                                    
                                                                  </div>  
                                                                  <div class="col-sm-6"> 
                                                                    <p class="form-control-static  axis-detail-pg-field-label" >Account Number</p>
                                                                          <div class="accountnumber axis-detail-pg-data" ></div>
                                                                          
                                                                     
                                                                   
                                                                  </div>
                                                                </div>    
                                                                <div class="row ibox detail_div"> 
                                                                  <div class="col-sm-6">   
                                                                     <p class="form-control-static axis-detail-pg-field-label " >{!$Label.CS_AccountFiscalYear} </p>
                                                                            <div class="AccountFiscalYear axis-detail-pg-data" ></div>
                                                                  </div>  
                                                                  <div class="col-sm-6"> 
                                                                      <p class="form-control-static axis-detail-pg-field-label " >SAP Name </p>
                                                                              <div class="SAPName axis-detail-pg-data" style="word-wrap: break-word;"></div>
                                                                              
                                                                  </div>
                                                                </div>
                                                                <div class="row ibox detail_div"> 
                                                                  <div class="col-sm-6"> 
                                                                     <p class="form-control-static axis-detail-pg-field-label " >{!$Label.CS_BusinessHours}</p>
                                                                          <div class="time axis-detail-pg-data"></div>
                                                                          
                                                                  </div>  
                                                                  <div class="col-sm-6">                                                                    
                                                                                                                                         
                                                                     <p class="form-control-static axis-detail-pg-field-label " >{!$Label.ARContacts_Nickname}</p>
                                                                          <div class="nickname axis-detail-pg-data" style="word-wrap: break-word;"></div>
                                                                          
                                                                  </div>
                                                                </div>
                                                                <div class="row ibox detail_div"> 
                                                                  <div class="col-sm-6" >
                                                                      <p class="form-control-static axis-detail-pg-field-label " >{!$Label.CS_CredentialingCompany} </p>
                                                                          <div class="credentialcompany axis-detail-pg-data" style="word-wrap: break-word;"></div>
                                                                          
                                                                  </div>  
                                                                  <div class="col-sm-6" >        
                                                                   <p class="form-control-static axis-detail-pg-field-label " >Work Phone</p>
                                                                       <!-- <div style="float:right;">
                                                                                  <a href="#" class="pull right btn-primary btn-xs" onclick="makeCall('phone');"><i class="fa fa-phone" style="display: inline;"></i></a>                                                                         
                                                                        </div> -->
                                                                       <div class="workphone axis-detail-pg-data-href" style="color:#3A9DDB;cursor: pointer;" onclick="makeCall('phone');"></div>
                                                                   </div>
                                                                </div>
                                                                <div class="row ibox detail_div"> 
                                                                  <div class="col-sm-6"> 
                                                                    <p class="form-control-static axis-detail-pg-field-label " >{!$Label.CS_SignInLocation} </p>
                                                                          <div class="SignInLocation axis-detail-pg-data" style="word-wrap: break-word;"></div>
                                                                          
                                                                  </div>  
                                                                  <div class="col-sm-6"> 
                                                                     <p class="form-control-static axis-detail-pg-field-label " >{!$Label.CS_WorkFax}</p>
                                                                        <!--<div style="float:right;">
                                                                                  <a href="#" class="pull right btn-primary btn-xs" onclick="makeCall('fax');"><i class="fa fa-phone" style="display: inline;"></i></a>                                                                         
                                                                        </div> --> 
                                                                              <div class="workfax axis-detail-pg-data-href" style="color:#3A9DDB;cursor: pointer;" onclick="makeCall('fax');"></div>                                                                      
                                                                     </div>
                                                                </div>
                                                                <div class="row ibox detail_div"> 
                                                                  <div class="col-sm-6">
                                                                     <p class="form-control-static axis-detail-pg-field-label " >{!$Label.CS_RepresentativeParking} </p>
                                                                        <div class="RepresentativeParking axis-detail-pg-data" style="word-wrap: break-word;"></div>
                                                                        
                                                                  </div>
                                                                  <div class="col-sm-6">
                                                                      <p class="form-control-static axis-detail-pg-field-label " >Website</p>
                                                                       <div >
                                                                        <a href="" target="_blank" style="color:#3A9DDB; word-wrap:break-word;" onclick="makeCall('mainSecWeb');" class="website axis-detail-pg-data-href"></a>  
                                                                       </div>
                                                                      </div>
                                                                </div> 
                                                                <div class="row ibox detail_div"> 
                                                                  <div class="col-sm-6">
                                                                     <p class="form-control-static axis-detail-pg-field-label " >{!$Label.CS_OperatingRoomLocation}</p>
                                                                        <div class="OperatingRoomLocation axis-detail-pg-data" style="word-wrap: break-word;"></div>
                                                                        
                                                                   </div>
                                                                  <div class="col-sm-6">                                         
                                                                    <p class="form-control-static axis-detail-pg-field-label " >{!$Label.ARAccountDetail_Address}</p>
                                                                              <div class="address axis-detail-pg-data" style="word-wrap: break-word;"></div>
                                                                              
                                                                         
                                                                  </div>
                                                                </div>
                                                                <div class="row ibox"> 
                                                                  <div id="divMapSibling" class="col-xs-6">
                                                                    <div class="row">        
                                                                      
                                                                      <div class="col-sm-12 detail_div" >
                                                                          <p class="form-control-static axis-detail-pg-field-label " >{!$Label.CS_SterileProcessingLocation}</p>
                                                                          <div class="SterileProcessingLocation axis-detail-pg-data" style="word-wrap: break-word;"></div>
                                                                          
                                                                        
                                                                      </div>  
                                                                      <div class="col-sm-12 detail_div" >  
                                                                       <p class="form-control-static axis-detail-pg-field-label ">{!$Label.CS_SterileProcessingHours}</p>
                                                                          <div class="SterileProcessingHours axis-detail-pg-data" ></div>
                                                                      
                                                                         
                                                                      </div>
                                                                      <div class="col-sm-12 detail_div" >
                                                                        <p class="form-control-static axis-detail-pg-field-label " >{!$Label.CS_RequiredtoChangeScrubs} </p>
                                                                            <div class="RequiredtoChangeScrubs axis-detail-pg-data" ></div>
                                                                        
                                                                      </div>  
                                                                      <div class="col-sm-12 detail_div" > 
                                                                         <p class="form-control-static axis-detail-pg-field-label " >{!$Label.CS_OtherAttireNotes}</p>
                                                                            <div class="OtherAttireNotes axis-detail-pg-data" style="word-wrap: break-word;"></div>
                                                                            
                                                                          
                                                                      </div> 
                                                                     </div>  
                                                                   </div>
                                                                   <div id="divMapContainer" class="col-xs-6" style="height:270px">
                                                                        <div id="divMap" style="height:100% !important"></div>
                                                                   </div>      
                                                                 </div>                                                                
                                                               </div> 
                                                             </div>
                                                        </div>
                                                    <!-- related contacts tab -->
                                                    <div id="tab-related-contacts" class="tab-pane">
                                                          <div class="clearfix">
                                                                <div class="text-right" style="padding:5px 0px">
                                                                  <button class="btn btn-xs btn-primary new-contact" data-toggle="modal" data-target="#provider-contact-modal">Add</button>
                                                                </div>
                                                            </div>
                                                            <div >                                                  
                                                              <div id="contactGrid" style="border:thin; border-color:gray; height: 600px;" class="ag-bootstrap"></div>
                                                            </div>
                                                          
                                                    </div>
                                                    
                                                    <!-- Surgeon Schedule tab -->
                                                    <div id="tab-related-surgeons" class="tab-pane">
                                                          <div class="clearfix">
                                                                <div class="pull-left" style="padding:5px 0px">
                                                                    <i class="surgDetail-busy fa fa-refresh fa-spin" style="display:none"></i>
                                                                </div>    
                                                                <div class="text-right" style="padding:5px 0px">
                                                                    
                                                                    <button class="btn btn-xs btn-primary new-contact" data-toggle="modal" data-target="#add-surgeon-affiliation-modal">{!$Label.ARSurgeon_Add}</button>
                                                                </div>
                                                            </div>
                                                            <div >                                                  
                                                              <div id="surgeonGrid" style="border:thin; border-color:gray; height: 600px;" class="ag-bootstrap"></div>
                                                            </div>
                                                          
                                                    </div>
                                                    
                                                    <!-- Surgeon Related Contacts tab -->
                                                    <div id="tab-account-inventory" class="tab-pane" style="padding:5px">
                                                          <div class="full-height-scroll">
                                                            <div class="clearfix">
                                                                <div class="row">
                                                                    <div class="col-sm-6 form-group detail_div" style="margin-bottom:0 !important">
                                                                        <div style="color:red" >&emsp;&nbsp;&nbsp; {!$Label.ARAccountDetail_Inventory}
                                                                            <i class ="inventory-busy  fa fa-refresh fa-spin" style="color:gray" ></i>
                                                                        </div>  
                                                                        </div>  
                                                                        <div class="col-sm-6 form-group detail_div" style="margin-bottom:0 !important">
                                                                            <div class="text-right">
                                                                                <button class="btn btn-xs btn-primary btn-pdf-pref-card"><i class="fa fa-file-pdf-o"></i><i class="edit-pref-card-busy fa fa-refresh fa-spin" style="display:none"></i> PDF</button>
                                                                                <button class="btn btn-xs btn-primary btn-edit-pref-card"><i class="fa fa-pencil-square-o"></i><i class="edit-pref-card-busy fa fa-refresh fa-spin" style="display:none"></i> Edit</button>
                                                                            </div>
                                                                        </div>
                                                                    
                                                                </div>
                                                                
                                                                <span class="pref-card-data">
                                                                
                                                                <div id="divImplantsAndDisposables">
                                                                        <div class="row" >
                                                                            <div class="col-xs-12"> 
                                                                                <div class="ibox-content" style="width: 100%;  border-top:none !important; padding-top:0px">
                                                                                
                                                                                    <div class="row"> 
                                                                                      <div class="col-xs-9">
                                                                                          <h3 style="color:#3A9DDB;" class="section-header-surgeon-details">{!$Label.ARAccountDetail_Inventory_Implants}</h3>
                                                                                      </div>
                                                                                        <div class="col-xs-3">
                                                                                            
                                                                                            <div class="pull-right">
                                                                                                <i id="fc-Implants-toggle" class="fa fa-chevron-up"
                                                                                                    data-target="divTableImplantsAndDisposables"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div id="divTableImplantsAndDisposables" class="collapse in">
                                                                                        <table class="table ibox-table product-parts">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th style="width:25%">{!$Label.AROpportunity_PartNumber}</th>
                                                                                                    <th style="width:35%">{!$Label.AROpportunity_Description}</th>
                                                                                                    <th style="width:20%">{!$Label.ARAccountDetail_Inventory_LowPar}</th>
                                                                                                    <th style="width:20%">{!$Label.ARAccountDetail_Inventory_HighPar}</th>                                                                                                    
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody>
                                                                                                
                                                                                            </tbody>
                                                                                            
                                                                                        </table>
                                                                                    </div> <!-- end of divTableImplantsAndDisposables -->
                                                                                </div>
                                                                            </div>
                                                                        </div> 
                                                                </div>   <!-- end of divImplantsAndDisposables -->
                                                                
                                                                <div id="divInstrumentsAndEquipment">
                                                                        <div class="row">
                                                                            <div class="col-xs-12"> 
                                                                                <div class="ibox-content" style="width: 100%;border-top:solid 1px #D3D3D3 !important"> 
                                                                                    <div class="row"> 
                                                                                        <div class="col-xs-9">
                                                                                            <h3 style="color:#3A9DDB;" class="section-header-surgeon-details">{!$Label.ARAccountDetail_Inventory_Instruments}</h3>
                                                                                        </div>
                                                                                        <div class="col-xs-3">
                                                                                            <div class="pull-right">
                                                                                                <i id="fc-Instruments-toggle" class="fa fa-chevron-up"
                                                                                                    data-target="divTableInstrumentsAndEquipment"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div> 
                                                                                    <div id="divTableInstrumentsAndEquipment" class="collapse in">
                                                                                        <table class="table ibox-table product-parts1">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <th style="width:25%">{!$Label.AROpportunity_PartNumber}</th>
                                                                                                    <th style="width:35%">{!$Label.AROpportunity_Description}</th>
                                                                                                    <th style="width:20%">{!$Label.AROpportunity_Qty}</th>
                                                                                                    <th style="width:20%">{!$Label.ARAccountDetail_Inventory_SerialNumber}</th> 
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody> 
                                                                                            </tbody> 
                                                                                        </table>
                                                                                    </div>
                                                                                </div>  
                                                                            </div>
                                                                        </div>
                                                                </div> <!-- end of divInstrumentsAndEquipment -->
                                                                
                                                                <div class="GProcedure-details" id="divNotes">
                                                                        <div class="row">
                                                                            <div class="col-xs-12"> 
                                                                                <div class="ibox-content" style="width: 100%;border-top:solid 1px #D3D3D3 !important"> 
                                                                                    <div class="row"> 
                                                                                        <div class="col-xs-9">
                                                                                            <h3 class="section-header-surgeon-details" style="color:#3A9DDB;">{!$Label.ARAccountDetail_Inventory_Notes}</h3>
                                                                                        </div>
                                                                                        <div class="col-xs-3">
                                                                                            <div class="pull-right">
                                                                                                <i id="fc-Prior-Chart-toggle" class="fa fa-chevron-up"
                                                                                                    data-target="divTableNotes"></i>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div> 
                                                                                   <div id="divTableNotes" class="collapse in">
                                                                                   <div class="GGrid col-lg-4">
                                                                                      <div class="GGrid-content"> <b>{!$Label.CS_Disposables}</b> <br/> 
                                                                                        <div class="disposables"></div>
                                                                                      </div>
                                                                                   </div>
                                                                                   <div class="GGrid col-lg-4">
                                                                                      <div class="GGrid-content"> <b>{!$Label.CS_Sutures}</b> <br/> 
                                                                                        <div class="sutures"></div>
                                                                                      </div>
                                                                                   </div>
                                                                                   <div class="GGrid col-lg-4">
                                                                                      <div class="GGrid-content"> <b>{!$Label.CS_Medications}</b> <br />
                                                                                        <div class="medications"></div>
                                                                                      </div>
                                                                                   </div>
                                                                                   <div class="GGrid col-lg-4">
                                                                                      <div class="GGrid-content"> <b>{!$Label.CS_Equipment}</b> <br /> 
                                                                                        <div class="equipment"></div>
                                                                                      </div>
                                                                                   </div>
                                                                                   <div class="GGrid col-lg-8">
                                                                                      <div class="GGrid-content">
                                                                                         <b>{!$Label.ARAccountDetail_Inventory_AddInfo}</b> <br /> 
                                                                                         <div class="equipment-notes"></div>
                                                                                      </div>
                                                                                   </div>
                                                                                   </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                </div> <!-- end of GProcedure-details -->
                                                                
                                                                </span>
                                                            </div>
                                                          </div>
                                                    </div>
                                                    
                                                    <!-- Account Activity tab -->
                                                    <div id="tab-accountActivity" class="tab-pane">
                                                        <div class="full-height-scroll">
                                                            <div class="clearfix">                                                      
                                                               <div class="row">
                                                                    <div class="col-sm-6 form-group detail_div">
                                                                        <div class="form-group">
                                                                            <label for="activityFilter" class="col-sm-2 control-label" style="padding-top: 7px">Show: </label>
                                                                            <div class="col-sm-10">
                                                                                <select class="form-control" id="activityFilter" onchange="loadAccountActivities(this.value)">
                                                                                    <option value="All Activities">{!$Label.AROpportunity_AllActivities}</option>
                                                                                    <option value="Event">Event</option>
                                                                                    <option value="Log">{!$Label.ARAccountDetail_Activity_Logs}</option>
                                                                                    <option value="Note">{!$Label.ARAccountDetail_Inventory_Notes}</option>
                                                                                    <option value="Opportunity">{!$Label.ARAccountDetail_opportunities}</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-6">
                                                                        <!-- <button class="btn btn-primary btn-sm" onclick="populateCaseDependentLists('add-linked-cases')"> Link Cases </button>
                                                                        &nbsp;&nbsp;&nbsp; -->
                                                                        <button class="btn btn-primary btn-sm" onclick="showAddNotes()">{!$Label.ARAccountDetail_AddNotes} </button>
                                                                    </div>
                                                                </div>
                                                                <!-- End of row -->
                                                                <div class="row">
                                                                    <div class="col-sm-12 form-group detail_div axis-detail-pg-field-label" style="padding-left: 25px;">
                                                                        {!$Label.ARAccountDetail_Activity_NextSteps}
                                                                        <i class ="divNextSteps-busy fa fa-refresh fa-spin" style="display: none;"></i>
                                                                    </div>
                                                                </div>
                                                                <!-- End of row -->
                                                                <div id="divNextSteps" class="row">
                                                                </div>
                                                                <!-- End of divNextSteps -->
                                                                <div class="col-sm-12">
                                                                    <div style='border-bottom:1px solid #ccc;'></div>
                                                                </div>
                                                                <br/>
                                                                <div class="row" id="divactivity">
                                                                    <div class="col-sm-12 form-group detail_div axis-detail-pg-field-label" style="padding-left: 25px;">
                                                                        {!$Label.ARAccountDetail_Activity_CompletedSteps}
                                                                        <div class="pull-right"  style="margin-right: 10px"><i id="open-opps-toggle" class="fa fa-chevron-up" data-target="divCompletedSteps"></i></div>                                                        
                                                                        <i class ="divCompletedSteps-busy fa fa-refresh fa-spin" style="display: none;"></i>
                                                                        
                                                                    </div>
                                                                </div>
                                                                <!-- End of row -->
                                                                <div id="divCompletedSteps" class="row collapse in">
                                                                </div>
                                                                <!-- End of divCompletedSteps -->                                                                
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                   
                                                 </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> <!-- end of div grey_border_right -->
                                
                            </div> <!-- end of row ibox -->
                            
                        </div> <!-- end of surgeonDetailView -->
                    </div> <!-- End of float-e-margins -->
                </div> <!-- End of col-xs-12 -->
            </div> <!-- End of row -->
            
        </div>   <!-- End of wrapper content -->
        <!--Code added by Ansu for release 2.2 edit account details modal -->
             <div class="modal fade  modal-authrex" id="account-detail-modal" data-backdrop="static" tabindex="-1" role="dialog">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close edit-account-close-btn" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.ARContact_EditAccount}</h4>
                  </div>
        
                  <div class="modal-body ModalOverflow">
        
                    <div class="row">
                       <div class="form-group col-sm-6">
                            <label>{!$Label.CS_AssignedTo}</label>
                               <input class="assignedTo form-control" disabled="true"/>
                               
                       </div>
                       
                       <div class="form-group col-sm-6">                 
                           <label>Account Number</label>                 
                               <input class="accountnumber form-control" disabled="true"/>
                                  
                        </div>
                        <div class="form-group col-sm-6">                 
                           <label>SAP Name</label>              
                               <input class="SAPName form-control" disabled="true"/>
                                   
                        </div> 
                        <div class="form-group col-sm-6">                 
                           <label>{!$Label.ARContacts_Nickname}</label>               
                               <input class="nickname form-control"/>
                                  
                        </div>
                        <div class="form-group col-sm-6">
                            <label>Work Phone</label>
                               <input class="phone form-control" disabled="true"/>                                
                        </div> 
                        <div class="form-group col-sm-6">
                            <label>{!$Label.CS_WorkFax}</label>
                               <input class="workphone form-control" disabled="true"/>
                                
                        </div>  
                        <div class="form-group col-sm-12">                 
                           <label>Website</label>                 
                               <input type="text" maxlength="255" class="website form-control"/>                                
                        </div>
                        
                        <div class="form-group col-sm-6">
                            <label>{!$Label.ARAccountDetail_ShippingStreet}</label> 
                               <input class="shippingstreet form-control" disabled="true"/>
                               
                           </div>  
                        
                                        
                        <div class="form-group col-sm-6">                 
                             <label>{!$Label.ARAccountDetail_ShippingCity}</label>                   
                               <input class="shippingcity form-control" disabled="true"/>
                                 
                        </div> 
                        
                         
                        <div class="form-group col-sm-6">
                            <label>{!$Label.ARAccountDetail_ShippingState}</label> 
                               <input class="shippingstate form-control" disabled="true"/>
                                
                           </div>  
                        
                                        
                        <div class="form-group col-sm-6">                 
                             <label>{!$Label.ARAccountDetail_ShippingZip}</label>                   
                               <input class="shippingzipcode form-control" disabled="true"/>
                                  
                        </div>                       
                        <div class="form-group col-sm-6">
                            <label>{!$Label.ARContact_AccountFiscalYearEndMonth}</label> 
                               <select class="AccountFiscalYearEndMonth form-control">
                               <option value=" ">- {!$Label.CS_Select} -</option>
                                  </select> 
                           </div>  
                        
                                        
                        <div class="form-group col-sm-6">                 
                             <label>&nbsp;</label>                   
                               <select class="AccountFiscalYearEndDay form-control">
                                  <option value=" ">- {!$Label.CS_Select} -</option>
                                  </select>
                        </div>   
                         
                       <div class="form-group col-sm-6">                 
                           <label>{!$Label.ARContact_BusinessHoursStart}</label>&nbsp;<i class="fa fa-clock-o"></i>                 
                               <select class="businessHourStartTime form-control">
                                  <option value=" ">- {!$Label.CS_Select} -</option>
                                  </select> 
                        </div>
                        <div class="form-group col-sm-6">
                            <label>{!$Label.ARContact_BusinessHoursEnd}</label>&nbsp;<i class="fa fa-clock-o"></i>
                               <select class="businessHourEndTime form-control">
                               <option value=" ">- {!$Label.CS_Select} -</option>
                                  </select> 
                           </div>      
                        
                          
                        <div class="form-group col-sm-12">
                          <label>{!$Label.CS_CredentialingCompany}</label>
                          <input type="text" maxlength="255" class="form-control credentialcompany"/>
                        </div> 
                         
        
                        <div class="form-group col-sm-12">
                          <label>{!$Label.CS_SignInLocation}</label>
                          <input type="text" maxlength="255" class="form-control SignInLocation"></input>
                        </div >
                          
                       
                         <div class="form-group col-sm-12">
                          <label>{!$Label.CS_RepresentativeParking}</label>
                          <input type="text" maxlength="200" class="form-control RepresentativeParking"></input>
                        </div>
                        
                        <div class="form-group col-sm-12">
                            <label>{!$Label.CS_OperatingRoomLocation}</label>
                            <input type="text" maxlength="255" class="form-control OperatingRoomLocation"></input>
                        </div>
                        
                        <div class="form-group  col-sm-12">
                            <label>{!$Label.CS_SterileProcessingLocation}</label>
                            <input type="text" maxlength="255" class="form-control SterileProcessingLocation"></input>
                        </div>
                        <div class="form-group col-sm-6">                 
                           <label>{!$Label.ARContact_SterileProcessingHoursStart}</label>&nbsp;<i class="fa fa-clock-o"></i>                   
                               <select class="SterileProcessingHourStartTime form-control">
                                  <option value=" ">- {!$Label.CS_Select} -</option>
                                  </select> 
                        </div>
                        <div class="form-group col-sm-6">
                            <label>{!$Label.ARContact_SterileProcessingHoursEnd}</label>&nbsp;<i class="fa fa-clock-o"></i>
                               <select class="SterileProcessingHourEndTime form-control">
                               <option value=" ">- {!$Label.CS_Select} -</option>
                                  </select> 
                        </div>   
                                                                                             
                        
                        <div class="form-group  col-sm-12" >
                            <label>{!$Label.CS_RequiredtoChangeScrubs}</label>
                            <select class="form-control RequiredtoChangeScrubs">
                                  <option value=" ">- {!$Label.CS_Select} -</option>
                                  <option value="Yes">Yes</option>
                                  <option value="No">No</option>
                               </select>
                        </div>
                        
                        <div class="form-group  col-sm-12"  >
                            <label>{!$Label.CS_OtherAttireNotes}</label>
                            <input type="text" maxlength="255" class="form-control OtherAttireNotes"></input>
                        </div>
                        
                         
                       <!-- <div class="form-group col-sm-6">
                            <label>{!$Label.ARContact_AccountFiscalYearStartDay}</label> 
                               <select class="AccountFiscalYearStartMonth form-control">
                               <option value=" ">- {!$Label.CS_Select} -</option>
                                  </select> 
                           </div>  
                        
                                        
                        <div class="form-group col-sm-6">                 
                             <label>&nbsp;</label>                   
                               <select class="AccountFiscalYearStartDay form-control">
                                  <option value=" ">- {!$Label.CS_Select} -</option>
                                  </select>
                        </div>   -->   
                        
                                  
                      </div>
                     </div>
                    <div class="modal-footer">
                        <span class="error text-danger" id="editAccDetailErrors"></span>
                        <button type="button" class="btn btn-default edit-account-close-btn">{!$Label.CS_Close}</button>
                        <button type="button" class="btn btn-primary btn-save">{!$Label.CS_Save}</button>
                    </div>
                  </div>
                </div>
              </div>
               
         <!-- Code added by Ansu  for edit modal ends -->
         <!-- Code added by Ansu  for release 3.2 add surgeon affiliations  -->
            <div class="modal fade  modal-authrex" id="add-surgeon-affiliation-modal" data-backdrop="static" tabindex="-1" role="dialog">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.ARContact_SurgeonAffiliation}</h4>
                      </div>
                      <div class="modal-body">
                        <div class="form contact-form">
                          <div class="row">
                            <div class="col-sm-12">
                              <div class="form-group">
                                <label for="surgeon" class="control-label"><span class="text-danger">*</span> {!$Label.AROpportunity_Surgeon}<i class="surgeon-busy fa fa-refresh fa-spin" style="display:none"></i></label>
                                <input  id="surgeon" class="form-control surgeon-typeahead clear-on-close" type="text" />
                                <div id="surgeonsTag" class="surgeon ctag-list clear-on-close"></div>
                              </div>
                            </div>        
                          </div>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <span class="text-danger save-error" id="affiliationErrors"></span>
                        <button type="button" id ="delete-btn-surgeon" style="display:none" class="pull-left btn btn-warning btn-delete">Delete</button>
                        <button type="button" class="btn btn-default surgeon-affiliation-cancel-btn">{!$Label.CS_Close}</button>
                        <button type="button" class="btn btn-primary btn-save">{!$Label.CS_Save}</button>
                      </div>
                    </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
              <div id="account-notes-modal" data-rec-id="" class="modal fade modal-authrex" role="dialog" data-backdrop="static" tabindex="-1" >
                    <div class="modal-dialog">
                    
                            <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close account-notes-cancel-btn" aria-hidden="true"></button>
                                <h3 class="dependent-list-header">{!$Label.ARAccountDetail_AccountNotes}</h3>
                            </div>
                            <div class="modal-body">
                                <div>
                                    <div class="form-group row">
                                        <label for="accNoteDate" class="col-sm-2 control-label" style="padding-top: 7px">{!$Label.AROpportunity_Date}</label>
                                        <div class="col-sm-10">
                                            <p class="form-control-static" id="accNoteDate">
                                                dateFormatter(moment());
                                            </p>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="accNotes" class="col-sm-2 control-label">{!$Label.AROpportunity_Note} &nbsp;<span class="text-danger">*</span></label>
                                        <div class="col-sm-10">
                                            <textarea class="form-control" rows="5" id="accNotes"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <span class="text-danger save-error" id="addNoteErrors"></span>
                                <button type="button" class="btn btn-warning pull-left btn-delete" onclick="deleteNote()">Delete</button>
                                <button type="button" class="btn account-notes-cancel-btn">Cancel</button>
                                <button type="button" class="btn btn-primary btn-save" onclick="addAccountNote()">Ok</button>
                            </div>
                        </div>
                    </div>
                </div><!-- /.modal -->
                 <!-- Add Provide related contact modal -->
                <div class="modal fade  modal-authrex" id="provider-contact-modal" data-backdrop="static" tabindex="-1" role="dialog">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.AROpportunity_Contact}</h4>
                      </div>
                      <div class="modal-body">
                        <div class="form contact-form">
                          <div class="row">
                            <div class="col-sm-6">
                              <div class="form-group">
                                <label><span class="text-danger">*</span> {!$Label.ARAccountDetail_FirstName}</label>
                                <input type="text" class="firstName form-control"/>
                              </div>
                              <div class="form-group">
                                <label>{!$Label.ARAccountDetail_Title}</label>
                                <input type="text" class="title form-control"/>
                              </div>
                              <div class="form-group">
                                <label>{!$Label.ARAccountDetail_Phone}</label>
                                <input id="Phone" type="text" class="phone form-control" onkeypress='return isNumberCommaDot(event)'/>
                                <span id="spnPhone"></span>
                              </div>
                              <div class="form-group">
                                <label>{!$Label.ARAccountDetai_Street}</label>
                                <input type="text" class="street form-control"/>
                              </div>
                              <div class="form-group">
                                <label>{!$Label.ARAccountDetai_State}</label>
                                <select class="form-control state">
                                  <option>Alabama</option>
                                  <option>Alaska</option>
                                  <option>Arizona</option>
                                  <option>Arkansas</option>
                                  <option>California</option>
                                  <option>Colorado</option>
                                  <option>Connecticut</option>
                                  <option>Delaware</option>
                                  <option>Dist of Columbia</option>
                                  <option>Florida</option>
                                  <option>Georgia</option>
                                  <option>Hawaii</option>
                                  <option>Idaho</option>
                                  <option>Illinois</option>
                                  <option>Indiana</option>
                                  <option>Iowa</option>
                                  <option>Kansas</option>
                                  <option>Kentucky</option>
                                  <option>Louisiana</option>
                                  <option>Maine</option>
                                  <option>Maryland</option>
                                  <option>Massachusetts</option>
                                  <option>Michigan</option>
                                  <option>Minnesota</option>
                                  <option>Mississippi</option>
                                  <option>Missouri</option>
                                  <option>Montana</option>
                                  <option>Nebraska</option>
                                  <option>Nevada</option>
                                  <option>New Hampshire</option>
                                  <option>New Jersey</option>
                                  <option>New Mexico</option>
                                  <option>North Carolina</option>
                                  <option>New York</option>
                                  <option>North Dakota</option>
                                  <option>Ohio</option>
                                  <option>Oklahoma</option>
                                  <option>Oregon</option>
                                  <option>Pennsylvania</option>
                                  <option>Rhode Island</option>
                                  <option>South Carolina</option>
                                  <option>South Dakota</option>
                                  <option>Tennessee</option>
                                  <option>Texas</option>
                                  <option>Utah</option>
                                  <option>Vermont</option>
                                  <option>Virginia</option>
                                  <option>Washington</option>
                                  <option>West Virginia</option>
                                  <option>Wisconsin</option>
                                  <option>Wyoming</option>
                                </select>
                              </div>                                                          
                            </div>
                            <div class="col-sm-6">
                              <div class="form-group">
                                <label><span class="text-danger">*</span> {!$Label.ARAccountDetail_LastName}</label>
                                <input type="text" class="lastName form-control"/>
                              </div>
                              <div class="form-group">
                                <label>{!$Label.ARAccountDetail_Email}</label>
                                <input type="text" class="email form-control"/>
                              </div>    
                              <div class="form-group">
                                <label>{!$Label.ARContacts_Mobile}</label>
                                <input id="contactMobilePhone" type="text" class="mobile form-control" onkeypress='return isNumberCommaDot(event)'/>
                                <span id="spnMobilePhone"></span>
                              </div>
                              <div class="form-group">
                                <label>{!$Label.ARAccountDetail_City}</label>
                                <input type="text" class="city form-control"/>
                              </div> 
                              <div class="form-group">
                                <label>{!$Label.ARAccountDetail_ZipCode}</label>
                                <input type="text" class="zip form-control" maxlength="10"/>
                              </div>                                                                        
                            </div>                
                          </div>
                          
                          <div class="row">
                            <div class="col-xs-12">
                              <div class="form-group">
                                <label>{!$Label.ARAccountDetail_Inventory_Notes}</label>
                                <textarea class="notes form-control"></textarea>
                              </div> 
                            </div>
                          </div>
                          
                          <div class="row">
                            <div class="col-xs-12">
                             <p>
                                {!$Label.ARAccountDetail_RelatedCon_Msg}
                             </p>
                            </div>
                          </div>
            
                        </div>
                      </div>
                      <div class="modal-footer">
                        <span class="text-danger save-error"></span>
                        <button type="button" style="display:none" class="pull-left btn btn-warning btn-delete">Delete</button>
                        <button type="button" class="btn btn-default provider-contact-close-btn">{!$Label.CS_Close}</button>
                        <button type="button" class="btn btn-primary btn-save">{!$Label.CS_Save}</button>
                      </div>
                    </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                
                  <!--Modal for new preference card -->
                <div class="modal fade  modal-authrex" id="new-prefcard-modal" data-backdrop="static" tabindex="-1" role="dialog">
                  <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close account-inventory-cancel-btn" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.ARAccountDetail_Inventory_Header}</h4>
                      </div>
                      <div class="modal-body ModalOverflow">
                        
            
                        <apex:form styleClass="row pref-card">
                            
                        <div class="form">    
                            <div class="row">
                                
                                <div class="form-group col-sm-12">                        
                                  <label class="control-label"><span class="text-danger">*</span> {!$Label.ARAccountDetail_AccountName}</label>
                                  <input type="text" class="form-control prefCardName" placeholder="Account name" disabled="true"/>
                                </div>
                                <div class="row form-group col-sm-12" id="divProductItems">
                                    <div class="col-xs-12"  style="width:103.5%">
                                        <div class="table-responsive">
            
                                            <table class="table table-condensed product-parts related-table" style="margin-bottom:0px">
                                                <label class="control-label">{!$Label.ARAccountDetail_Inventory_ArthrexProd}</label><br/>
                                                <thead>
                                                    <tr>
                                                        <th style="width:18%">{!$Label.AROpportunity_PartNumber}</th>
                                                        <th style="width:30%">{!$Label.AROpportunity_Description}</th>
                                                        <th style="width:5%">{!$Label.AROpportunity_Qty}</th>
                                                        <th style="width:9%">{!$Label.ARAccountDetail_Inventory_LowPar}</th>
                                                        <th style="width:9%">{!$Label.ARAccountDetail_Inventory_HighPar}</th>
                                                        <th style="width:16%">{!$Label.ARAccountDetail_Inventory_SerialNumber}</th>
                                                        <th style="width:16.5%">&nbsp;</th>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <input type="text" class="form-control opportunity-part-number opportunity-part-number-typeahead" maxlength="25"/>
                                                        </td>
                                                        <td>
                                                            <input type="text" class="form-control opportunity-part-description opportunity-part-description-typeahead"/>
                                                        </td>
                                                        <td>
                                                            <input type="text" class="form-control opportunity-part-quantity" maxlength="18"/>
                                                        </td>
                                                        <td>
                                                            <input  type="text" class="form-control opportunity-part-unit-price" maxlength="3"/>                                                            
                                                        </td>
                                                        <td>
                                                            <input type="text" class="form-control opportunity-part-total-price" maxlength="3"/>                                                            
                                                                        
                                                        </td>
                                                        <td>
                                                            <input type="text" class="form-control opportunity-part-serial-number" maxlength="20" />
                                                                       
                                                        </td>
                                                        <td style="text-align:right">
                                                            <button class="btn btn-xs btn-primary add-opp-part" disabled="true" onclick="addPartInv()">Add</button>
                                                        </td>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                                                             
                                                </tbody>                                                
                                            </table>
                                        </div>
                                    </div>
                                </div>                                                
                            </div>
            
                            
                            <div class="row">
                                <div style="color:red">&emsp; {!$Label.ARAccountDetail_Inventory_Modal}</div>
                                <div class="col-sm-12 form-group">
                                      <label class="control-label">{!$Label.CS_Disposables}</label>
                                      <div class="rte disposables">
                                      </div>
                                </div>
                                
                                <div class="col-sm-12 form-group">
                                    <label class="control-label">{!$Label.Sutures_ARContact}</label>
                                      <div class="rte sutures">
                                      </div>
                                </div>
                                
                                <div class="col-sm-12 form-group">
                                    <label class="control-label">{!$Label.Medications_ARContact}</label>
                                      <div class="rte medications">
                                      </div>
                                </div>
                                
                                <div class="col-sm-12 form-group">
                                    <label class="control-label">{!$Label.Equipment_ARContact}</label>
                                      <div class="rte equipment">
                                      </div>
                                </div>
                                
                                <div class="col-sm-12 form-group">
                                    <label class="control-label">{!$Label.ARAccountDetail_Inventory_AddInfo}</label>
                                      <div class="rte equipment-notes">
                                      </div>
                                </div>
                                
                            </div>
                          
                        </div>
                        </apex:form>
            
            
                      </div>
                      <div class="modal-footer">
                        <span class="text-danger save-error"></span>
                        <button type="button" class="btn btn-default account-inventory-cancel-btn">{!$Label.CS_Close}</button>
                        <button type="button" class="btn btn-primary btn-save-prefcard">{!$Label.CS_Save}</button>
                      </div>
                    </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                
                <!-- modal for delete Notes -->
                <div class="modal fade  modal-authrex" id="delete-Note-modal" data-backdrop="static" tabindex="-1" role="dialog">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;Note</h4>
                      </div>
            
                      <div class="modal-body">
            
                        <div class="row">
                          <div class="col-sm-8">
                            <div class="form-group">
                               <label>Are you sure you want to delete the Note?</label>
                            </div>                
                          </div>
                        </div>
                      </div>
            
                      <div class="modal-footer">
                        <span class="text-danger save-error"></span>&nbsp;&nbsp;
                        <button type="button" class="btn btn-primary btn-delete-Note">{!$Label.CS_Yes}</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_No}</button>
                        
                      </div>
                    </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                
                
                <!-- modal for delete Contact -->
                <div class="modal fade  modal-authrex" id="delete-contact-modal" data-backdrop="static" tabindex="-1" role="dialog">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.AROpportunity_Contact}</h4>
                      </div>
            
                      <div class="modal-body">
            
                        <div class="row">
                          <div class="col-sm-8">
                            <div class="form-group">
                               <label>Are you sure you want to delete the Contact?</label>
                            </div>                
                          </div>
                        </div>
                      </div>
            
                      <div class="modal-footer">
                        <span class="text-danger save-error"></span>&nbsp;&nbsp;
                        <button type="button" class="btn btn-primary btn-delete-contact">{!$Label.CS_Yes}</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_No}</button>
                        
                      </div>
                    </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                
                <!-- modal for delete Surgeon-->
                <div class="modal fade  modal-authrex" id="delete-surgeon-modal" data-backdrop="static" tabindex="-1" role="dialog">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.AROpportunity_Surgeon}</h4>
                      </div>
            
                      <div class="modal-body">
            
                        <div class="row">
                          <div class="col-sm-8">
                            <div class="form-group">
                               <label>Are you sure you want to delete the Surgeon?</label>
                            </div>                
                          </div>
                        </div>
                      </div>
            
                      <div class="modal-footer">
                        <span class="text-danger save-error"></span>&nbsp;&nbsp;
                        <button type="button" class="btn btn-primary btn-delete-surgeon">{!$Label.CS_Yes}</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_No}</button>
                        
                      </div>
                    </div><!-- /.modal-content -->
                  </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                
                <div id="generate-pdf-modal" class="modal fade modal-authrex" role="dialog" data-backdrop="static" tabindex="-1" >
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">{!$Label.ARSurgeon_GeneratePDF}</h4>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="form-group col-sm-12">
                                        <label for="card-name" class="control-label">{!$Label.ARAccountDetail_AccountName}</label>
                                        <p id="card-name" class="form-control-static card-name readonly-control"></p>
                                    </div>
                                                                      
                                    <div class="form-group col-sm-12">
                                        <label>
                                            <input type="checkbox" id="implants-chkbx" class="primary-role clear-on-close"/>  {!$Label.ARSurgeon_ImplantsPDF}
                                        </label>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label>
                                            <input type="checkbox" id="instrument-chkbx" class="primary-role clear-on-close"/> {!$Label.ARSurgeon_InstrumentsPDF}
                                        </label>
                                    </div>
                                    <div class="form-group col-sm-12">
                                        <label>
                                            <input type="checkbox" id="notes-chkbx" class="primary-role clear-on-close"/> {!$Label.ARAccountDetail_Inventory_Notes}
                                        </label>
                                    </div>
                                 </div>  <!-- end of row -->
                                 <div class="row">
                                     <div class="form-group col-sm-12">
                                         <p class="disclaimerFooter" id="legalDisclaimer">{!$Label.ARAccountDetail_Inventory_ModalDisclaimer}
                                         
                                         </p>
                                     </div>             
                                 </div>
                            </div>
                            <div class="modal-footer">
                                <span class="text-danger save-error" id="generatePdfErrors"></span>
                                 
                                <button type="button" class="btn btn-default generatePdf-cancel-btn" data-dismiss="modal">{!$Label.AROpportunity_Cancel}</button>
                                <button type="button" class="btn btn-primary generatePdf-save-btn"> {!$Label.ARSurgeon_GeneratePDF} </button>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                
                 <!--CID - 000177/Mimansha Samal/April/14/2017/Edit Account Save Warning Modal -->
                 <div class="modal fade  modal-authrex" id="cancel-account-detail-modal" data-backdrop="static" tabindex="-1" role="dialog" >
   
                     <div class="modal-dialog" style="width:450px">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.ARContact_EditAccount}</h4>
                            </div>
    
                            <div class="modal-body">
                                <div class="row">
                                    <div>
                           
                                        <label>Do you want to save the changes you made for the Account? </label>
                                          
                                    </div>
                                </div>
                            </div>
    
                            <div class="modal-footer">
                                <span class="text-danger save-error"></span>
                       
                                <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Yes}</button>
                                <button type="button" class="btn btn-primary btn-close-edit-account-warning">{!$Label.CS_No}</button>
                        
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->         
            
            <!--CID - 000177/Mimansha Samal/April/14/2017/Edit Account Save Warning Modal -->
            
            <!--CID - 000177/Mimansha Samal/April/17/2017/Provider Contact Save Warning Modal -->
            <div class="modal fade  modal-authrex" id="cancel-provider-contact-modal" data-backdrop="static" tabindex="-1" role="dialog" >
   
                <div class="modal-dialog" style="width:450px">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.AROpportunity_Contact}</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div>
                       
                                    <label>Do you want to save the changes you made for the Related Contact? </label>
                                      
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <span class="text-danger save-error"></span>
                   
                            <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Yes}</button>
                            <button type="button" class="btn btn-primary btn-close-provider-contact-warning">{!$Label.CS_No}</button>
                    
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->
            
            <!--CID - 000177/Mimansha Samal/April/17/2017/Surgeon Affiliation Save Warning Modal -->
            <div class="modal fade  modal-authrex" id="cancel-add-surgeon-affiliation-modal" data-backdrop="static" tabindex="-1" role="dialog" >
   
                <div class="modal-dialog" style="width:450px">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.ARAccountDetail_Surgeons}</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div>
                       
                                    <label>Do you want to save the changes you made for the Surgeons? </label>
                                      
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <span class="text-danger save-error"></span>
                   
                            <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Yes}</button>
                            <button type="button" class="btn btn-primary btn-cancel-surgeon-affiliation-warning">{!$Label.CS_No}</button>
                    
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal -->         
            
            <!--CID - 000177/Mimansha Samal/April/17/2017/Surgeon Affiliation Save Warning Modal -->
            
            <!--CID - 000177/Mimansha Samal/April/17/2017/ Edit Inventory Save warning modal -->
            <div class="modal fade  modal-authrex" id="cancel-new-prefcard-modal" data-backdrop="static" tabindex="-1" role="dialog" >
           
                <div class="modal-dialog" style="width:450px">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.ARAccountDetail_Inventory_Header}</h4>
                        </div>
        
                        <div class="modal-body">
                            <div class="row">
                                <div>
                               
                                  <label>Do you want to save the changes you made for the Account Inventory? </label>
                                              
                                </div>
                            </div>
                        </div>
        
                        <div class="modal-footer">
                            <span class="text-danger save-error"></span>
                           
                            <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Yes}</button>
                            <button type="button" class="btn btn-primary btn-cancel-account-inventory-warning">{!$Label.CS_No}</button>
                            
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal --> 
            
            <!--CID - 000177/Mimansha Samal/April/17/2017/ Edit Inventory Save warning modal -->
            
            <!--CID - 000177/Mimansha Samal/April/17/2017/ Add/Edit Account Notes Save warning modal -->
            <div class="modal fade  modal-authrex" id="cancel-account-notes-modal" data-backdrop="static" tabindex="-1" role="dialog" >
           
                <div class="modal-dialog" style="width:450px">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title"><i class="fa fa-plus-square-o"></i>&nbsp;&nbsp;{!$Label.ARAccountDetail_AccountNotes}</h4>
                        </div>
        
                        <div class="modal-body">
                            <div class="row">
                                <div>
                               
                                  <label>Do you want to save the changes you made for the Account Notes? </label>
                                              
                                </div>
                            </div>
                        </div>
        
                        <div class="modal-footer">
                            <span class="text-danger save-error"></span>
                           
                            <button type="button" class="btn btn-default" data-dismiss="modal">{!$Label.CS_Yes}</button>
                            <button type="button" class="btn btn-primary btn-cancel-account-notes-warning">{!$Label.CS_No}</button>
                            
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div><!-- /.modal --> 
            
            <!--CID - 000177/Mimansha Samal/April/17/2017/ Add/Edit Account Notes Save warning modal -->
        </apex:define>                              
    </apex:composition>
</apex:page>